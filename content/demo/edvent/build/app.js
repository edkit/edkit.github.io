
// lib/layout/version.js
enyo&&enyo.version&&(enyo.version.layout="2.6.0-pre.4");

// lib/layout/contextual/source/ContextualLayout.js
(function(t){t.kind({name:"enyo.ContextualLayout",kind:"Layout",adjustPosition:function(){if(this.container.showing&&this.container.hasNode()){this.resetPositioning();var t=this.getViewWidth(),i=this.getViewHeight(),o=this.container.vertFlushMargin,s=i-this.container.vertFlushMargin,e=this.container.horizFlushMargin,n=t-this.container.horizFlushMargin;if(o>this.offset.top+this.offset.height||this.offset.top>s){if(this.applyVerticalFlushPositioning(e,n))return;if(this.applyHorizontalFlushPositioning(e,n))return;if(this.applyVerticalPositioning())return}else if((e>this.offset.left+this.offset.width||this.offset.left>n)&&this.applyHorizontalPositioning())return;var h=this.getBoundingRect(this.container.node);if(h.width>this.container.widePopup){if(this.applyVerticalPositioning())return}else if(h.height>this.container.longPopup&&this.applyHorizontalPositioning())return;if(this.applyVerticalPositioning())return;if(this.applyHorizontalPositioning())return}},initVerticalPositioning:function(){this.resetPositioning(),this.container.addClass("vertical");var t=this.getBoundingRect(this.container.node),i=this.getViewHeight();return this.container.floating?i/2>this.offset.top?(this.applyPosition({top:this.offset.top+this.offset.height,bottom:"auto"}),this.container.addClass("below")):(this.applyPosition({top:this.offset.top-t.height,bottom:"auto"}),this.container.addClass("above")):t.top+t.height>i&&i-t.bottom<t.top-t.height?this.container.addClass("above"):this.container.addClass("below"),t=this.getBoundingRect(this.container.node),t.top+t.height>i||0>t.top?!1:!0},applyVerticalPositioning:function(){if(!this.initVerticalPositioning())return!1;var t=this.getBoundingRect(this.container.node),i=this.getViewWidth();if(this.container.floating){var o=this.offset.left+this.offset.width/2-t.width/2;o+t.width>i?(this.applyPosition({left:this.offset.left+this.offset.width-t.width}),this.container.addClass("left")):0>o?(this.applyPosition({left:this.offset.left}),this.container.addClass("right")):this.applyPosition({left:o})}else{var s=this.offset.left+this.offset.width/2-t.left-t.width/2;t.right+s>i?(this.applyPosition({left:this.offset.left+this.offset.width-t.right}),this.container.addRemoveClass("left",!0)):0>t.left+s?this.container.addRemoveClass("right",!0):this.applyPosition({left:s})}return!0},applyVerticalFlushPositioning:function(t,i){if(!this.initVerticalPositioning())return!1;var o=this.getBoundingRect(this.container.node),s=this.getViewWidth();return t>this.offset.left+this.offset.width/2?(this.offset.left+this.offset.width/2<this.container.horizBuffer?this.applyPosition({left:this.container.horizBuffer+(this.container.floating?0:-o.left)}):this.applyPosition({left:this.offset.width/2+(this.container.floating?this.offset.left:0)}),this.container.addClass("right"),this.container.addClass("corner"),!0):this.offset.left+this.offset.width/2>i?(this.offset.left+this.offset.width/2>s-this.container.horizBuffer?this.applyPosition({left:s-this.container.horizBuffer-o.right}):this.applyPosition({left:this.offset.left+this.offset.width/2-o.right}),this.container.addClass("left"),this.container.addClass("corner"),!0):!1},initHorizontalPositioning:function(){this.resetPositioning();var t=this.getBoundingRect(this.container.node),i=this.getViewWidth();return this.container.floating?i/2>this.offset.left+this.offset.width?(this.applyPosition({left:this.offset.left+this.offset.width}),this.container.addRemoveClass("left",!0)):(this.applyPosition({left:this.offset.left-t.width}),this.container.addRemoveClass("right",!0)):this.offset.left-t.width>0?(this.applyPosition({left:this.offset.left-t.left-t.width}),this.container.addRemoveClass("right",!0)):(this.applyPosition({left:this.offset.width}),this.container.addRemoveClass("left",!0)),this.container.addRemoveClass("horizontal",!0),t=this.getBoundingRect(this.container.node),0>t.left||t.left+t.width>i?!1:!0},applyHorizontalPositioning:function(){if(!this.initHorizontalPositioning())return!1;var t=this.getBoundingRect(this.container.node),i=this.getViewHeight(),o=this.offset.top+this.offset.height/2;return this.container.floating?o>=i/2-.05*i&&i/2+.05*i>=o?this.applyPosition({top:this.offset.top+this.offset.height/2-t.height/2,bottom:"auto"}):i/2>this.offset.top+this.offset.height?(this.applyPosition({top:this.offset.top,bottom:"auto"}),this.container.addRemoveClass("high",!0)):(this.applyPosition({top:this.offset.top-t.height+2*this.offset.height,bottom:"auto"}),this.container.addRemoveClass("low",!0)):o>=i/2-.05*i&&i/2+.05*i>=o?this.applyPosition({top:(this.offset.height-t.height)/2}):i/2>this.offset.top+this.offset.height?(this.applyPosition({top:-this.offset.height}),this.container.addRemoveClass("high",!0)):(this.applyPosition({top:t.top-t.height-this.offset.top+this.offset.height}),this.container.addRemoveClass("low",!0)),!0},applyHorizontalFlushPositioning:function(t,i){if(!this.initHorizontalPositioning())return!1;var o=this.getBoundingRect(this.container.node),s=this.getViewHeight();return this.container.floating?s/2>this.offset.top?(this.applyPosition({top:this.offset.top+this.offset.height/2}),this.container.addRemoveClass("high",!0)):(this.applyPosition({top:this.offset.top+this.offset.height/2-o.height}),this.container.addRemoveClass("low",!0)):o.top+o.height>s&&s-o.bottom<o.top-o.height?(this.applyPosition({top:o.top-o.height-this.offset.top-this.offset.height/2}),this.container.addRemoveClass("low",!0)):(this.applyPosition({top:this.offset.height/2}),this.container.addRemoveClass("high",!0)),t>this.offset.left+this.offset.width?(this.container.addClass("left"),this.container.addClass("corner"),!0):this.offset.left>i?(this.container.addClass("right"),this.container.addClass("corner"),!0):!1},getBoundingRect:function(t){var i=t.getBoundingClientRect();return i.width&&i.height?i:{left:i.left,right:i.right,top:i.top,bottom:i.bottom,width:i.right-i.left,height:i.bottom-i.top}},getViewHeight:function(){return void 0===window.innerHeight?document.documentElement.clientHeight:window.innerHeight},getViewWidth:function(){return void 0===window.innerWidth?document.documentElement.clientWidth:window.innerWidth},applyPosition:function(t){var i="";for(var o in t)i+=o+":"+t[o]+(isNaN(t[o])?"; ":"px; ");this.container.addStyles(i)},resetPositioning:function(){this.container.removeClass("right"),this.container.removeClass("left"),this.container.removeClass("high"),this.container.removeClass("low"),this.container.removeClass("corner"),this.container.removeClass("below"),this.container.removeClass("above"),this.container.removeClass("vertical"),this.container.removeClass("horizontal"),this.applyPosition({left:"auto"}),this.applyPosition({top:"auto"})},reflow:function(){this.offset=this.container.activatorOffset,this.adjustPosition()}})})(enyo,this);

// lib/layout/fittable/source/FittableLayout.js
(function(t){t.kind({name:"enyo.FittableLayout",kind:"Layout",noDefer:!0,constructor:t.inherit(function(i){return function(){i.apply(this,arguments),this.container.addRemoveClass("force-left-to-right",t.Control.prototype.rtl&&!this.container.get("rtl")),this.useFlex=t.FittableLayout.flexAvailable&&this.container.useFlex===!0,this.useFlex?this.container.addClass(this.flexLayoutClass):this.container.addClass(this.fitLayoutClass)}}),calcFitIndex:function(){var t,i,e=this.container.children;for(i=0;e.length>i;i++)if(t=e[i],t.fit&&t.showing)return i},getFitControl:function(){var t=this.container.children,i=t[this.fitIndex];return i&&i.fit&&i.showing||(this.fitIndex=this.calcFitIndex(),i=t[this.fitIndex]),i},shouldReverse:function(){return this.container.rtl&&"h"===this.orient},destroy:t.inherit(function(t){return function(){t.apply(this,arguments),this.container&&this.container.removeClass(this.useFlex?this.flexLayoutClass:this.fitLayoutClass)}}),getFirstChild:function(){var t=this.getShowingChildren();return this.shouldReverse()?t[t.length-1]:t[0]},getLastChild:function(){var t=this.getShowingChildren();return this.shouldReverse()?t[0]:t[t.length-1]},getShowingChildren:function(){for(var t=[],i=0,e=this.container.children,o=e.length;o>i;i++)e[i].showing&&t.push(e[i]);return t},_reflow:function(i,e,o,s){this.container.addRemoveClass("enyo-stretch",!this.container.noStretch);var n,h,a,r,l,f=this.getFitControl(),d=this.container.hasNode(),c=0,g=0,u=0;if(f&&d){if(n=t.dom.calcPaddingExtents(d),h=f.getBounds(),c=d[e]-(n[o]+n[s]),this.shouldReverse()){r=this.getFirstChild(),u=c-(h[o]+h[i]);var p=t.dom.getComputedBoxValue(r.hasNode(),"margin",o)||0;if(r==f)g=p;else{var y=r.getBounds(),v=y[o];g=h[o]+p-v}}else{a=this.getLastChild(),g=h[o]-(n[o]||0);var C=t.dom.getComputedBoxValue(a.hasNode(),"margin",s)||0;if(a==f)u=C;else{var w=a.getBounds(),m=h[o]+h[i],P=w[o]+w[i]+C;u=P-m}}l=c-(g+u),f.applyStyle(i,l+"px")}},flow:function(){if(this.useFlex){var t,i,e=this.container.children;for(this.container.addClass(this.flexLayoutClass),this.container.addRemoveClass("nostretch",this.container.noStretch),t=0;e.length>t;t++)i=e[t],i.addClass("enyo-flex-item"),i.addRemoveClass("flex",i.fit)}},reflow:function(){this.useFlex||("h"==this.orient?this._reflow("width","clientWidth","left","right"):this._reflow("height","clientHeight","top","bottom"))},statics:{flexAvailable:!1}}),t.kind({name:"enyo.FittableColumnsLayout",kind:"FittableLayout",orient:"h",fitLayoutClass:"enyo-fittable-columns-layout",flexLayoutClass:"enyo-flex-container columns"}),t.kind({name:"enyo.FittableRowsLayout",kind:"FittableLayout",fitLayoutClass:"enyo-fittable-rows-layout",orient:"v",flexLayoutClass:"enyo-flex-container rows"}),function(){var i=document.createElement("div");t.FittableLayout.flexAvailable=void 0!==i.style.flexBasis||void 0!==i.style.webkitFlexBasis||void 0!==i.style.mozFlexBasis||void 0!==i.style.msFlexBasis}()})(enyo,this);

// lib/layout/fittable/source/FittableRows.js
(function(t){t.kind({name:"enyo.FittableRows",layoutKind:"FittableRowsLayout",noStretch:!1})})(enyo,this);

// lib/layout/fittable/source/FittableColumns.js
(function(t){t.kind({name:"enyo.FittableColumns",layoutKind:"FittableColumnsLayout",noStretch:!1})})(enyo,this);

// lib/layout/fittable/source/FittableHeaderLayout.js
(function(t){t.kind({name:"enyo.FittableHeaderLayout",kind:"FittableColumnsLayout",applyFitSize:t.inherit(function(t){return function(i,e,o,s){var n=o-s,h=this.getFitControl();0>n?(h.applyStyle("padding-left",Math.abs(n)+"px"),h.applyStyle("padding-right",null)):n>0?(h.applyStyle("padding-left",null),h.applyStyle("padding-right",Math.abs(n)+"px")):(h.applyStyle("padding-left",null),h.applyStyle("padding-right",null)),t.apply(this,arguments)}})})})(enyo,this);

// lib/layout/list/source/FlyweightRepeater.js
(function(t){var i=t.HTMLStringDelegate,e=Object.create(i);e.generateInnerHtml=function(t){var e="";t.index=null;for(var n=0,o=0;t.count>n;n++)o=t.rowOffset+(this.bottomUp?t.count-n-1:n),t.setupItem(o),t.$.client.setAttribute("data-enyo-index",o),"h"==t.orient&&t.$.client.setStyle("display:inline-block;"),e+=i.generateChildHtml(t),t.$.client.teardownRender();return e},t.kind({name:"enyo.FlyweightRepeater",kind:"enyo.Control",published:{count:0,noSelect:!1,multiSelect:!1,toggleSelected:!1,clientClasses:"",clientStyle:"",rowOffset:0,orient:"v"},events:{onSetupItem:"",onRenderRow:""},cachePoint:!0,bottomUp:!1,renderDelegate:e,components:[{kind:"Selection",onSelect:"selectDeselect",onDeselect:"selectDeselect"},{name:"client"}],create:t.inherit(function(t){return function(){t.apply(this,arguments),this.noSelectChanged(),this.multiSelectChanged(),this.clientClassesChanged(),this.clientStyleChanged()}}),noSelectChanged:function(){this.noSelect&&this.$.selection.clear()},multiSelectChanged:function(){this.$.selection.setMulti(this.multiSelect)},clientClassesChanged:function(){this.$.client.setClasses(this.clientClasses)},clientStyleChanged:function(){this.$.client.setStyle(this.clientStyle)},setupItem:function(t){this.doSetupItem({index:t,selected:this.isSelected(t)})},generateChildHtml:function(){return this.renderDelegate.generateInnerHtml(this)},previewDomEvent:function(t){var i=this.index=this.rowForEvent(t);t.rowIndex=t.index=i,t.flyweight=this},decorateEvent:t.inherit(function(t){return function(i,e){var n=e&&null!=e.index?e.index:this.index;e&&null!=n&&(e.index=n,e.flyweight=this),t.apply(this,arguments)}}),tap:function(t,i){this.noSelect||-1===i.index||(this.toggleSelected?this.$.selection.toggle(i.index):this.$.selection.select(i.index))},selectDeselect:function(t,i){this.renderRow(i.key)},getSelection:function(){return this.$.selection},isSelected:function(t){return this.getSelection().isSelected(t)},renderRow:function(i){if(!(this.rowOffset>i||i>=this.count+this.rowOffset)){this.setupItem(i);var e=this.fetchRowNode(i);if(e){var n=t.HTMLStringDelegate;t.dom.setInnerHtml(e,n.generateChildHtml(this.$.client)),this.$.client.teardownChildren(),this.doRenderRow({rowIndex:i})}}},fetchRowNode:function(t){return this.hasNode()?this.node.querySelector('[data-enyo-index="'+t+'"]'):void 0},rowForEvent:function(t){if(!this.hasNode())return-1;for(var i=t.target;i&&i!==this.node;){var e=i.getAttribute&&i.getAttribute("data-enyo-index");if(null!==e)return Number(e);i=i.parentNode}return-1},prepareRow:function(i){if(!(this.rowOffset>i||i>=this.count+this.rowOffset)){this.setupItem(i);var e=this.fetchRowNode(i);t.FlyweightRepeater.claimNode(this.$.client,e)}},lockRow:function(){this.$.client.teardownChildren()},performOnRow:function(i,e,n){this.rowOffset>i||i>=this.count+this.rowOffset||e&&(this.prepareRow(i),t.call(n||null,e),this.lockRow())},statics:{claimNode:function(t,i){var e;i&&(e=i.id!==t.id?i.querySelector("#"+t.id):i),t.generated=Boolean(e||!t.tag),t.node=e,t.node&&t.rendered();for(var n,o=0,s=t.children;n=s[o];o++)this.claimNode(n,i)}}})})(enyo,this);

// lib/layout/list/source/List.js
(function(t){t.kind({name:"enyo.List",kind:"Scroller",classes:"enyo-list",published:{count:0,rowsPerPage:50,orient:"v",bottomUp:!1,noSelect:!1,multiSelect:!1,toggleSelected:!1,fixedSize:!1,reorderable:!1,centerReorderContainer:!0,reorderComponents:[],pinnedReorderComponents:[],swipeableComponents:[],enableSwipe:!1,persistSwipeableItem:!1},events:{onSetupItem:"",onSetupReorderComponents:"",onSetupPinnedReorderComponents:"",onReorder:"",onSetupSwipeItem:"",onSwipeDrag:"",onSwipe:"",onSwipeComplete:""},handlers:{onAnimateFinish:"animateFinish",onRenderRow:"rowRendered",ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish",onup:"up",onholdpulse:"holdpulse",onflick:"flick"},rowSize:0,listTools:[{name:"port",classes:"enyo-list-port enyo-border-box",components:[{name:"generator",kind:"FlyweightRepeater",canGenerate:!1,components:[{tag:null,name:"client"}]},{name:"holdingarea",allowHtml:!0,classes:"enyo-list-holdingarea"},{name:"page0",allowHtml:!0,classes:"enyo-list-page"},{name:"page1",allowHtml:!0,classes:"enyo-list-page"},{name:"placeholder",classes:"enyo-list-placeholder"},{name:"swipeableComponents",style:"position:absolute; display:block; top:-1000px; left:0;"}]}],reorderHoldTimeMS:600,draggingRowIndex:-1,initHoldCounter:3,holdCounter:3,holding:!1,placeholderRowIndex:-1,dragToScrollThreshold:.1,scrollDistance:0,prevScrollTop:0,autoScrollTimeoutMS:20,autoScrollTimeout:null,autoscrollPageY:0,pinnedReorderMode:!1,initialPinPosition:-1,itemMoved:!1,currentPageNumber:-1,completeReorderTimeout:null,swipeIndex:null,swipeDirection:null,persistentItemVisible:!1,persistentItemOrigin:null,swipeComplete:!1,completeSwipeTimeout:null,completeSwipeDelayMS:500,normalSwipeSpeedMS:200,fastSwipeSpeedMS:100,percentageDraggedThreshold:.2,importProps:t.inherit(function(t){return function(e){e&&e.reorderable&&(this.touch=!0),t.apply(this,arguments)}}),create:t.inherit(function(t){return function(){this.pageSizes=[],this.orientV="v"==this.orient,this.vertical=this.orientV?"default":"hidden",t.apply(this,arguments),this.$.generator.orient=this.orient,this.getStrategy().translateOptimized=!0,this.$.port.addRemoveClass("horizontal",!this.orientV),this.$.port.addRemoveClass("vertical",this.orientV),this.$.page0.addRemoveClass("vertical",this.orientV),this.$.page1.addRemoveClass("vertical",this.orientV),this.bottomUpChanged(),this.noSelectChanged(),this.multiSelectChanged(),this.toggleSelectedChanged(),this.$.generator.setRowOffset(0),this.$.generator.setCount(this.count)}}),initComponents:t.inherit(function(t){return function(){this.createReorderTools(),t.apply(this,arguments),this.createSwipeableComponents()}}),createReorderTools:function(){this.createComponent({name:"reorderContainer",classes:"enyo-list-reorder-container",ondown:"sendToStrategy",ondrag:"sendToStrategy",ondragstart:"sendToStrategy",ondragfinish:"sendToStrategy",onflick:"sendToStrategy"})},createStrategy:t.inherit(function(t){return function(){this.controlParentName="strategy",t.apply(this,arguments),this.createChrome(this.listTools),this.controlParentName="client",this.discoverControlParent()}}),createSwipeableComponents:function(){for(var t=0;this.swipeableComponents.length>t;t++)this.$.swipeableComponents.createComponent(this.swipeableComponents[t],{owner:this.owner})},rendered:t.inherit(function(t){return function(){t.apply(this,arguments),this.$.generator.node=this.$.port.hasNode(),this.$.generator.generated=!0,this.reset()}}),handleResize:t.inherit(function(t){return function(){t.apply(this,arguments),this.refresh()}}),bottomUpChanged:function(){this.$.generator.bottomUp=this.bottomUp,this.$.page0.applyStyle(this.pageBound,null),this.$.page1.applyStyle(this.pageBound,null),this.pageBound=this.orientV?this.bottomUp?"bottom":"top":this.rtl?this.bottomUp?"left":"right":this.bottomUp?"right":"left",!this.orientV&&this.bottomUp&&(this.$.page0.applyStyle("left","auto"),this.$.page1.applyStyle("left","auto")),this.hasNode()&&this.reset()},noSelectChanged:function(){this.$.generator.setNoSelect(this.noSelect)},multiSelectChanged:function(){this.$.generator.setMultiSelect(this.multiSelect)},toggleSelectedChanged:function(){this.$.generator.setToggleSelected(this.toggleSelected)},countChanged:function(){this.hasNode()&&this.updateMetrics()},sendToStrategy:function(t,e){this.$.strategy.dispatchEvent("on"+e.type,e,t)},updateMetrics:function(){this.defaultPageSize=this.rowsPerPage*(this.rowSize||100),this.pageCount=Math.ceil(this.count/this.rowsPerPage),this.portSize=0;for(var t=0;this.pageCount>t;t++)this.portSize+=this.getPageSize(t);this.adjustPortSize()},holdpulse:function(t,e){return this.getReorderable()&&!this.isReordering()?e.holdTime>=this.reorderHoldTimeMS&&this.shouldStartReordering(t,e)?(this.startReordering(e),!1):void 0:void 0},dragstart:function(t,e){return this.isReordering()?!0:this.isSwipeable()?this.swipeDragStart(t,e):void 0},drag:function(t,e){return this.shouldDoReorderDrag(e)?(e.preventDefault(),this.reorderDrag(e),!0):this.isSwipeable()?(e.preventDefault(),this.swipeDrag(t,e),!0):void 0},dragfinish:function(t,e){this.isReordering()?this.finishReordering(t,e):this.isSwipeable()&&this.swipeDragFinish(t,e)},up:function(t,e){this.isReordering()&&this.finishReordering(t,e)},generatePage:function(t,e){this.page=t;var i=this.rowsPerPage*this.page;this.$.generator.setRowOffset(i);var o=Math.min(this.count-i,this.rowsPerPage);this.$.generator.setCount(o);var n=this.$.generator.generateChildHtml();e.setContent(n),this.getReorderable()&&this.draggingRowIndex>-1&&this.hideReorderingRow();var s=e.getBounds(),r=this.orientV?s.height:s.width;if(!this.rowSize&&r>0&&(this.rowSize=Math.floor(r/o),this.updateMetrics()),!this.fixedSize){var h=this.getPageSize(t);h!=r&&r>0&&(this.pageSizes[t]=r,this.portSize+=r-h)}},pageForRow:function(t){return Math.floor(t/this.rowsPerPage)},update:function(t){var e=!1,i=this.positionToPageInfo(t),o=i.pos+this.scrollerSize/2,n=Math.floor(o/Math.max(i.size,this.scrollerSize)+.5)+i.no,s=0===n%2?n:n-1;this.p0!=s&&this.isPageInRange(s)&&(this.removedInitialPage=this.removedInitialPage||this.draggingRowPage==this.p0,this.generatePage(s,this.$.page0),this.positionPage(s,this.$.page0),this.p0=s,e=!0,this.p0RowBounds=this.getPageRowSizes(this.$.page0)),s=0===n%2?Math.max(1,n-1):n,this.p1!=s&&this.isPageInRange(s)&&(this.removedInitialPage=this.removedInitialPage||this.draggingRowPage==this.p1,this.generatePage(s,this.$.page1),this.positionPage(s,this.$.page1),this.p1=s,e=!0,this.p1RowBounds=this.getPageRowSizes(this.$.page1)),e&&(this.$.generator.setRowOffset(0),this.$.generator.setCount(this.count),this.fixedSize||(this.adjustBottomPage(),this.adjustPortSize()))},getPageRowSizes:function(e){for(var i,o,n={},s=e.hasNode().querySelectorAll("div[data-enyo-index]"),r=0;s.length>r;r++)i=s[r].getAttribute("data-enyo-index"),null!==i&&(o=t.dom.getBounds(s[r]),n[parseInt(i,10)]={height:o.height,width:o.width});return n},updateRowBounds:function(t){this.p0RowBounds[t]?this.updateRowBoundsAtIndex(t,this.p0RowBounds,this.$.page0):this.p1RowBounds[t]&&this.updateRowBoundsAtIndex(t,this.p1RowBounds,this.$.page1)},updateRowBoundsAtIndex:function(e,i,o){var n=o.hasNode().querySelector('div[data-enyo-index="'+e+'"]'),s=t.dom.getBounds(n);i[e].height=s.height,i[e].width=s.width},updateForPosition:function(t){this.update(this.calcPos(t))},calcPos:function(t){return this.bottomUp?this.portSize-this.scrollerSize-t:t},adjustBottomPage:function(){var t=this.p0>=this.p1?this.$.page0:this.$.page1;this.positionPage(t.pageNo,t)},adjustPortSize:function(){this.scrollerSize=this.orientV?this.getBounds().height:this.getBounds().width;var t=Math.max(this.scrollerSize,this.portSize);this.$.port.applyStyle(this.orientV?"height":"width",t+"px"),this.orientV||this.$.port.applyStyle("height",this.getBounds().height+"px")},positionPage:function(t,e){e.pageNo=t;var i=this.pageToPosition(t);e.applyStyle(this.pageBound,i+"px")},pageToPosition:function(t){for(var e=0;t>0;)t--,e+=this.getPageSize(t);return e},positionToPageInfo:function(t){for(var e=-1,i=this.calcPos(t),o=this.defaultPageSize;i>=0;)e++,o=this.getPageSize(e),i-=o;return e=Math.max(e,0),{no:e,size:o,pos:i+o,startRow:e*this.rowsPerPage,endRow:Math.min((e+1)*this.rowsPerPage-1,this.count-1)}},isPageInRange:function(t){return t==Math.max(0,Math.min(this.pageCount-1,t))},getPageSize:function(t){var e=this.pageSizes[t];if(!e){var i=this.rowsPerPage*t,o=Math.min(this.count-i,this.rowsPerPage);e=this.defaultPageSize*(o/this.rowsPerPage)}return Math.max(1,e)},invalidatePages:function(){this.p0=this.p1=null,this.p0RowBounds={},this.p1RowBounds={},this.$.page0.setContent(""),this.$.page1.setContent("")},invalidateMetrics:function(){this.pageSizes=[],this.rowSize=0,this.updateMetrics()},scroll:t.inherit(function(t){return function(e,i){var o=t.apply(this,arguments),n=this.orientV?this.getScrollTop():this.getScrollLeft();return this.lastPos===n?o:(this.lastPos=n,this.update(n),this.pinnedReorderMode&&this.reorderScroll(e,i),o)}}),setScrollTop:t.inherit(function(t){return function(e){this.update(e),t.apply(this,arguments),this.twiddle()}}),getScrollPosition:function(){return this.calcPos(this[this.orientV?"getScrollTop":"getScrollLeft"]())},setScrollPosition:function(t){this[this.orientV?"setScrollTop":"setScrollLeft"](this.calcPos(t))},scrollToBottom:t.inherit(function(t){return function(){this.update(this.getScrollBounds().maxTop),t.apply(this,arguments)}}),scrollToRow:function(t){var e=this.pageForRow(t),i=this.pageToPosition(e);if(this.updateForPosition(i),i=this.pageToPosition(e),this.setScrollPosition(i),e==this.p0||e==this.p1){var o=this.$.generator.fetchRowNode(t);if(o){var n=this.orientV?o.offsetTop:o.offsetLeft;this.bottomUp&&(n=this.getPageSize(e)-(this.orientV?o.offsetHeight:o.offsetWidth)-n);var s=this.getScrollPosition()+n;this.setScrollPosition(s)}}},scrollToStart:function(){this[this.bottomUp?this.orientV?"scrollToBottom":"scrollToRight":"scrollToTop"]()},scrollToEnd:function(){this[this.bottomUp?this.orientV?"scrollToTop":"scrollToLeft":this.orientV?"scrollToBottom":"scrollToRight"]()},refresh:function(){this.invalidatePages(),this.update(this[this.orientV?"getScrollTop":"getScrollLeft"]()),this.stabilize(),4===t.platform.android&&this.twiddle()},reset:function(){this.getSelection().clear(),this.invalidateMetrics(),this.invalidatePages(),this.stabilize(),this.scrollToStart()},getSelection:function(){return this.$.generator.getSelection()},select:function(t,e){return this.getSelection().select(t,e)},deselect:function(t){return this.getSelection().deselect(t)},isSelected:function(t){return this.$.generator.isSelected(t)},renderRow:function(t){this.$.generator.renderRow(t)},rowRendered:function(t,e){this.updateRowBounds(e.rowIndex)},prepareRow:function(t){this.$.generator.prepareRow(t)},lockRow:function(){this.$.generator.lockRow()},performOnRow:function(t,e,i){this.$.generator.performOnRow(t,e,i)},animateFinish:function(){return this.twiddle(),!0},twiddle:function(){var e=this.getStrategy();t.call(e,"twiddle")},pageForPageNumber:function(t,e){return 0===t%2?e&&t!==this.p0?null:this.$.page0:e&&t!==this.p1?null:this.$.page1},shouldStartReordering:function(t,e){return!this.getReorderable()||null==e.rowIndex||0>e.rowIndex||this.pinnedReorderMode||null==e.index||0>e.index?!1:!0},startReordering:function(t){this.$.strategy.listReordering=!0,this.buildReorderContainer(),this.doSetupReorderComponents({index:t.index}),this.styleReorderContainer(t),this.draggingRowIndex=this.placeholderRowIndex=t.rowIndex,this.draggingRowPage=this.pageForRow(this.draggingRowIndex),this.removeDraggingRowNode=t.dispatchTarget.retainNode(t.target),this.removedInitialPage=!1,this.itemMoved=!1,this.initialPageNumber=this.currentPageNumber=this.pageForRow(t.rowIndex),this.prevScrollTop=this.getScrollTop(),this.replaceNodeWithPlaceholder(t.rowIndex)},buildReorderContainer:function(){this.$.reorderContainer.destroyClientControls();for(var t=0;this.reorderComponents.length>t;t++)this.$.reorderContainer.createComponent(this.reorderComponents[t],{owner:this.owner});this.$.reorderContainer.render()},styleReorderContainer:function(t){this.setItemPosition(this.$.reorderContainer,t.rowIndex),this.setItemBounds(this.$.reorderContainer,t.rowIndex),this.$.reorderContainer.setShowing(!0),this.centerReorderContainer&&this.centerReorderContainerOnPointer(t)},appendNodeToReorderContainer:function(t){this.$.reorderContainer.createComponent({allowHtml:!0,content:t.innerHTML}).render()},centerReorderContainerOnPointer:function(e){var i=t.dom.calcNodePosition(this.hasNode()),o=this.$.reorderContainer.getBounds(),n=e.pageX-i.left-parseInt(o.width,10)/2,s=e.pageY-i.top+this.getScrollTop()-parseInt(o.height,10)/2;"ScrollStrategy"!=this.getStrategyKind()&&(n-=this.getScrollLeft(),s-=this.getScrollTop()),this.positionReorderContainer(n,s)},positionReorderContainer:function(t,e){this.$.reorderContainer.addClass("enyo-animatedTopAndLeft"),this.$.reorderContainer.addStyles("left:"+t+"px;top:"+e+"px;"),this.setPositionReorderContainerTimeout()},setPositionReorderContainerTimeout:function(){this.clearPositionReorderContainerTimeout(),this.positionReorderContainerTimeout=setTimeout(this.bindSafely(function(){this.$.reorderContainer.removeClass("enyo-animatedTopAndLeft"),this.clearPositionReorderContainerTimeout()}),100)},clearPositionReorderContainerTimeout:function(){this.positionReorderContainerTimeout&&(clearTimeout(this.positionReorderContainerTimeout),this.positionReorderContainerTimeout=null)},shouldDoReorderDrag:function(){return!this.getReorderable()||0>this.draggingRowIndex||this.pinnedReorderMode?!1:!0},reorderDrag:function(t){this.positionReorderNode(t),this.checkForAutoScroll(t),this.updatePlaceholderPosition(t.pageY)},updatePlaceholderPosition:function(t){var e=this.getRowIndexFromCoordinate(t);-1!==e&&(e>=this.placeholderRowIndex?this.movePlaceholderToIndex(Math.min(this.count,e+1)):this.movePlaceholderToIndex(e))},positionReorderNode:function(t){var e=this.$.reorderContainer.getBounds(),i=e.left+t.ddx,o=e.top+t.ddy;o="ScrollStrategy"==this.getStrategyKind()?o+(this.getScrollTop()-this.prevScrollTop):o,this.$.reorderContainer.addStyles("top: "+o+"px ; left: "+i+"px"),this.prevScrollTop=this.getScrollTop()},checkForAutoScroll:function(e){var i,o=t.dom.calcNodePosition(this.hasNode()),n=this.getBounds();this.autoscrollPageY=e.pageY,e.pageY-o.top<n.height*this.dragToScrollThreshold?(i=100*(1-(e.pageY-o.top)/(n.height*this.dragToScrollThreshold)),this.scrollDistance=-1*i):e.pageY-o.top>n.height*(1-this.dragToScrollThreshold)?(i=100*((e.pageY-o.top-n.height*(1-this.dragToScrollThreshold))/(n.height-n.height*(1-this.dragToScrollThreshold))),this.scrollDistance=1*i):this.scrollDistance=0,0===this.scrollDistance?this.stopAutoScrolling():this.autoScrollTimeout||this.startAutoScrolling()},stopAutoScrolling:function(){this.autoScrollTimeout&&(clearTimeout(this.autoScrollTimeout),this.autoScrollTimeout=null)},startAutoScrolling:function(){this.autoScrollTimeout=setInterval(this.bindSafely(this.autoScroll),this.autoScrollTimeoutMS)},autoScroll:function(){0===this.scrollDistance?this.stopAutoScrolling():this.autoScrollTimeout||this.startAutoScrolling(),this.setScrollPosition(this.getScrollPosition()+this.scrollDistance),this.positionReorderNode({ddx:0,ddy:0}),this.updatePlaceholderPosition(this.autoscrollPageY)},movePlaceholderToIndex:function(t){var e,i;if(!(0>t)){t>=this.count?(e=null,i=this.pageForPageNumber(this.pageForRow(this.count-1)).hasNode()):(e=this.$.generator.fetchRowNode(t),i=e.parentNode);var o=this.pageForRow(t);o>=this.pageCount&&(o=this.currentPageNumber),i.insertBefore(this.placeholderNode,e),this.currentPageNumber!==o&&(this.updatePageSize(this.currentPageNumber),this.updatePageSize(o),this.updatePagePositions(o)),this.placeholderRowIndex=t,this.currentPageNumber=o,this.itemMoved=!0}},finishReordering:function(t,e){return!this.isReordering()||this.pinnedReorderMode||this.completeReorderTimeout?void 0:(this.stopAutoScrolling(),this.$.strategy.listReordering=!1,this.moveReorderedContainerToDroppedPosition(e),this.completeReorderTimeout=setTimeout(this.bindSafely(this.completeFinishReordering,e),100),e.preventDefault(),!0)},moveReorderedContainerToDroppedPosition:function(){var t=this.getRelativeOffset(this.placeholderNode,this.hasNode()),e="ScrollStrategy"==this.getStrategyKind()?t.top:t.top-this.getScrollTop(),i=t.left-this.getScrollLeft();this.positionReorderContainer(i,e)},completeFinishReordering:function(t){return this.completeReorderTimeout=null,this.placeholderRowIndex>this.draggingRowIndex&&(this.placeholderRowIndex=Math.max(0,this.placeholderRowIndex-1)),this.draggingRowIndex!=this.placeholderRowIndex||!this.pinnedReorderComponents.length||this.pinnedReorderMode||this.itemMoved?(this.removeDraggingRowNode(),this.removePlaceholderNode(),this.emptyAndHideReorderContainer(),this.pinnedReorderMode=!1,this.reorderRows(t),this.draggingRowIndex=this.placeholderRowIndex=-1,this.refresh(),void 0):(this.beginPinnedReorder(t),void 0)},beginPinnedReorder:function(e){this.buildPinnedReorderContainer(),this.doSetupPinnedReorderComponents(t.mixin(e,{index:this.draggingRowIndex})),this.pinnedReorderMode=!0,this.initialPinPosition=e.pageY},emptyAndHideReorderContainer:function(){this.$.reorderContainer.destroyComponents(),this.$.reorderContainer.setShowing(!1)},buildPinnedReorderContainer:function(){this.$.reorderContainer.destroyClientControls();for(var t=0;this.pinnedReorderComponents.length>t;t++)this.$.reorderContainer.createComponent(this.pinnedReorderComponents[t],{owner:this.owner});this.$.reorderContainer.render()},reorderRows:function(t){this.doReorder(this.makeReorderEvent(t)),this.positionReorderedNode(),this.updateListIndices()},makeReorderEvent:function(t){return t.reorderFrom=this.draggingRowIndex,t.reorderTo=this.placeholderRowIndex,t},positionReorderedNode:function(){if(!this.removedInitialPage){var t=this.$.generator.fetchRowNode(this.placeholderRowIndex);if(t&&(t.parentNode.insertBefore(this.hiddenNode,t),this.showNode(this.hiddenNode)),this.hiddenNode=null,this.currentPageNumber!=this.initialPageNumber){var e,i,o=this.pageForPageNumber(this.currentPageNumber),n=this.pageForPageNumber(this.currentPageNumber+1);this.initialPageNumber<this.currentPageNumber?(e=o.hasNode().firstChild,n.hasNode().appendChild(e)):(e=o.hasNode().lastChild,i=n.hasNode().firstChild,n.hasNode().insertBefore(e,i)),this.correctPageSizes(),this.updatePagePositions(this.initialPageNumber)}}},updateListIndices:function(){if(this.shouldDoRefresh())return this.refresh(),this.correctPageSizes(),void 0;var t,e,i,o,n=Math.min(this.draggingRowIndex,this.placeholderRowIndex),s=Math.max(this.draggingRowIndex,this.placeholderRowIndex),r=this.draggingRowIndex-this.placeholderRowIndex>0?1:-1;if(1===r){for(t=this.$.generator.fetchRowNode(this.draggingRowIndex),t&&t.setAttribute("data-enyo-index","reordered"),e=s-1,i=s;e>=n;e--)t=this.$.generator.fetchRowNode(e),t&&(o=parseInt(t.getAttribute("data-enyo-index"),10),i=o+1,t.setAttribute("data-enyo-index",i));t=this.hasNode().querySelector('[data-enyo-index="reordered"]'),t.setAttribute("data-enyo-index",this.placeholderRowIndex)}else for(t=this.$.generator.fetchRowNode(this.draggingRowIndex),t&&t.setAttribute("data-enyo-index",this.placeholderRowIndex),e=n+1,i=n;s>=e;e++)t=this.$.generator.fetchRowNode(e),t&&(o=parseInt(t.getAttribute("data-enyo-index"),10),i=o-1,t.setAttribute("data-enyo-index",i))},shouldDoRefresh:function(){return Math.abs(this.initialPageNumber-this.currentPageNumber)>1},getNodeStyle:function(e){var i=this.$.generator.fetchRowNode(e);if(i){var o=this.getRelativeOffset(i,this.hasNode()),n=t.dom.getBounds(i);return{h:n.height,w:n.width,left:o.left,top:o.top}}},getRelativeOffset:function(t,e){var i={top:0,left:0};if(t!==e&&t.parentNode)do i.top+=t.offsetTop||0,i.left+=t.offsetLeft||0,t=t.offsetParent;while(t&&t!==e);return i},replaceNodeWithPlaceholder:function(e){var i=this.$.generator.fetchRowNode(e);if(!i)return t.log("No node - "+e),void 0;this.placeholderNode=this.createPlaceholderNode(i),this.hiddenNode=this.hideNode(i);var o=this.pageForPageNumber(this.currentPageNumber);o.hasNode().insertBefore(this.placeholderNode,this.hiddenNode)},createPlaceholderNode:function(e){var i=this.$.placeholder.hasNode().cloneNode(!0),o=t.dom.getBounds(e);return i.style.height=o.height+"px",i.style.width=o.width+"px",i},removePlaceholderNode:function(){this.removeNode(this.placeholderNode),this.placeholderNode=null},removeNode:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},updatePageSize:function(t){if(!(0>t)){var e=this.pageForPageNumber(t,!0);if(e){var i=this.pageSizes[t],o=Math.max(1,e.getBounds().height);this.pageSizes[t]=o,this.portSize+=o-i}}},updatePagePositions:function(t){this.positionPage(this.currentPageNumber,this.pageForPageNumber(this.currentPageNumber)),this.positionPage(t,this.pageForPageNumber(t))},correctPageSizes:function(){var t=this.initialPageNumber%2;this.updatePageSize(this.currentPageNumber,this.$["page"+this.currentPage]),t!=this.currentPageNumber&&this.updatePageSize(this.initialPageNumber,this.$["page"+t])},hideNode:function(t){return t.style.display="none",t},showNode:function(t){return t.style.display="block",t},dropPinnedRow:function(t){this.moveReorderedContainerToDroppedPosition(t),this.completeReorderTimeout=setTimeout(this.bindSafely(this.completeFinishReordering,t),100)},cancelPinnedMode:function(t){this.placeholderRowIndex=this.draggingRowIndex,this.dropPinnedRow(t)},getRowIndexFromCoordinate:function(e){var i=this.getScrollTop()+e-t.dom.calcNodePosition(this.hasNode()).top;if(0>i)return-1;var o=this.positionToPageInfo(i),n=o.no==this.p0?this.p0RowBounds:this.p1RowBounds;if(!n)return this.count;for(var s=o.pos,r=this.placeholderNode?t.dom.getBounds(this.placeholderNode).height:0,h=0,a=o.startRow;o.endRow>=a;++a){if(a===this.placeholderRowIndex&&(h+=r,h>=s))return-1;if(a!==this.draggingRowIndex&&(h+=n[a].height,h>=s))return a}return a},getIndexPosition:function(e){return t.dom.calcNodePosition(this.$.generator.fetchRowNode(e))},setItemPosition:function(t,e){var i=this.getNodeStyle(e),o="ScrollStrategy"==this.getStrategyKind()?i.top:i.top-this.getScrollTop(),n="top:"+o+"px; left:"+i.left+"px;";t.addStyles(n)},setItemBounds:function(t,e){var i=this.getNodeStyle(e),o="width:"+i.w+"px; height:"+i.h+"px;";t.addStyles(o)},reorderScroll:function(){"ScrollStrategy"==this.getStrategyKind()&&this.$.reorderContainer.addStyles("top:"+(this.initialPinPosition+this.getScrollTop()-this.rowSize)+"px;"),this.updatePlaceholderPosition(this.initialPinPosition)},hideReorderingRow:function(){var t=this.hasNode().querySelector('[data-enyo-index="'+this.draggingRowIndex+'"]');t&&(this.hiddenNode=this.hideNode(t))},isReordering:function(){return this.draggingRowIndex>-1},isSwiping:function(){return null!=this.swipeIndex&&!this.swipeComplete&&null!=this.swipeDirection},swipeDragStart:function(t,e){return null==e.index||e.vertical?!0:(this.completeSwipeTimeout&&this.completeSwipe(e),this.swipeComplete=!1,this.swipeIndex!=e.index&&(this.clearSwipeables(),this.swipeIndex=e.index),this.swipeDirection=e.xDirection,this.persistentItemVisible||this.startSwipe(e),this.draggedXDistance=0,this.draggedYDistance=0,!0)},swipeDrag:function(t,e){return this.persistentItemVisible?(this.dragPersistentItem(e),this.preventDragPropagation):this.isSwiping()?(this.dragSwipeableComponents(this.calcNewDragPosition(e.ddx)),this.draggedXDistance=e.dx,this.draggedYDistance=e.dy,e.xDirection!=this.lastSwipeDirection&&e.xDirection&&(this.lastSwipeDirection=e.xDirection),!0):!1},swipeDragFinish:function(t,e){if(this.persistentItemVisible)this.dragFinishPersistentItem(e);else{if(!this.isSwiping())return!1;var i=this.calcPercentageDragged(this.draggedXDistance);i>this.percentageDraggedThreshold&&this.lastSwipeDirection===this.swipeDirection?this.swipe(this.fastSwipeSpeedMS):this.backOutSwipe(e)}return this.preventDragPropagation},isSwipeable:function(){return this.enableSwipe&&0!==this.$.swipeableComponents.controls.length&&!this.isReordering()&&!this.pinnedReorderMode},positionSwipeableContainer:function(e,i){var o=this.$.generator.fetchRowNode(e);if(o){var n=this.getRelativeOffset(o,this.hasNode()),s=t.dom.getBounds(o),r=1==i?-1*s.width:s.width;this.$.swipeableComponents.addStyles("top: "+n.top+"px; left: "+r+"px; height: "+s.height+"px; width: "+s.width+"px;")}},calcNewDragPosition:function(t){var e=this.$.swipeableComponents.getBounds(),i=e.left,o=this.$.swipeableComponents.getBounds(),n=1==this.swipeDirection?0:-1*o.width,s=1==this.swipeDirection?i+t>n?n:i+t:n>i+t?n:i+t;return s},dragSwipeableComponents:function(t){this.$.swipeableComponents.applyStyle("left",t+"px")},startSwipe:function(t){t.index=this.swipeIndex,this.positionSwipeableContainer(this.swipeIndex,t.xDirection),this.$.swipeableComponents.setShowing(!0),this.setPersistentItemOrigin(t.xDirection),this.doSetupSwipeItem(t)},dragPersistentItem:function(t){var e=0,i="right"==this.persistentItemOrigin?Math.max(e,e+t.dx):Math.min(e,e+t.dx);this.$.swipeableComponents.applyStyle("left",i+"px")},dragFinishPersistentItem:function(t){var e=this.calcPercentageDragged(t.dx)>.2,i=t.dx>0?"right":0>t.dx?"left":null;this.persistentItemOrigin==i?e?this.slideAwayItem():this.bounceItem(t):this.bounceItem(t)},setPersistentItemOrigin:function(t){this.persistentItemOrigin=1==t?"left":"right"},calcPercentageDragged:function(t){return Math.abs(t/this.$.swipeableComponents.getBounds().width)},swipe:function(t){this.swipeComplete=!0,this.animateSwipe(0,t)},backOutSwipe:function(){var t=this.$.swipeableComponents.getBounds(),e=1==this.swipeDirection?-1*t.width:t.width;this.animateSwipe(e,this.fastSwipeSpeedMS),this.swipeDirection=null},bounceItem:function(){var t=this.$.swipeableComponents.getBounds();t.left!=t.width&&this.animateSwipe(0,this.normalSwipeSpeedMS)},slideAwayItem:function(){var t=this.$.swipeableComponents,e=t.getBounds().width,i="left"==this.persistentItemOrigin?-1*e:e;this.animateSwipe(i,this.normalSwipeSpeedMS),this.persistentItemVisible=!1,this.setPersistSwipeableItem(!1)},clearSwipeables:function(){this.$.swipeableComponents.setShowing(!1),this.persistentItemVisible=!1,this.setPersistSwipeableItem(!1)},completeSwipe:function(){this.completeSwipeTimeout&&(clearTimeout(this.completeSwipeTimeout),this.completeSwipeTimeout=null),this.getPersistSwipeableItem()?this.swipeComplete&&(this.persistentItemVisible=!0):(this.$.swipeableComponents.setShowing(!1),this.swipeComplete&&this.doSwipeComplete({index:this.swipeIndex,xDirection:this.swipeDirection})),this.swipeIndex=null,this.swipeDirection=null},animateSwipe:function(e,i){var o=t.now(),n=this.$.swipeableComponents,s=parseInt(n.getBounds().left,10),r=e-s;this.stopAnimateSwipe();var h=this.bindSafely(function(){var e=t.now()-o,a=e/i,l=s+r*Math.min(a,1);n.applyStyle("left",l+"px"),this.job=t.requestAnimationFrame(h),e/i>=1&&(this.stopAnimateSwipe(),this.completeSwipeTimeout=setTimeout(this.bindSafely(function(){this.completeSwipe()}),this.completeSwipeDelayMS))});this.job=t.requestAnimationFrame(h)},stopAnimateSwipe:function(){this.job&&(this.job=t.cancelRequestAnimationFrame(this.job))}})})(enyo,this);

// lib/layout/list/source/PulldownList.js
(function(t){t.kind({name:"enyo.PulldownList",kind:"List",touch:!0,pully:null,pulldownTools:[{name:"pulldown",classes:"enyo-list-pulldown",components:[{name:"puller",kind:"Puller"}]}],events:{onPullStart:"",onPullCancel:"",onPull:"",onPullRelease:"",onPullComplete:""},handlers:{onScrollStart:"scrollStartHandler",onScrollStop:"scrollStopHandler",ondragfinish:"dragfinish"},pullingMessage:"Pull down to refresh...",pulledMessage:"Release to refresh...",loadingMessage:"Loading...",pullingIconClass:"enyo-puller-arrow enyo-puller-arrow-down",pulledIconClass:"enyo-puller-arrow enyo-puller-arrow-up",loadingIconClass:"",create:t.inherit(function(t){return function(){var e={kind:"Puller",showing:!1,text:this.loadingMessage,iconClass:this.loadingIconClass,onCreate:"setPully"};this.listTools.splice(0,0,e),t.apply(this,arguments),this.setPulling()}}),initComponents:t.inherit(function(e){return function(){this.createChrome(this.pulldownTools),this.accel=t.dom.canAccelerate(),this.translation=this.accel?"translate3d":"translate",this.strategyKind=this.resetStrategyKind(),e.apply(this,arguments)}}),resetStrategyKind:function(){return t.platform.android>=3?"TranslateScrollStrategy":"TouchScrollStrategy"},setPully:function(t,e){this.pully=e.originator},scrollStartHandler:function(){this.firedPullStart=!1,this.firedPull=!1,this.firedPullCancel=!1},scroll:t.inherit(function(e){return function(){var i=e.apply(this,arguments);this.completingPull&&this.pully.setShowing(!1);var o=this.getStrategy().$.scrollMath||this.getStrategy(),n=-1*this.getScrollTop();return o.isInOverScroll()&&n>0&&(t.dom.transformValue(this.$.pulldown,this.translation,"0,"+n+"px"+(this.accel?",0":"")),this.firedPullStart||(this.firedPullStart=!0,this.pullStart(),this.pullHeight=this.$.pulldown.getBounds().height),n>this.pullHeight&&!this.firedPull&&(this.firedPull=!0,this.firedPullCancel=!1,this.pull()),this.firedPull&&!this.firedPullCancel&&this.pullHeight>n&&(this.firedPullCancel=!0,this.firedPull=!1,this.pullCancel())),i}}),scrollStopHandler:function(){this.completingPull&&(this.completingPull=!1,this.doPullComplete())},dragfinish:function(){if(this.firedPull){var t=this.getStrategy().$.scrollMath||this.getStrategy();t.setScrollY(-1*this.getScrollTop()-this.pullHeight),this.pullRelease()}},completePull:function(){this.completingPull=!0;var t=this.getStrategy().$.scrollMath||this.getStrategy();t.setScrollY(this.pullHeight),t.start()},pullStart:function(){this.setPulling(),this.pully.setShowing(!1),this.$.puller.setShowing(!0),this.doPullStart()},pull:function(){this.setPulled(),this.doPull()},pullCancel:function(){this.setPulling(),this.doPullCancel()},pullRelease:function(){this.$.puller.setShowing(!1),this.pully.setShowing(!0),this.doPullRelease()},setPulling:function(){this.$.puller.setText(this.pullingMessage),this.$.puller.setIconClass(this.pullingIconClass)},setPulled:function(){this.$.puller.setText(this.pulledMessage),this.$.puller.setIconClass(this.pulledIconClass)}}),t.kind({name:"enyo.Puller",kind:"enyo.Control",classes:"enyo-puller",published:{text:"",iconClass:""},events:{onCreate:""},components:[{name:"icon"},{name:"text",tag:"span",classes:"enyo-puller-text"}],create:t.inherit(function(t){return function(){t.apply(this,arguments),this.doCreate(),this.textChanged(),this.iconClassChanged()}}),textChanged:function(){this.$.text.setContent(this.text)},iconClassChanged:function(){this.$.icon.setClasses(this.iconClass)}})})(enyo,this);

// lib/layout/list/source/AroundList.js
(function(t){t.kind({name:"enyo.AroundList",kind:"enyo.List",listTools:[{name:"port",classes:"enyo-list-port enyo-border-box",components:[{name:"aboveClient"},{name:"generator",kind:"FlyweightRepeater",canGenerate:!1,components:[{tag:null,name:"client"}]},{name:"holdingarea",allowHtml:!0,classes:"enyo-list-holdingarea"},{name:"page0",allowHtml:!0,classes:"enyo-list-page"},{name:"page1",allowHtml:!0,classes:"enyo-list-page"},{name:"belowClient"},{name:"placeholder"},{name:"swipeableComponents",style:"position:absolute; display:block; top:-1000px; left:0px;"}]}],aboveComponents:null,belowComponents:null,initComponents:t.inherit(function(t){return function(){t.apply(this,arguments),this.aboveComponents&&this.$.aboveClient.createComponents(this.aboveComponents,{owner:this.owner}),this.belowComponents&&this.$.belowClient.createComponents(this.belowComponents,{owner:this.owner})}}),updateMetrics:function(){this.defaultPageSize=this.rowsPerPage*(this.rowSize||100),this.pageCount=Math.ceil(this.count/this.rowsPerPage),this.aboveHeight=this.$.aboveClient.getBounds().height,this.belowHeight=this.$.belowClient.getBounds().height,this.portSize=this.aboveHeight+this.belowHeight;for(var t=0;this.pageCount>t;t++)this.portSize+=this.getPageSize(t);this.adjustPortSize()},positionPage:function(t,e){e.pageNo=t;var i=this.pageToPosition(t),o=this.bottomUp?this.belowHeight:this.aboveHeight;i+=o,e.applyStyle(this.pageBound,i+"px")},scrollToContentStart:function(){var t=this.bottomUp?this.belowHeight:this.aboveHeight;this.setScrollPosition(t)}})})(enyo,this);

// lib/layout/list/source/GridListImageItem.js
(function(t){t.kind({name:"enyo.GridListImageItem",classes:"enyo-gridlist-imageitem",components:[{name:"image",kind:"enyo.Image",classes:"image"},{name:"caption",classes:"caption"},{name:"subCaption",classes:"sub-caption"}],published:{source:"",caption:"",subCaption:"",selected:!1,centered:!0,imageSizing:"",useCaption:!0,useSubCaption:!0},bindings:[{from:".source",to:".$.image.src"},{from:".caption",to:".$.caption.content"},{from:".caption",to:".$.caption.showing",kind:"enyo.EmptyBinding"},{from:".subCaption",to:".$.subCaption.content"},{from:".subCaption",to:".$.subCaption.showing",kind:"enyo.EmptyBinding"}],create:t.inherit(function(t){return function(){t.apply(this,arguments),this.selectedChanged(),this.imageSizingChanged(),this.centeredChanged()}}),selectedChanged:function(){this.addRemoveClass("selected",this.selected)},disabledChanged:function(){this.addRemoveClass("disabled",this.disabled)},imageSizingChanged:function(){this.$.image.setSizing(this.imageSizing),this.addRemoveClass("sized-image",!!this.imageSizing),this.imageSizing&&(this.useCaptionChanged(),this.useSubCaptionChanged())},useCaptionChanged:function(){this.addRemoveClass("use-caption",this.useCaption)},useSubCaptionChanged:function(){this.addRemoveClass("use-subcaption",this.useSubCaption)},centeredChanged:function(){this.addRemoveClass("centered",this.centered)}})})(enyo,this);

// lib/layout/slideable/source/Slideable.js
(function(t){t.kind({name:"enyo.Slideable",kind:"Control",published:{axis:"h",value:0,unit:"px",min:0,max:0,accelerated:"auto",overMoving:!0,draggable:!0},events:{onAnimateFinish:"",onChange:""},preventDragPropagation:!1,tools:[{kind:"Animator",onStep:"animatorStep",onEnd:"animatorComplete"}],handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish"},kDragScalar:1,dragEventProp:"dx",unitModifier:!1,canTransform:!1,dragMoveProp:"dx",shouldDragProp:"horizontal",transform:"translateX",dimension:"width",boundary:"left",create:t.inherit(function(t){return function(){t.apply(this,arguments),this.acceleratedChanged(),this.transformChanged(),this.axisChanged(),this.valueChanged(),this.addClass("enyo-slideable")}}),initComponents:t.inherit(function(t){return function(){this.createComponents(this.tools),t.apply(this,arguments)}}),rendered:t.inherit(function(t){return function(){t.apply(this,arguments),this.canModifyUnit(),this.updateDragScalar()}}),handleResize:t.inherit(function(t){return function(){t.apply(this,arguments),this.updateDragScalar()}}),canModifyUnit:function(){if(!this.canTransform){var t=this.getInitialStyleValue(this.hasNode(),this.boundary);t.match(/px/i)&&"%"===this.unit&&(this.unitModifier=this.getBounds()[this.dimension])}},getInitialStyleValue:function(e,i){var o=t.dom.getComputedStyle(e);return o?o.getPropertyValue(i):e&&e.currentStyle?e.currentStyle[i]:"0"},updateBounds:function(t,e){var i={};i[this.boundary]=t,this.setBounds(i,this.unit),this.setInlineStyles(t,e)},updateDragScalar:function(){if("%"==this.unit){var t=this.getBounds()[this.dimension];this.kDragScalar=t?100/t:1,this.canTransform||this.updateBounds(this.value,100)}},transformChanged:function(){this.canTransform=t.dom.canTransform()},acceleratedChanged:function(){(!t.platform.android||2>=t.platform.android)&&t.dom.accelerate(this,this.accelerated)},axisChanged:function(){var t="h"==this.axis;this.dragMoveProp=t?"dx":"dy",this.shouldDragProp=t?"horizontal":"vertical",this.transform=t?"translateX":"translateY",this.dimension=t?"width":"height",this.boundary=t?"left":"top"},setInlineStyles:function(t,e){var i={};this.unitModifier?(i[this.boundary]=this.percentToPixels(t,this.unitModifier),i[this.dimension]=this.unitModifier,this.setBounds(i)):(e?i[this.dimension]=e:i[this.boundary]=t,this.setBounds(i,this.unit))},valueChanged:function(e){var i=this.value;this.isOob(i)&&!this.isAnimating()&&(this.value=this.overMoving?this.dampValue(i):this.clampValue(i)),t.platform.android>2&&(this.value?(0===e||void 0===e)&&t.dom.accelerate(this,this.accelerated):t.dom.accelerate(this,!1)),this.canTransform?t.dom.transformValue(this,this.transform,this.value+this.unit):this.setInlineStyles(this.value,!1),this.doChange()},getAnimator:function(){return this.$.animator},isAtMin:function(){return this.value<=this.calcMin()},isAtMax:function(){return this.value>=this.calcMax()},calcMin:function(){return this.min},calcMax:function(){return this.max},clampValue:function(t){var e=this.calcMin(),i=this.calcMax();return Math.max(e,Math.min(t,i))},dampValue:function(t){return this.dampBound(this.dampBound(t,this.min,1),this.max,-1)},dampBound:function(t,e,i){var o=t;return e*i>o*i&&(o=e+(o-e)/4),o},percentToPixels:function(t,e){return Math.floor(e/100*t)},pixelsToPercent:function(t){var e=this.unitModifier?this.getBounds()[this.dimension]:this.container.getBounds()[this.dimension];return 100*(t/e)},shouldDrag:function(t){return this.draggable&&t[this.shouldDragProp]},isOob:function(t){return t>this.calcMax()||this.calcMin()>t},dragstart:function(t,e){return this.shouldDrag(e)?(e.preventDefault(),this.$.animator.stop(),e.dragInfo={},this.dragging=!0,this.drag0=this.value,this.dragd0=0,this.preventDragPropagation):void 0},drag:function(t,e){if(this.dragging){e.preventDefault();var i=this.canTransform?e[this.dragMoveProp]*this.kDragScalar:this.pixelsToPercent(e[this.dragMoveProp]),o=this.drag0+i,n=i-this.dragd0;return this.dragd0=i,n&&(e.dragInfo.minimizing=0>n),this.setValue(o),this.preventDragPropagation}},dragfinish:function(t,e){return this.dragging?(this.dragging=!1,this.completeDrag(e),e.preventTap(),this.preventDragPropagation):void 0},completeDrag:function(t){this.value!==this.calcMax()&&this.value!=this.calcMin()&&this.animateToMinMax(t.dragInfo.minimizing)},isAnimating:function(){return this.$.animator.isAnimating()},play:function(t,e){this.$.animator.play({startValue:t,endValue:e,node:this.hasNode()})},animateTo:function(t){this.play(this.value,t)},animateToMin:function(){this.animateTo(this.calcMin())},animateToMax:function(){this.animateTo(this.calcMax())},animateToMinMax:function(t){t?this.animateToMin():this.animateToMax()},animatorStep:function(t){return this.setValue(t.value),!0},animatorComplete:function(t){return this.doAnimateFinish(t),!0},toggleMinMax:function(){this.animateToMinMax(!this.isAtMin())}})})(enyo,this);

// lib/layout/panels/source/arrangers/Arranger.js
(function(t){t.kind({name:"enyo.Arranger",kind:"Layout",layoutClass:"enyo-arranger",accelerated:"auto",dragProp:"ddx",dragDirectionProp:"xDirection",canDragProp:"horizontal",incrementalPoints:!1,destroy:t.inherit(function(t){return function(){for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)e._arranger=null;t.apply(this,arguments)}}),arrange:function(){},size:function(){},start:function(){var t=this.container.fromIndex,e=this.container.toIndex,i=this.container.transitionPoints=[t];if(this.incrementalPoints)for(var n=Math.abs(e-t)-2,o=t;n>=0;)o+=t>e?-1:1,i.push(o),n--;i.push(this.container.toIndex)},finish:function(){},calcArrangementDifference:function(){},canDragEvent:function(t){return t[this.canDragProp]},calcDragDirection:function(t){return t[this.dragDirectionProp]},calcDrag:function(t){return t[this.dragProp]},drag:function(t,e,i,n,o){var s=this.measureArrangementDelta(-t,e,i,n,o);return s},measureArrangementDelta:function(t,e,i,n,o){var s=this.calcArrangementDifference(e,i,n,o),r=s?t/Math.abs(s):0;return r*=this.container.fromIndex>this.container.toIndex?-1:1},_arrange:function(t){this.containerBounds||this.reflow();var e=this.getOrderedControls(t);this.arrange(e,t)},arrangeControl:function(e,i){e._arranger=t.mixin(e._arranger||{},i)},flow:function(){this.c$=[].concat(this.container.getPanels()),this.controlsIndex=0;for(var e,i=0,n=this.container.getPanels();e=n[i];i++)if(t.dom.accelerate(e,!e.preventAccelerate&&this.accelerated),t.platform.safari)for(var o,s=e.children,r=0;o=s[r];r++)t.dom.accelerate(o,this.accelerated)},reflow:function(){var t=this.container.hasNode();this.containerBounds=t?{width:t.clientWidth,height:t.clientHeight}:{},this.size()},flowArrangement:function(){var t=this.container.arrangement;if(t)for(var e,i=0,n=this.container.getPanels();(e=n[i])&&t[i];i++)this.flowControl(e,t[i])},flowControl:function(e,i){t.Arranger.positionControl(e,i);var n=i.opacity;null!=n&&t.Arranger.opacifyControl(e,n)},getOrderedControls:function(t){for(var e=Math.floor(t),i=e-this.controlsIndex,n=i>0,o=this.c$||[],s=0;Math.abs(i)>s;s++)n?o.push(o.shift()):o.unshift(o.pop());return this.controlsIndex=e,o},statics:{positionControl:function(e,i,n){if(n=n||"px",!this.updating)if(!t.dom.canTransform()||e.preventTransform||t.platform.android||10===t.platform.ie)t.dom.canTransform()&&e.preventTransform&&t.dom.transform(e,{translateX:null,translateY:null}),e.setBounds(i,n);else{var o=i.left,s=i.top;o=t.isString(o)?o:o&&o+n,s=t.isString(s)?s:s&&s+n,t.dom.transform(e,{translateX:o||null,translateY:s||null})}},opacifyControl:function(e,i){var n=i;n=n>.99?1:.01>n?0:n,9>t.platform.ie?e.applyStyle("filter","progid:DXImageTransform.Microsoft.Alpha(Opacity="+100*n+")"):e.applyStyle("opacity",n)}}})})(enyo,this);

// lib/layout/panels/source/arrangers/CardArranger.js
(function(t){t.kind({name:"enyo.CardArranger",kind:"Arranger",layoutClass:"enyo-arranger enyo-arranger-fit",calcArrangementDifference:function(){return this.containerBounds.width},arrange:function(t){for(var e,i,n=0;e=t[n];n++)i=0===n?1:0,this.arrangeControl(e,{opacity:i})},start:t.inherit(function(t){return function(){t.apply(this,arguments);for(var e,i=this.container.getPanels(),n=0;e=i[n];n++){var o=e.showing;e.setShowing(n==this.container.fromIndex||n==this.container.toIndex),e.showing&&!o&&e.resize()}}}),finish:t.inherit(function(t){return function(){t.apply(this,arguments);for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)e.setShowing(n==this.container.toIndex)}}),destroy:t.inherit(function(e){return function(){for(var i,n=this.container.getPanels(),o=0;i=n[o];o++)t.Arranger.opacifyControl(i,1),i.showing||i.setShowing(!0);e.apply(this,arguments)}})})})(enyo,this);

// lib/layout/panels/source/arrangers/CardSlideInArranger.js
(function(t){t.kind({name:"enyo.CardSlideInArranger",kind:"CardArranger",start:function(){for(var t,e=this.container.getPanels(),i=0;t=e[i];i++){var n=t.showing;t.setShowing(i==this.container.fromIndex||i==this.container.toIndex),t.showing&&!n&&t.resize()}var o=this.container.fromIndex;i=this.container.toIndex,this.container.transitionPoints=[i+"."+o+".s",i+"."+o+".f"]},finish:t.inherit(function(t){return function(){t.apply(this,arguments);for(var e,i=this.container.getPanels(),n=0;e=i[n];n++)e.setShowing(n==this.container.toIndex)}}),arrange:function(t,e){for(var i,n,o=e.split("."),s=o[0],r=o[1],a="s"==o[2],h=this.containerBounds.width,l=0,d=this.container.getPanels();i=d[l];l++)n=h,r==l&&(n=a?0:-h),s==l&&(n=a?h:0),r==l&&r==s&&(n=0),this.arrangeControl(i,{left:n})},destroy:t.inherit(function(e){return function(){for(var i,n=this.container.getPanels(),o=0;i=n[o];o++)t.Arranger.positionControl(i,{left:null});e.apply(this,arguments)}})})})(enyo,this);

// lib/layout/panels/source/arrangers/CarouselArranger.js
(function(t){t.kind({name:"enyo.CarouselArranger",kind:"Arranger",size:function(){var e,i,n,o,s,r=this.container.getPanels(),a=this.containerPadding=this.container.hasNode()?t.dom.calcPaddingExtents(this.container.node):{},h=this.containerBounds;h.height-=a.top+a.bottom,h.width-=a.left+a.right;var l;for(e=0,n=0;s=r[e];e++)o=t.dom.calcMarginExtents(s.hasNode()),s.width=s.getBounds().width,s.marginWidth=o.right+o.left,n+=(s.fit?0:s.width)+s.marginWidth,s.fit&&(l=s);if(l){var d=h.width-n;l.width=d>=0?d:l.width}for(e=0,i=a.left;s=r[e];e++)s.setBounds({top:a.top,bottom:a.bottom,width:s.fit?s.width:null})},arrange:function(t,e){this.container.wrap?this.arrangeWrap(t,e):this.arrangeNoWrap(t,e)},arrangeNoWrap:function(t,e){var i,n,o,s,r=this.container.getPanels(),a=this.container.clamp(e),h=this.containerBounds.width;for(i=a,o=0;(s=r[i])&&(o+=s.width+s.marginWidth,!(o>h));i++);var l=h-o,d=0;if(l>0)for(i=a-1,n=0;s=r[i];i--)if(n+=s.width+s.marginWidth,0>=l-n){d=l-n,a=i;break}var c,u;for(i=0,u=this.containerPadding.left+d;s=r[i];i++)c=s.width+s.marginWidth,a>i?this.arrangeControl(s,{left:-c}):(this.arrangeControl(s,{left:Math.floor(u)}),u+=c)},arrangeWrap:function(t){for(var e,i=0,n=this.containerPadding.left;e=t[i];i++)this.arrangeControl(e,{left:n}),n+=e.width+e.marginWidth},calcArrangementDifference:function(t,e,i,n){var o=Math.abs(t%this.c$.length);return e[o].left-n[o].left},destroy:t.inherit(function(e){return function(){for(var i,n=this.container.getPanels(),o=0;i=n[o];o++)t.Arranger.positionControl(i,{left:null,top:null}),i.applyStyle("top",null),i.applyStyle("bottom",null),i.applyStyle("left",null),i.applyStyle("width",null);e.apply(this,arguments)}})})})(enyo,this);

// lib/layout/panels/source/arrangers/CollapsingArranger.js
(function(t){t.kind({name:"enyo.CollapsingArranger",kind:"CarouselArranger",peekWidth:0,size:t.inherit(function(t){return function(){this.clearLastSize(),t.apply(this,arguments)}}),clearLastSize:function(){for(var t,e=0,i=this.container.getPanels();t=i[e];e++)t._fit&&e!=i.length-1&&(t.applyStyle("width",null),t._fit=null)},constructor:t.inherit(function(t){return function(){t.apply(this,arguments),this.peekWidth=null!=this.container.peekWidth?this.container.peekWidth:this.peekWidth}}),arrange:function(t,e){for(var i,n=this.container.getPanels(),o=0,s=this.containerPadding.left,r=0;i=n[o];o++)i.getShowing()?(this.arrangeControl(i,{left:s+r*this.peekWidth}),o>=e&&(s+=i.width+i.marginWidth-this.peekWidth),r++):(this.arrangeControl(i,{left:s}),o>=e&&(s+=i.width+i.marginWidth)),o==n.length-1&&0>e&&this.arrangeControl(i,{left:s-e})},calcArrangementDifference:function(t,e,i,n){var o=this.container.getPanels().length-1;return Math.abs(n[o].left-e[o].left)},flowControl:t.inherit(function(t){return function(e,i){if(t.apply(this,arguments),this.container.realtimeFit){var n=this.container.getPanels(),o=n.length-1,s=n[o];e==s&&this.fitControl(e,i.left)}}}),finish:t.inherit(function(t){return function(){if(t.apply(this,arguments),!this.container.realtimeFit&&this.containerBounds){var e=this.container.getPanels(),i=this.container.arrangement,n=e.length-1,o=e[n];this.fitControl(o,i[n].left)}}}),fitControl:function(t,e){t._fit=!0,t.applyStyle("width",this.containerBounds.width-e+"px"),t.resize()}})})(enyo,this);

// lib/layout/panels/source/arrangers/DockRightArranger.js
(function(t){t.kind({name:"enyo.DockRightArranger",kind:"Arranger",basePanel:!1,overlap:0,layoutWidth:0,constructor:t.inherit(function(t){return function(){t.apply(this,arguments),this.overlap=null!=this.container.overlap?this.container.overlap:this.overlap,this.layoutWidth=null!=this.container.layoutWidth?this.container.layoutWidth:this.layoutWidth}}),size:function(){var e,i,n,o=this.container.getPanels(),s=this.containerPadding=this.container.hasNode()?t.dom.calcPaddingExtents(this.container.node):{},r=this.containerBounds;r.width-=s.left+s.right;var a,h=r.width,l=o.length;for(this.container.transitionPositions={},e=0;n=o[e];e++)n.width=0===e&&this.container.basePanel?h:n.getBounds().width;for(e=0;n=o[e];e++){0===e&&this.container.basePanel&&n.setBounds({width:h}),n.setBounds({top:s.top,bottom:s.bottom});for(var d=0;n=o[d];d++){var c;if(0===e&&this.container.basePanel)c=0;else if(e>d)c=h;else{if(e!==d)break;a=h>this.layoutWidth?this.overlap:0,c=h-o[e].width+a}this.container.transitionPositions[e+"."+d]=c}if(l>d)for(var u=!1,g=e+1;l>g;g++){if(a=0,u)a=0;else if(o[e].width+o[g].width-this.overlap>h)a=0,u=!0;else{for(a=o[e].width-this.overlap,i=e;g>i;i++){var p=a+o[i+1].width-this.overlap;if(!(h>p)){a=h;break}a=p}a=h-a}this.container.transitionPositions[e+"."+g]=a}}},arrange:function(t,e){var i,n,o=this.container.getPanels(),s=this.container.clamp(e);for(i=0;n=o[i];i++){var r=this.container.transitionPositions[i+"."+s];this.arrangeControl(n,{left:r})}},calcArrangementDifference:function(t,e,i){var n=this.container.getPanels(),o=i>t?n[i].width:n[t].width;return o},destroy:t.inherit(function(e){return function(){for(var i,n=this.container.getPanels(),o=0;i=n[o];o++)t.Arranger.positionControl(i,{left:null,top:null}),i.applyStyle("top",null),i.applyStyle("bottom",null),i.applyStyle("left",null),i.applyStyle("width",null);e.apply(this,arguments)}})})})(enyo,this);

// lib/layout/panels/source/arrangers/OtherArrangers.js
(function(t){t.kind({name:"enyo.LeftRightArranger",kind:"Arranger",margin:40,axisSize:"width",offAxisSize:"height",axisPosition:"left",constructor:t.inherit(function(t){return function(){t.apply(this,arguments),this.margin=null!=this.container.margin?this.container.margin:this.margin}}),size:function(){for(var t,e,i=this.container.getPanels(),n=this.containerBounds[this.axisSize],o=n-this.margin-this.margin,s=0;e=i[s];s++)t={},t[this.axisSize]=o,t[this.offAxisSize]="100%",e.setBounds(t)},start:t.inherit(function(t){return function(){t.apply(this,arguments);for(var e,i=this.container.fromIndex,n=this.container.toIndex,o=this.getOrderedControls(n),s=Math.floor(o.length/2),r=0;e=o[r];r++)i>n?r==o.length-s?e.applyStyle("z-index",0):e.applyStyle("z-index",1):r==o.length-1-s?e.applyStyle("z-index",0):e.applyStyle("z-index",1)}}),arrange:function(t,e){var i,n,o;if(1==this.container.getPanels().length)return o={},o[this.axisPosition]=this.margin,this.arrangeControl(this.container.getPanels()[0],o),void 0;var s=Math.floor(this.container.getPanels().length/2),r=this.getOrderedControls(Math.floor(e)-s),a=this.containerBounds[this.axisSize]-this.margin-this.margin,h=this.margin-a*s;for(i=0;n=r[i];i++)o={},o[this.axisPosition]=h,this.arrangeControl(n,o),h+=a},calcArrangementDifference:function(t,e,i,n){if(1==this.container.getPanels().length)return 0;var o=Math.abs(t%this.c$.length);return e[o][this.axisPosition]-n[o][this.axisPosition]},destroy:t.inherit(function(e){return function(){for(var i,n=this.container.getPanels(),o=0;i=n[o];o++)t.Arranger.positionControl(i,{left:null,top:null}),t.Arranger.opacifyControl(i,1),i.applyStyle("left",null),i.applyStyle("top",null),i.applyStyle("height",null),i.applyStyle("width",null);e.apply(this,arguments)}})}),t.kind({name:"enyo.TopBottomArranger",kind:"LeftRightArranger",dragProp:"ddy",dragDirectionProp:"yDirection",canDragProp:"vertical",axisSize:"height",offAxisSize:"width",axisPosition:"top"}),t.kind({name:"enyo.SpiralArranger",kind:"Arranger",incrementalPoints:!0,inc:20,size:function(){for(var t,e=this.container.getPanels(),i=this.containerBounds,n=this.controlWidth=i.width/3,o=this.controlHeight=i.height/3,s=0;t=e[s];s++)t.setBounds({width:n,height:o})},arrange:function(t){for(var e,i=this.inc,n=0,o=t.length;e=t[n];n++){var s=Math.cos(2*(n/o)*Math.PI)*n*i+this.controlWidth,r=Math.sin(2*(n/o)*Math.PI)*n*i+this.controlHeight;this.arrangeControl(e,{left:s,top:r})}},start:t.inherit(function(t){return function(){t.apply(this,arguments);for(var e,i=this.getOrderedControls(this.container.toIndex),n=0;e=i[n];n++)e.applyStyle("z-index",i.length-n)}}),calcArrangementDifference:function(){return this.controlWidth},destroy:t.inherit(function(e){return function(){for(var i,n=this.container.getPanels(),o=0;i=n[o];o++)i.applyStyle("z-index",null),t.Arranger.positionControl(i,{left:null,top:null}),i.applyStyle("left",null),i.applyStyle("top",null),i.applyStyle("height",null),i.applyStyle("width",null);e.apply(this,arguments)}})}),t.kind({name:"enyo.GridArranger",kind:"Arranger",incrementalPoints:!0,colWidth:100,colHeight:100,size:function(){for(var t,e=this.container.getPanels(),i=this.colWidth,n=this.colHeight,o=0;t=e[o];o++)t.setBounds({width:i,height:n})},arrange:function(t){for(var e,i=this.colWidth,n=this.colHeight,o=Math.max(1,Math.floor(this.containerBounds.width/i)),s=0,r=0;t.length>r;s++)for(var a=0;o>a&&(e=t[r]);a++,r++)this.arrangeControl(e,{left:i*a,top:n*s})},flowControl:t.inherit(function(e){return function(i,n){e.apply(this,arguments),t.Arranger.opacifyControl(i,0!==n.top%this.colHeight?.25:1)}}),calcArrangementDifference:function(){return this.colWidth},destroy:t.inherit(function(e){return function(){for(var i,n=this.container.getPanels(),o=0;i=n[o];o++)t.Arranger.positionControl(i,{left:null,top:null}),i.applyStyle("left",null),i.applyStyle("top",null),i.applyStyle("height",null),i.applyStyle("width",null);e.apply(this,arguments)}})})})(enyo,this);

// lib/layout/panels/source/Panels.js
(function(t){t.kind({name:"enyo.Panels",classes:"enyo-panels",published:{index:0,draggable:!0,animate:!0,wrap:!1,arrangerKind:"CardArranger",narrowFit:!0},events:{onTransitionStart:"",onTransitionFinish:""},handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish",onscroll:"domScroll"},tools:[{kind:"Animator",onStep:"step",onEnd:"animationEnded"}],fraction:0,create:t.inherit(function(t){return function(){this.transitionPoints=[],t.apply(this,arguments),this.arrangerKindChanged(),this.narrowFitChanged(),this.indexChanged()}}),rendered:t.inherit(function(e){return function(){e.apply(this,arguments),t.makeBubble(this,"scroll")}}),domScroll:function(){this.hasNode()&&this.node.scrollLeft>0&&(this.node.scrollLeft=0)},initComponents:t.inherit(function(t){return function(){this.createChrome(this.tools),t.apply(this,arguments)}}),arrangerKindChanged:function(){this.setLayoutKind(this.arrangerKind)},narrowFitChanged:function(){this.addRemoveClass(t.Panels.getNarrowClass(),this.narrowFit)},destroy:t.inherit(function(t){return function(){this.destroying=!0,t.apply(this,arguments)}}),removeControl:t.inherit(function(e){return function(i){if(this.destroying)return e.apply(this,arguments);var n=-1,o=t.indexOf(i,this.controls);o===this.index&&(n=Math.max(o-1,0)),e.apply(this,arguments),-1!==n&&this.controls.length>0&&(this.setIndex(n),this.flow(),this.reflow())}}),isPanel:function(){return!0},flow:t.inherit(function(t){return function(){this.arrangements=[],t.apply(this,arguments)}}),reflow:t.inherit(function(t){return function(){this.arrangements=[],t.apply(this,arguments),this.refresh()}}),getPanels:function(){var t=this.controlParent||this;return t.children},getActive:function(){var t=this.getPanels(),e=this.index%t.length;return 0>e&&(e+=t.length),t[e]},getAnimator:function(){return this.$.animator},setIndex:function(t){var e=this.get("index"),i=this.clamp(t);this.index=i,this.notifyObservers("index",e,i)},setIndexDirect:function(t){this.animate?(this.animate=!1,this.setIndex(t),this.animate=!0):this.setIndex(t)},selectPanelByName:function(t){if(t)for(var e=0,i=this.getPanels(),n=i.length;n>e;++e)if(t===i[e].name)return this.setIndex(e),e},previous:function(){var t=this.index-1;this.wrap&&0>t&&(t=this.getPanels().length-1),this.setIndex(t)},next:function(){var t=this.index+1;this.wrap&&t>=this.getPanels().length&&(t=0),this.setIndex(t)},clamp:function(t){var e=this.getPanels().length;return this.wrap?(t%=e,0>t?t+e:t):Math.max(0,Math.min(t,e-1))},indexChanged:function(t){this.lastIndex=t,!this.dragging&&this.$.animator&&this.hasNode()&&(this.shouldAnimate()?this.$.animator.isAnimating()?(this.transitionOnComplete=!0,this.$.animator.complete()):this.animateTransition():this.directTransition())},shouldAnimate:function(){return this.animate},step:function(t){return this.fraction=t.value,this.stepTransition(),!0},animationEnded:function(){this.completed()},completed:function(){return this.finishTransition(),this.transitionOnComplete&&(this.transitionOnComplete=!1,this.animateTransition()),!0},dragstart:function(t,e){return this.draggable&&this.layout&&this.layout.canDragEvent(e)?(e.preventDefault(),this.dragstartTransition(e),this.dragging=!0,this.$.animator.stop(),!0):void 0},drag:function(t,e){this.dragging&&(e.preventDefault(),this.dragTransition(e))},dragfinish:function(t,e){this.dragging&&(this.dragging=!1,e.preventTap(),this.dragfinishTransition(e))},dragstartTransition:function(t){if(this.$.animator.isAnimating())this.verifyDragTransition(t);else{var e=this.fromIndex=this.index;this.toIndex=e-(this.layout?this.layout.calcDragDirection(t):0)}this.fromIndex=this.clamp(this.fromIndex),this.toIndex=this.clamp(this.toIndex),this.fireTransitionStart(),this.layout&&this.layout.start()},dragTransition:function(t){var e=this.layout?this.layout.calcDrag(t):0,i=this.transitionPoints,n=i[0],o=i[i.length-1],s=this.fetchArrangement(n),r=this.fetchArrangement(o),a=this.layout?this.layout.drag(e,n,s,o,r):0,h=e&&!a;this.fraction+=a;var l=this.fraction;(l>1||0>l||h)&&((l>0||h)&&this.dragfinishTransition(t),this.dragstartTransition(t),this.fraction=0),this.stepTransition()},dragfinishTransition:function(t){this.verifyDragTransition(t),this.setIndex(this.toIndex),this.dragging&&this.fireTransitionFinish()},verifyDragTransition:function(t){var e=this.layout?this.layout.calcDragDirection(t):0,i=Math.min(this.fromIndex,this.toIndex),n=Math.max(this.fromIndex,this.toIndex);if(e>0){var o=i;i=n,n=o}i!=this.fromIndex&&(this.fraction=1-this.fraction),this.fromIndex=i,this.toIndex=n},refresh:function(){this.$.animator&&this.$.animator.isAnimating()&&this.$.animator.stop(),this.setupTransition(),this.fraction=1,this.stepTransition(),this.transitioning=!1,this.completeTransition()},directTransition:function(){this.startTransition(),this.fraction=1,this.stepTransition(),this.finishTransition()},animateTransition:function(){this.startTransition(),this.$.animator.play({startValue:this.fraction})},startTransition:function(){this.transitioning||(this.transitioning=!0,this.setupTransition(),this.fireTransitionStart())},setupTransition:function(){this.fromIndex=null!=this.fromIndex?this.fromIndex:this.lastIndex||0,this.toIndex=null!=this.toIndex?this.toIndex:this.index,this.layout&&this.layout.start()},finishTransition:function(){this.transitioning=!1,this.completeTransition(!0)},completeTransition:function(t){this.layout&&this.layout.finish(),t?this.fireTransitionFinish(!0):this.clearTransitionData()},clearTransitionData:function(){this.transitionPoints=[],this.fraction=0,this.fromIndex=this.toIndex=null},fireTransitionStart:function(){var e=this.startTransitionInfo;!this.hasNode()||e&&e.fromIndex==this.fromIndex&&e.toIndex==this.toIndex||(this.startTransitionInfo={fromIndex:this.fromIndex,toIndex:this.toIndex},this.doTransitionStart(t.clone(this.startTransitionInfo)))},fireTransitionFinish:function(e){var i=this.finishTransitionInfo,n=i?i.fromIndex:null,o=i?i.toIndex:null;!this.hasNode()||i&&n==this.fromIndex&&o==this.toIndex?e&&this.clearTransitionData():(this.finishTransitionInfo=this.transitionOnComplete?{fromIndex:o,toIndex:this.lastIndex}:{fromIndex:this.lastIndex,toIndex:this.index},e&&this.clearTransitionData(),this.doTransitionFinish(t.clone(this.finishTransitionInfo)))},stepTransition:function(){if(this.hasNode()){var e=this.transitionPoints,i=(this.fraction||0)*(e.length-1),n=Math.floor(i);i-=n;var o=e[n],s=e[n+1],r=this.fetchArrangement(o),a=this.fetchArrangement(s);this.arrangement=r&&a?t.Panels.lerp(r,a,i):r||a,this.arrangement&&this.layout&&this.layout.flowArrangement()}},fetchArrangement:function(t){return null!=t&&!this.arrangements[t]&&this.layout&&(this.layout._arrange(t),this.arrangements[t]=this.readArrangement(this.getPanels())),this.arrangements[t]},readArrangement:function(e){for(var i,n=[],o=0,s=e;i=s[o];o++)n.push(t.clone(i._arranger));return n},statics:{isScreenNarrow:function(){return t.Panels.isNarrowDevice()?!0:800>=t.dom.getWindowWidth()},getNarrowClass:function(){return t.Panels.isNarrowDevice()?"enyo-panels-force-narrow":"enyo-panels-fit-narrow"},lerp:function(e,i,n){for(var o,s=[],r=0,a=t.keys(e);o=a[r];r++)s.push(this.lerpObject(e[o],i[o],n));return s},lerpObject:function(e,i,n){var o,s,r=t.clone(e);if(i)for(var a in e)o=e[a],s=i[a],o!=s&&(r[a]=o-(o-s)*n);return r},isNarrowDevice:function(){var e=navigator.userAgent;switch(t.platform.platformName){case"ios":return/iP(?:hone|od;(?: U;)? CPU) OS (\d+)/.test(e);case"android":return/Mobile/.test(e)&&t.platform.android>2;case"androidChrome":return/Mobile/.test(e)}return!1}}})})(enyo,this);

// lib/layout/tree/source/Node.js
(function(t){t.kind({name:"enyo.Node",published:{expandable:!1,expanded:!1,icon:"",onlyIconExpands:!1,selected:!1},style:"padding: 0 0 0 16px;",content:"Node",defaultKind:"Node",classes:"enyo-node",components:[{name:"icon",kind:"Image",showing:!1},{kind:"Control",name:"caption",Xtag:"span",style:"display: inline-block; padding: 4px;",allowHtml:!0},{kind:"Control",name:"extra",tag:"span",allowHtml:!0}],childClient:[{kind:"Control",name:"box",classes:"enyo-node-box",Xstyle:"border: 1px solid orange;",components:[{kind:"Control",name:"client",classes:"enyo-node-client",Xstyle:"border: 1px solid lightblue;"}]}],handlers:{ondblclick:"dblclick"},events:{onNodeTap:"nodeTap",onNodeDblClick:"nodeDblClick",onExpand:"nodeExpand",onDestroyed:"nodeDestroyed"},create:t.inherit(function(t){return function(){t.apply(this,arguments),this.selectedChanged(),this.iconChanged()}}),destroy:t.inherit(function(t){return function(){this.doDestroyed(),t.apply(this,arguments)}}),initComponents:t.inherit(function(t){return function(){this.expandable&&(this.kindComponents=this.kindComponents.concat(this.childClient)),t.apply(this,arguments)}}),contentChanged:function(){this.$.caption.setContent(this.content)},iconChanged:function(){this.$.icon.setSrc(this.icon),this.$.icon.setShowing(Boolean(this.icon))},selectedChanged:function(){this.addRemoveClass("enyo-selected",this.selected)},rendered:t.inherit(function(t){return function(){t.apply(this,arguments),this.expandable&&!this.expanded&&this.quickCollapse()}}),addNodes:function(t){this.destroyClientControls();for(var e,i=0;e=t[i];i++)this.createComponent(e);this.$.client.render()},addTextNodes:function(t){this.destroyClientControls();for(var e,i=0;e=t[i];i++)this.createComponent({content:e});this.$.client.render()},tap:function(t,e){return this.onlyIconExpands?e.target==this.$.icon.hasNode()?this.toggleExpanded():this.doNodeTap():(this.toggleExpanded(),this.doNodeTap()),!0},dblclick:function(){return this.doNodeDblClick(),!0},toggleExpanded:function(){this.setExpanded(!this.expanded)},quickCollapse:function(){this.removeClass("enyo-animate"),this.$.box.applyStyle("height","0");var t=this.$.client.getBounds().height;this.$.client.setBounds({top:-t})},_expand:function(){this.addClass("enyo-animate");var t=this.$.client.getBounds().height;this.$.box.setBounds({height:t}),this.$.client.setBounds({top:0}),setTimeout(this.bindSafely(function(){this.expanded&&(this.removeClass("enyo-animate"),this.$.box.applyStyle("height","auto"))}),225)},_collapse:function(){this.removeClass("enyo-animate");var t=this.$.client.getBounds().height;this.$.box.setBounds({height:t}),setTimeout(this.bindSafely(function(){this.addClass("enyo-animate"),this.$.box.applyStyle("height","0"),this.$.client.setBounds({top:-t})}),25)},expandedChanged:function(){if(this.expandable){var t={expanded:this.expanded};this.doExpand(t),t.wait||this.effectExpanded()}else this.expanded=!1},effectExpanded:function(){this.$.client&&(this.expanded?this._expand():this._collapse())}})})(enyo,this);

// lib/layout/imageview/source/PanZoomView.js
(function(t){t.kind({name:"enyo.PanZoomView",kind:"enyo.Scroller",touchOverscroll:!1,thumb:!1,animate:!0,verticalDragPropagation:!0,horizontalDragPropagation:!0,published:{scale:"auto",disableZoom:!1,contentWidth:null,contentHeight:null},events:{onZoom:""},touch:!0,preventDragPropagation:!1,handlers:{ondragstart:"dragPropagation",onSetDimensions:"setDimensions"},components:[{name:"animator",kind:"Animator",onStep:"zoomAnimationStep",onEnd:"zoomAnimationEnd"},{name:"viewport",style:"overflow:hidden;min-height:100%;min-width:100%;",classes:"enyo-fit",ongesturechange:"gestureTransform",ongestureend:"saveState",ontap:"singleTap",ondblclick:"doubleClick",onmousewheel:"mousewheel",components:[{name:"content"}]}],create:t.inherit(function(e){return function(){this.scaleKeyword=this.scale;var i=this.components;if(this.components=[],e.apply(this,arguments),this.$.content.applyStyle("width",this.contentWidth+"px"),this.$.content.applyStyle("height",this.contentHeight+"px"),this.unscaledComponents){var n=this.hasOwnProperty("unscaledComponents")?this.getInstanceOwner():this;this.createComponents(this.unscaledComponents,{owner:n})}this.controlParentName="content",this.discoverControlParent(),this.createComponents(i),this.canTransform=t.dom.canTransform(),this.canTransform||this.$.content.applyStyle("position","relative"),this.canAccelerate=t.dom.canAccelerate(),this.getStrategy().setDragDuringGesture(!1)}}),rendered:t.inherit(function(t){return function(){t.apply(this,arguments),this.getOriginalScale()}}),dragPropagation:function(t,e){var i=this.getStrategy().getScrollBounds(),n=0===i.top&&e.dy>0||i.top>=i.maxTop-2&&0>e.dy,o=0===i.left&&e.dx>0||i.left>=i.maxLeft-2&&0>e.dx;return!(n&&this.verticalDragPropagation||o&&this.horizontalDragPropagation)},mousewheel:function(t,e){e.pageX|=e.clientX+e.target.scrollLeft,e.pageY|=e.clientY+e.target.scrollTop;var i=(this.maxScale-this.minScale)/10,n=this.scale;return e.wheelDelta>0||0>e.detail?this.scale=this.limitScale(this.scale+i):(0>e.wheelDelta||e.detail>0)&&(this.scale=this.limitScale(this.scale-i)),this.eventPt=this.calcEventLocation(e),this.transform(this.scale),n!=this.scale&&this.doZoom({scale:this.scale}),this.ratioX=this.ratioY=null,e.preventDefault(),!0},handleResize:t.inherit(function(t){return function(){t.apply(this,arguments),this.scaleChanged()}}),setDimensions:function(t,e){return this.$.content.applyStyle("width",e.width+"px"),this.$.content.applyStyle("height",e.height+"px"),this.originalWidth=e.width,this.originalHeight=e.height,this.scale=this.scaleKeyword,this.scaleChanged(),!0},getOriginalScale:function(){this.$.content.hasNode()&&(this.originalWidth=this.$.content.node.clientWidth,this.originalHeight=this.$.content.node.clientHeight,this.scale=this.scaleKeyword,this.scaleChanged())},scaleChanged:function(){var t=this.hasNode();if(t){this.containerWidth=t.clientWidth,this.containerHeight=t.clientHeight;var e=this.containerWidth/this.originalWidth,i=this.containerHeight/this.originalHeight;this.minScale=Math.min(e,i),this.maxScale=1>3*this.minScale?1:3*this.minScale,"auto"==this.scale?this.scale=this.minScale:"width"==this.scale?this.scale=e:"height"==this.scale?this.scale=i:"fit"==this.scale?(this.fitAlignment="center",this.scale=Math.max(e,i)):(this.maxScale=Math.max(this.maxScale,this.scale),this.scale=this.limitScale(this.scale))}this.eventPt=this.calcEventLocation(),this.transform(this.scale),this.getStrategy().$.scrollMath&&this.getStrategy().$.scrollMath.start(),this.align()},align:function(){if(this.fitAlignment&&"center"===this.fitAlignment){var t=this.getScrollBounds();this.setScrollLeft(t.maxLeft/2),this.setScrollTop(t.maxTop/2)}},gestureTransform:function(t,e){this.eventPt=this.calcEventLocation(e),this.transform(this.limitScale(this.scale*e.scale))},calcEventLocation:function(t){var e={x:0,y:0};if(t&&this.hasNode()){var i=this.node.getBoundingClientRect();e.x=Math.round(t.pageX-i.left-this.bounds.x),e.x=Math.max(0,Math.min(this.bounds.width,e.x)),e.y=Math.round(t.pageY-i.top-this.bounds.y),e.y=Math.max(0,Math.min(this.bounds.height,e.y))}return e},transform:function(e){this.tapped=!1;var i=this.bounds||this.innerBounds(e);this.bounds=this.innerBounds(e),this.scale>this.minScale?this.$.viewport.applyStyle("cursor","move"):this.$.viewport.applyStyle("cursor",null),this.$.viewport.setBounds({width:this.bounds.width+"px",height:this.bounds.height+"px"}),this.ratioX=this.ratioX||(this.eventPt.x+this.getScrollLeft())/i.width,this.ratioY=this.ratioY||(this.eventPt.y+this.getScrollTop())/i.height;var n,o;if(this.$.animator.ratioLock?(n=this.$.animator.ratioLock.x*this.bounds.width-this.containerWidth/2,o=this.$.animator.ratioLock.y*this.bounds.height-this.containerHeight/2):(n=this.ratioX*this.bounds.width-this.eventPt.x,o=this.ratioY*this.bounds.height-this.eventPt.y),n=Math.max(0,Math.min(this.bounds.width-this.containerWidth,n)),o=Math.max(0,Math.min(this.bounds.height-this.containerHeight,o)),this.canTransform){var s={scale:e};s=this.canAccelerate?t.mixin({translate3d:Math.round(this.bounds.left)+"px, "+Math.round(this.bounds.top)+"px, 0px"},s):t.mixin({translate:this.bounds.left+"px, "+this.bounds.top+"px"},s),t.dom.transform(this.$.content,s)}else if(t.platform.ie){var r='"progid:DXImageTransform.Microsoft.Matrix(M11='+e+", M12=0, M21=0, M22="+e+", SizingMethod='auto expand')\"";this.$.content.applyStyle("-ms-filter",r),this.$.content.setBounds({width:this.bounds.width*e+"px",height:this.bounds.height*e+"px",left:this.bounds.left+"px",top:this.bounds.top+"px"}),this.$.content.applyStyle("width",e*this.bounds.width),this.$.content.applyStyle("height",e*this.bounds.height)}this.setScrollLeft(n),this.setScrollTop(o),this.positionClientControls(e)},limitScale:function(t){return this.disableZoom?t=this.scale:t>this.maxScale?t=this.maxScale:this.minScale>t&&(t=this.minScale),t},innerBounds:function(t){var e=this.originalWidth*t,i=this.originalHeight*t,n={x:0,y:0,transX:0,transY:0};return this.containerWidth>e&&(n.x+=(this.containerWidth-e)/2),this.containerHeight>i&&(n.y+=(this.containerHeight-i)/2),this.canTransform&&(n.transX-=(this.originalWidth-e)/2,n.transY-=(this.originalHeight-i)/2),{left:n.x+n.transX,top:n.y+n.transY,width:e,height:i,x:n.x,y:n.y}},saveState:function(t,e){var i=this.scale;this.scale*=e.scale,this.scale=this.limitScale(this.scale),i!=this.scale&&this.doZoom({scale:this.scale}),this.ratioX=this.ratioY=null},doubleClick:function(e,i){8==t.platform.ie&&(this.tapped=!0,i.pageX=i.clientX+i.target.scrollLeft,i.pageY=i.clientY+i.target.scrollTop,this.singleTap(e,i),i.preventDefault())},singleTap:function(t,e){setTimeout(this.bindSafely(function(){this.tapped=!1}),300),this.tapped?(this.tapped=!1,this.smartZoom(t,e)):this.tapped=!0},smartZoom:function(t,e){var i=this.hasNode(),n=this.$.content.hasNode();if(i&&n&&this.hasNode()&&!this.disableZoom){var o=this.scale;if(this.scale=this.scale!=this.minScale?this.minScale:this.maxScale,this.eventPt=this.calcEventLocation(e),this.animate){var s={x:(this.eventPt.x+this.getScrollLeft())/this.bounds.width,y:(this.eventPt.y+this.getScrollTop())/this.bounds.height};this.$.animator.play({duration:350,ratioLock:s,baseScale:o,deltaScale:this.scale-o})}else this.transform(this.scale),this.doZoom({scale:this.scale})}},zoomAnimationStep:function(){var t=this.$.animator.baseScale+this.$.animator.deltaScale*this.$.animator.value;return this.transform(t),!0},zoomAnimationEnd:function(){return this.stabilize(),this.doZoom({scale:this.scale}),this.$.animator.ratioLock=void 0,!0},positionClientControls:function(t){this.waterfallDown("onPositionPin",{scale:t,bounds:this.bounds})}})})(enyo,this);

// lib/layout/imageview/source/ImageViewPin.js
(function(t){t.kind({name:"enyo.ImageViewPin",kind:"enyo.Control",published:{highlightAnchorPoint:!1,anchor:{top:0,left:0},position:{top:0,left:0}},style:"position:absolute;z-index:1000;width:0px;height:0px;",handlers:{onPositionPin:"reAnchor"},create:t.inherit(function(t){return function(){t.apply(this,arguments),this.styleClientControls(),this.positionClientControls(),this.highlightAnchorPointChanged(),this.anchorChanged()}}),styleClientControls:function(){for(var t=this.getClientControls(),e=0;t.length>e;e++)t[e].applyStyle("position","absolute")},positionClientControls:function(){for(var t=this.getClientControls(),e=0;t.length>e;e++)for(var i in this.position)t[e].applyStyle(i,this.position[i]+"px")},highlightAnchorPointChanged:function(){this.addRemoveClass("pinDebug",this.highlightAnchorPoint)},anchorChanged:function(){var t=null,e=null;for(e in this.anchor)t=(""+this.anchor[e]).match(/^(\d+(?:\.\d+)?)(.*)$/),t&&(this.anchor[e+"Coords"]={value:t[1],units:t[2]||"px"})},reAnchor:function(t,e){var i=e.scale,n=e.bounds,o=this.anchor.right?"px"==this.anchor.rightCoords.units?n.width+n.x-this.anchor.rightCoords.value*i:n.width*(100-this.anchor.rightCoords.value)/100+n.x:"px"==this.anchor.leftCoords.units?this.anchor.leftCoords.value*i+n.x:n.width*this.anchor.leftCoords.value/100+n.x,s=this.anchor.bottom?"px"==this.anchor.bottomCoords.units?n.height+n.y-this.anchor.bottomCoords.value*i:n.height*(100-this.anchor.bottomCoords.value)/100+n.y:"px"==this.anchor.topCoords.units?this.anchor.topCoords.value*i+n.y:n.height*this.anchor.topCoords.value/100+n.y;this.applyStyle("left",o+"px"),this.applyStyle("top",s+"px")}})})(enyo,this);

// lib/layout/imageview/source/ImageView.js
(function(t){t.kind({name:"enyo.ImageView",kind:"enyo.PanZoomView",subKindComponents:[{kind:"Image",ondown:"down",style:"vertical-align: text-top;"}],create:t.inherit(function(e){return function(){this.unscaledComponents=this.components,this.components=[],this.kindComponents[1].components[0].components=this.subKindComponents,e.apply(this,arguments),this.$.content.applyStyle("display","inline-block"),this.bufferImage=new Image,this.bufferImage.onload=t.bind(this,"imageLoaded"),this.bufferImage.onerror=t.bind(this,"imageError"),this.srcChanged(),this.getStrategy().$.scrollMath&&this.getStrategy().$.scrollMath.start()}}),destroy:t.inherit(function(t){return function(){this.bufferImage&&(this.bufferImage.onerror=void 0,this.bufferImage.onerror=void 0,delete this.bufferImage),t.apply(this,arguments)}}),down:function(t,e){e.preventDefault()},srcChanged:function(){this.src&&this.src.length>0&&this.bufferImage&&this.src!=this.bufferImage.src&&(this.bufferImage.src=this.src)},imageLoaded:function(){if(this.scale=this.scaleKeyword,this.originalWidth=this.contentWidth=this.bufferImage.width,this.originalHeight=this.contentHeight=this.bufferImage.height,this.scaleChanged(),this.$.image.setSrc(this.bufferImage.src),t.platform.safari){var e=this.$.image.hasNode(),i=this.bufferImage.src;e&&setTimeout(function(){e.src=i},100)}t.dom.transformValue(this.getStrategy().$.client,"translate3d","0px, 0px, 0"),this.positionClientControls(this.scale),this.align()},imageError:function(e){t.error("Error loading image: "+this.src),this.bubble("onerror",e)}})})(enyo,this);

// lib/layout/imageview/source/ImageCarousel.js
(function(t){t.kind({name:"enyo.ImageCarousel",kind:"enyo.Panels",arrangerKind:"enyo.CarouselArranger",defaultScale:"auto",disableZoom:!1,lowMemory:!1,published:{images:[]},handlers:{onTransitionStart:"transitionStart",onTransitionFinish:"transitionFinish"},create:t.inherit(function(t){return function(){t.apply(this,arguments),this.imageCount=this.images.length,this.images.length>0&&(this.initContainers(),this.loadNearby())}}),initContainers:function(){for(var t=0;this.images.length>t;t++)this.$["container"+t]||(this.createComponent({name:"container"+t,style:"height:100%; width:100%;"}),this.$["container"+t].render());for(t=this.images.length;this.imageCount>t;t++)this.$["image"+t]&&this.$["image"+t].destroy(),this.$["container"+t].destroy();this.imageCount=this.images.length},loadNearby:function(){var t=this.getBufferRange();for(var i in t)this.loadImageView(t[i])},getBufferRange:function(){var t=[];if(this.layout.containerBounds){var i,e,n,o,s=1,r=this.layout.containerBounds;for(e=this.index-1,n=0,o=r.width*s;e>=0&&o>=n;)i=this.$["container"+e],n+=i.width+i.marginWidth,t.unshift(e),e--;for(e=this.index,n=0,o=r.width*(s+1);this.images.length>e&&o>=n;)i=this.$["container"+e],n+=i.width+i.marginWidth,t.push(e),e++}return t},reflow:t.inherit(function(t){return function(){t.apply(this,arguments),this.loadNearby()}}),loadImageView:function(t){return this.wrap&&(t=(t%this.images.length+this.images.length)%this.images.length),t>=0&&this.images.length-1>=t&&(this.$["image"+t]?this.$["image"+t].src!=this.images[t]&&(this.$["image"+t].setSrc(this.images[t]),this.$["image"+t].setScale(this.defaultScale),this.$["image"+t].setDisableZoom(this.disableZoom)):(this.$["container"+t].createComponent({name:"image"+t,kind:"ImageView",scale:this.defaultScale,disableZoom:this.disableZoom,src:this.images[t],verticalDragPropagation:!1,style:"height:100%; width:100%;"},{owner:this}),this.$["image"+t].render())),this.$["image"+t]},setImages:function(t){this.set("images",t)},imagesChanged:function(){this.initContainers(),this.loadNearby()},indexChanged:t.inherit(function(t){return function(){this.loadNearby(),this.lowMemory&&this.cleanupMemory(),t.apply(this,arguments)}}),transitionStart:function(t,i){return i.fromIndex==i.toIndex?!0:void 0},transitionFinish:function(){this.loadNearby(),this.lowMemory&&this.cleanupMemory()},getActiveImage:function(){return this.getImageByIndex(this.index)},getImageByIndex:function(t){return this.$["image"+t]||this.loadImageView(t)},cleanupMemory:function(){for(var i=this.getBufferRange(),e=0;this.images.length>e;e++)-1===t.indexOf(e,i)&&this.$["image"+e]&&this.$["image"+e].destroy()}})})(enyo,this);

// lib/d3.min.js
!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function n(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function e(t,n){return n>t?-1:t>n?1:t>=n?0:0/0}function i(t){return null===t?0/0:+t}function r(t){return!isNaN(t)}function o(t){return{left:function(n,e,i,r){for(3>arguments.length&&(i=0),4>arguments.length&&(r=n.length);r>i;){var o=i+r>>>1;0>t(n[o],e)?i=o+1:r=o}return i},right:function(n,e,i,r){for(3>arguments.length&&(i=0),4>arguments.length&&(r=n.length);r>i;){var o=i+r>>>1;t(n[o],e)>0?r=o:i=o+1}return i}}}function a(t){return t.length}function s(t){for(var n=1;t*n%1;)n*=10;return n}function u(t,n){for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}function l(){this._=Object.create(null)}function h(t){return(t+="")===ps||t[0]===ms?ms+t:t}function c(t){return(t+="")[0]===ms?t.slice(1):t}function f(t){return h(t)in this._}function g(t){return(t=h(t))in this._&&delete this._[t]}function d(){var t=[];for(var n in this._)t.push(c(n));return t}function p(){var t=0;for(var n in this._)++t;return t}function m(){for(var t in this._)return!1;return!0}function v(){this._=Object.create(null)}function y(t){return t}function x(t,n,e){return function(){var i=e.apply(n,arguments);return i===n?t:i}}function w(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var e=0,i=vs.length;i>e;++e){var r=vs[e]+n;if(r in t)return r}}function S(){}function M(){}function b(t){function n(){for(var n,i=e,r=-1,o=i.length;o>++r;)(n=i[r].on)&&n.apply(this,arguments);return t}var e=[],i=new l;return n.on=function(n,r){var o,a=i.get(n);return 2>arguments.length?a&&a.on:(a&&(a.on=null,e=e.slice(0,o=e.indexOf(a)).concat(e.slice(o+1)),i.remove(n)),r&&e.push(i.set(n,{on:r})),t)},n}function C(){es.event.preventDefault()}function P(){for(var t,n=es.event;t=n.sourceEvent;)n=t;return n}function R(t){for(var n=new M,e=0,i=arguments.length;i>++e;)n[arguments[e]]=b(n);return n.of=function(e,i){return function(r){try{var o=r.sourceEvent=es.event;r.target=t,es.event=r,n[r.type].apply(e,i)}finally{es.event=o}}},n}function T(t){return xs(t,bs),t}function _(t){return"function"==typeof t?t:function(){return ws(t,this)}}function k(t){return"function"==typeof t?t:function(){return Ss(t,this)}}function N(t,n){function e(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,n)}function o(){this.setAttributeNS(t.space,t.local,n)}function a(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}function s(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}return t=es.ns.qualify(t),null==n?t.local?i:e:"function"==typeof n?t.local?s:a:t.local?o:r}function I(t){return t.trim().replace(/\s+/g," ")}function A(t){return RegExp("(?:^|\\s+)"+es.requote(t)+"(?:\\s+|$)","g")}function z(t){return(t+"").trim().split(/^|\s+/)}function $(t,n){function e(){for(var e=-1;r>++e;)t[e](this,n)}function i(){for(var e=-1,i=n.apply(this,arguments);r>++e;)t[e](this,i)}t=z(t).map(D);var r=t.length;return"function"==typeof n?i:e}function D(t){var n=A(t);return function(e,i){if(r=e.classList)return i?r.add(t):r.remove(t);var r=e.getAttribute("class")||"";i?(n.lastIndex=0,n.test(r)||e.setAttribute("class",I(r+" "+t))):e.setAttribute("class",I(r.replace(n," ")))}}function E(t,n,e){function i(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,n,e)}function o(){var i=n.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,e)}return null==n?i:"function"==typeof n?o:r}function L(t,n){function e(){delete this[t]}function i(){this[t]=n}function r(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}return null==n?e:"function"==typeof n?r:i}function B(t){function n(){var n=this.ownerDocument,e=this.namespaceURI;return e?n.createElementNS(e,t):n.createElement(t)}function e(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=es.ns.qualify(t)).local?e:n}function F(){var t=this.parentNode;t&&t.removeChild(this)}function H(t){return{__data__:t}}function q(t){return function(){return Ms(this,t)}}function O(t){return arguments.length||(t=e),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function V(t,n){for(var e=0,i=t.length;i>e;e++)for(var r,o=t[e],a=0,s=o.length;s>a;a++)(r=o[a])&&n(r,a,e);return t}function U(t){return xs(t,Ps),t}function W(t){var n,e;return function(i,r,o){var a,s=t[o].update,u=s.length;for(o!=e&&(e=o,n=0),r>=n&&(n=r+1);!(a=s[n])&&u>++n;);return a}}function j(t,n,e){function i(){var n=this[a];n&&(this.removeEventListener(t,n,n.$),delete this[a])}function r(){var r=u(n,rs(arguments));i.call(this),this.addEventListener(t,this[a]=r,r.$=e),r._=n}function o(){var n,e=RegExp("^__on([^.]+)"+es.requote(t)+"$");for(var i in this)if(n=i.match(e)){var r=this[i];this.removeEventListener(n[1],r,r.$),delete this[i]}}var a="__on"+t,s=t.indexOf("."),u=Y;s>0&&(t=t.slice(0,s));var l=Rs.get(t);return l&&(t=l,u=X),s?n?r:i:n?S:o}function Y(t,n){return function(e){var i=es.event;es.event=e,n[0]=this.__data__;try{t.apply(this,n)}finally{es.event=i}}}function X(t,n){var e=Y(t,n);return function(t){var n=this,i=t.relatedTarget;i&&(i===n||8&i.compareDocumentPosition(n))||e.call(n,t)}}function Z(e){var i=".dragsuppress-"+ ++_s,r="click"+i,o=es.select(n(e)).on("touchmove"+i,C).on("dragstart"+i,C).on("selectstart"+i,C);if(null==Ts&&(Ts="onselectstart"in e?!1:w(e.style,"userSelect")),Ts){var a=t(e).style,s=a[Ts];a[Ts]="none"}return function(t){if(o.on(i,null),Ts&&(a[Ts]=s),t){var n=function(){o.on(r,null)};o.on(r,function(){C(),n()},!0),setTimeout(n,0)}}}function K(t,e){e.changedTouches&&(e=e.changedTouches[0]);var i=t.ownerSVGElement||t;if(i.createSVGPoint){var r=i.createSVGPoint();if(0>ks){var o=n(t);if(o.scrollX||o.scrollY){i=es.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=i[0][0].getScreenCTM();ks=!(a.f||a.e),i.remove()}}return ks?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function G(){return es.event.changedTouches[0].identifier}function J(t){return t>0?1:0>t?-1:0}function Q(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function tn(t){return t>1?0:-1>t?As:Math.acos(t)}function nn(t){return t>1?Ds:-1>t?-Ds:Math.asin(t)}function en(t){return((t=Math.exp(t))-1/t)/2}function rn(t){return((t=Math.exp(t))+1/t)/2}function on(t){return((t=Math.exp(2*t))-1)/(t+1)}function an(t){return(t=Math.sin(t/2))*t}function sn(){}function un(t,n,e){return this instanceof un?(this.h=+t,this.s=+n,void(this.l=+e)):2>arguments.length?t instanceof un?new un(t.h,t.s,t.l):Mn(""+t,bn,un):new un(t,n,e)}function ln(t,n,e){function i(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(a-o)*t/60:180>t?a:240>t?o+(a-o)*(240-t)/60:o}function r(t){return Math.round(255*i(t))}var o,a;return t=isNaN(t)?0:0>(t%=360)?t+360:t,n=isNaN(n)?0:0>n?0:n>1?1:n,e=0>e?0:e>1?1:e,a=.5>=e?e*(1+n):e+n-e*n,o=2*e-a,new yn(r(t+120),r(t),r(t-120))}function hn(t,n,e){return this instanceof hn?(this.h=+t,this.c=+n,void(this.l=+e)):2>arguments.length?t instanceof hn?new hn(t.h,t.c,t.l):t instanceof fn?dn(t.l,t.a,t.b):dn((t=Cn((t=es.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new hn(t,n,e)}function cn(t,n,e){return isNaN(t)&&(t=0),isNaN(n)&&(n=0),new fn(e,Math.cos(t*=Es)*n,Math.sin(t)*n)}function fn(t,n,e){return this instanceof fn?(this.l=+t,this.a=+n,void(this.b=+e)):2>arguments.length?t instanceof fn?new fn(t.l,t.a,t.b):t instanceof hn?cn(t.h,t.c,t.l):Cn((t=yn(t)).r,t.g,t.b):new fn(t,n,e)}function gn(t,n,e){var i=(t+16)/116,r=i+n/500,o=i-e/200;return r=pn(r)*Ys,i=pn(i)*Xs,o=pn(o)*Zs,new yn(vn(3.2404542*r-1.5371385*i-.4985314*o),vn(-.969266*r+1.8760108*i+.041556*o),vn(.0556434*r-.2040259*i+1.0572252*o))}function dn(t,n,e){return t>0?new hn(Math.atan2(e,n)*Ls,Math.sqrt(n*n+e*e),t):new hn(0/0,0/0,t)}function pn(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function mn(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function vn(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function yn(t,n,e){return this instanceof yn?(this.r=~~t,this.g=~~n,void(this.b=~~e)):2>arguments.length?t instanceof yn?new yn(t.r,t.g,t.b):Mn(""+t,yn,ln):new yn(t,n,e)}function xn(t){return new yn(t>>16,255&t>>8,255&t)}function wn(t){return xn(t)+""}function Sn(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function Mn(t,n,e){var i,r,o,a=0,s=0,u=0;if(i=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(r=i[2].split(","),i[1]){case"hsl":return e(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return n(Rn(r[0]),Rn(r[1]),Rn(r[2]))}return(o=Js.get(t))?n(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a=a>>4|a,s=240&o,s=s>>4|s,u=15&o,u=u<<4|u):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,u=255&o)),n(a,s,u))}function bn(t,n,e){var i,r,o=Math.min(t/=255,n/=255,e/=255),a=Math.max(t,n,e),s=a-o,u=(a+o)/2;return s?(r=.5>u?s/(a+o):s/(2-a-o),i=t==a?(n-e)/s+(e>n?6:0):n==a?(e-t)/s+2:(t-n)/s+4,i*=60):(i=0/0,r=u>0&&1>u?0:i),new un(i,r,u)}function Cn(t,n,e){t=Pn(t),n=Pn(n),e=Pn(e);var i=mn((.4124564*t+.3575761*n+.1804375*e)/Ys),r=mn((.2126729*t+.7151522*n+.072175*e)/Xs),o=mn((.0193339*t+.119192*n+.9503041*e)/Zs);return fn(116*r-16,500*(i-r),200*(r-o))}function Pn(t){return.04045>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Rn(t){var n=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*n):n}function Tn(t){return"function"==typeof t?t:function(){return t}}function _n(t){return function(n,e,i){return 2===arguments.length&&"function"==typeof e&&(i=e,e=null),kn(n,e,t,i)}}function kn(t,n,e,i){function r(){var t,n=u.status;if(!n&&In(u)||n>=200&&300>n||304===n){try{t=e.call(o,u)}catch(i){return void a.error.call(o,i)}a.load.call(o,t)}else a.error.call(o,u)}var o={},a=es.dispatch("beforesend","progress","load","error"),s={},u=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=r:u.onreadystatechange=function(){u.readyState>3&&r()},u.onprogress=function(t){var n=es.event;es.event=t;try{a.progress.call(o,u)}finally{es.event=n}},o.header=function(t,n){return t=(t+"").toLowerCase(),2>arguments.length?s[t]:(null==n?delete s[t]:s[t]=n+"",o)},o.mimeType=function(t){return arguments.length?(n=null==t?null:t+"",o):n},o.responseType=function(t){return arguments.length?(l=t,o):l},o.response=function(t){return e=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(rs(arguments)))}}),o.send=function(e,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),u.open(e,t,!0),null==n||"accept"in s||(s.accept=n+",*/*"),u.setRequestHeader)for(var h in s)u.setRequestHeader(h,s[h]);return null!=n&&u.overrideMimeType&&u.overrideMimeType(n),null!=l&&(u.responseType=l),null!=r&&o.on("error",r).on("load",function(t){r(null,t)}),a.beforesend.call(o,u),u.send(null==i?null:i),o},o.abort=function(){return u.abort(),o},es.rebind(o,a,"on"),null==i?o:o.get(Nn(i))}function Nn(t){return 1===t.length?function(n,e){t(null==n?e:null)}:t}function In(t){var n=t.responseType;return n&&"text"!==n?t.response:t.responseText}function An(){var t=zn(),n=$n()-t;n>24?(isFinite(n)&&(clearTimeout(eu),eu=setTimeout(An,n)),nu=0):(nu=1,ru(An))}function zn(){var t=Date.now();for(iu=Qs;iu;)t>=iu.t&&(iu.f=iu.c(t-iu.t)),iu=iu.n;return t}function $n(){for(var t,n=Qs,e=1/0;n;)n.f?n=t?t.n=n.n:Qs=n.n:(e>n.t&&(e=n.t),n=(t=n).n);return tu=t,e}function Dn(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function En(t,n){var e=Math.pow(10,3*ds(8-n));return{scale:n>8?function(t){return t/e}:function(t){return t*e},symbol:t}}function Ln(t){var n=t.decimal,e=t.thousands,i=t.grouping,r=t.currency,o=i&&e?function(t,n){for(var r=t.length,o=[],a=0,s=i[0],u=0;r>0&&s>0&&(u+s+1>n&&(s=Math.max(1,n-u)),o.push(t.substring(r-=s,r+s)),!((u+=s+1)>n));)s=i[a=(a+1)%i.length];return o.reverse().join(e)}:y;return function(t){var e=au.exec(t),i=e[1]||" ",a=e[2]||">",s=e[3]||"-",u=e[4]||"",l=e[5],h=+e[6],c=e[7],f=e[8],g=e[9],d=1,p="",m="",v=!1,y=!0;switch(f&&(f=+f.substring(1)),(l||"0"===i&&"="===a)&&(l=i="0",a="="),g){case"n":c=!0,g="g";break;case"%":d=100,m="%",g="f";break;case"p":d=100,m="%",g="r";break;case"b":case"o":case"x":case"X":"#"===u&&(p="0"+g.toLowerCase());case"c":y=!1;case"d":v=!0,f=0;break;case"s":d=-1,g="r"}"$"===u&&(p=r[0],m=r[1]),"r"!=g||f||(g="g"),null!=f&&("g"==g?f=Math.max(1,Math.min(21,f)):("e"==g||"f"==g)&&(f=Math.max(0,Math.min(20,f)))),g=su.get(g)||Bn;var x=l&&c;return function(t){var e=m;if(v&&t%1)return"";var r=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===s?"":s;if(0>d){var u=es.formatPrefix(t,f);t=u.scale(t),e=u.symbol+m}else t*=d;t=g(t,f);var w,S,M=t.lastIndexOf(".");if(0>M){var b=y?t.lastIndexOf("e"):-1;0>b?(w=t,S=""):(w=t.substring(0,b),S=t.substring(b))}else w=t.substring(0,M),S=n+t.substring(M+1);!l&&c&&(w=o(w,1/0));var C=p.length+w.length+S.length+(x?0:r.length),P=h>C?Array(C=h-C+1).join(i):"";return x&&(w=o(P+w,P.length?h-S.length:1/0)),r+=p,t=w+S,("<"===a?r+t+P:">"===a?P+r+t:"^"===a?P.substring(0,C>>=1)+r+t+P.substring(C):r+(x?t:P+t))+e}}}function Bn(t){return t+""}function Fn(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Hn(t,n,e){function i(n){var e=t(n),i=o(e,1);return i-n>n-e?e:i}function r(e){return n(e=t(new lu(e-1)),1),e}function o(t,e){return n(t=new lu(+t),e),t}function a(t,i,o){var a=r(t),s=[];if(o>1)for(;i>a;)e(a)%o||s.push(new Date(+a)),n(a,1);else for(;i>a;)s.push(new Date(+a)),n(a,1);return s}function s(t,n,e){try{lu=Fn;var i=new Fn;return i._=t,a(i,n,e)}finally{lu=Date}}t.floor=t,t.round=i,t.ceil=r,t.offset=o,t.range=a;var u=t.utc=qn(t);return u.floor=u,u.round=qn(i),u.ceil=qn(r),u.offset=qn(o),u.range=s,t}function qn(t){return function(n,e){try{lu=Fn;var i=new Fn;return i._=n,t(i,e)._}finally{lu=Date}}}function On(t){function n(t){function n(n){for(var e,r,o,a=[],s=-1,u=0;i>++s;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(r=cu[e=t.charAt(++s)])&&(e=t.charAt(++s)),(o=_[e])&&(e=o(n,null==r?"e"===e?" ":"0":r)),a.push(e),u=s+1);return a.push(t.slice(u,s)),a.join("")}var i=t.length;return n.parse=function(n){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=e(i,t,n,0);if(r!=n.length)return null;"p"in i&&(i.H=i.H%12+12*i.p);var o=null!=i.Z&&lu!==Fn,a=new(o?Fn:lu);return"j"in i?a.setFullYear(i.y,0,i.j):"w"in i&&("W"in i||"U"in i)?(a.setFullYear(i.y,0,1),a.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(a.getDay()+5)%7:i.w+7*i.U-(a.getDay()+6)%7)):a.setFullYear(i.y,i.m,i.d),a.setHours(i.H+(0|i.Z/100),i.M+i.Z%100,i.S,i.L),o?a._:a},n.toString=function(){return t},n}function e(t,n,e,i){for(var r,o,a,s=0,u=n.length,l=e.length;u>s;){if(i>=l)return-1;if(r=n.charCodeAt(s++),37===r){if(a=n.charAt(s++),o=k[a in cu?n.charAt(s++):a],!o||0>(i=o(t,e,i)))return-1}else if(r!=e.charCodeAt(i++))return-1}return i}function i(t,n,e){M.lastIndex=0;var i=M.exec(n.slice(e));return i?(t.w=b.get(i[0].toLowerCase()),e+i[0].length):-1}function r(t,n,e){w.lastIndex=0;var i=w.exec(n.slice(e));return i?(t.w=S.get(i[0].toLowerCase()),e+i[0].length):-1}function o(t,n,e){R.lastIndex=0;var i=R.exec(n.slice(e));return i?(t.m=T.get(i[0].toLowerCase()),e+i[0].length):-1}function a(t,n,e){C.lastIndex=0;var i=C.exec(n.slice(e));return i?(t.m=P.get(i[0].toLowerCase()),e+i[0].length):-1}function s(t,n,i){return e(t,""+_.c,n,i)}function u(t,n,i){return e(t,""+_.x,n,i)}function l(t,n,i){return e(t,""+_.X,n,i)}function h(t,n,e){var i=x.get(n.slice(e,e+=2).toLowerCase());return null==i?-1:(t.p=i,e)}var c=t.dateTime,f=t.date,g=t.time,d=t.periods,p=t.days,m=t.shortDays,v=t.months,y=t.shortMonths;n.utc=function(t){function e(t){try{lu=Fn;var n=new lu;return n._=t,i(n)}finally{lu=Date}}var i=n(t);return e.parse=function(t){try{lu=Fn;var n=i.parse(t);return n&&n._}finally{lu=Date}},e.toString=i.toString,e},n.multi=n.utc.multi=ue;var x=es.map(),w=Un(p),S=Wn(p),M=Un(m),b=Wn(m),C=Un(v),P=Wn(v),R=Un(y),T=Wn(y);d.forEach(function(t,n){x.set(t.toLowerCase(),n)});var _={a:function(t){return m[t.getDay()]},A:function(t){return p[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return v[t.getMonth()]},c:n(c),d:function(t,n){return Vn(t.getDate(),n,2)},e:function(t,n){return Vn(t.getDate(),n,2)},H:function(t,n){return Vn(t.getHours(),n,2)},I:function(t,n){return Vn(t.getHours()%12||12,n,2)},j:function(t,n){return Vn(1+uu.dayOfYear(t),n,3)},L:function(t,n){return Vn(t.getMilliseconds(),n,3)},m:function(t,n){return Vn(t.getMonth()+1,n,2)},M:function(t,n){return Vn(t.getMinutes(),n,2)},p:function(t){return d[+(t.getHours()>=12)]},S:function(t,n){return Vn(t.getSeconds(),n,2)},U:function(t,n){return Vn(uu.sundayOfYear(t),n,2)},w:function(t){return t.getDay()},W:function(t,n){return Vn(uu.mondayOfYear(t),n,2)},x:n(f),X:n(g),y:function(t,n){return Vn(t.getFullYear()%100,n,2)},Y:function(t,n){return Vn(t.getFullYear()%1e4,n,4)},Z:ae,"%":function(){return"%"}},k={a:i,A:r,b:o,B:a,c:s,d:te,e:te,H:ee,I:ee,j:ne,L:oe,m:Qn,M:ie,p:h,S:re,U:Yn,w:jn,W:Xn,x:u,X:l,y:Kn,Y:Zn,Z:Gn,"%":se};return n}function Vn(t,n,e){var i=0>t?"-":"",r=(i?-t:t)+"",o=r.length;return i+(e>o?Array(e-o+1).join(n)+r:r)}function Un(t){return RegExp("^(?:"+t.map(es.requote).join("|")+")","i")}function Wn(t){for(var n=new l,e=-1,i=t.length;i>++e;)n.set(t[e].toLowerCase(),e);return n}function jn(t,n,e){fu.lastIndex=0;var i=fu.exec(n.slice(e,e+1));return i?(t.w=+i[0],e+i[0].length):-1}function Yn(t,n,e){fu.lastIndex=0;var i=fu.exec(n.slice(e));return i?(t.U=+i[0],e+i[0].length):-1}function Xn(t,n,e){fu.lastIndex=0;var i=fu.exec(n.slice(e));return i?(t.W=+i[0],e+i[0].length):-1}function Zn(t,n,e){fu.lastIndex=0;var i=fu.exec(n.slice(e,e+4));return i?(t.y=+i[0],e+i[0].length):-1}function Kn(t,n,e){fu.lastIndex=0;var i=fu.exec(n.slice(e,e+2));return i?(t.y=Jn(+i[0]),e+i[0].length):-1}function Gn(t,n,e){return/^[+-]\d{4}$/.test(n=n.slice(e,e+5))?(t.Z=-n,e+5):-1}function Jn(t){return t+(t>68?1900:2e3)}function Qn(t,n,e){fu.lastIndex=0;var i=fu.exec(n.slice(e,e+2));return i?(t.m=i[0]-1,e+i[0].length):-1}function te(t,n,e){fu.lastIndex=0;var i=fu.exec(n.slice(e,e+2));return i?(t.d=+i[0],e+i[0].length):-1}function ne(t,n,e){fu.lastIndex=0;var i=fu.exec(n.slice(e,e+3));return i?(t.j=+i[0],e+i[0].length):-1}function ee(t,n,e){fu.lastIndex=0;var i=fu.exec(n.slice(e,e+2));return i?(t.H=+i[0],e+i[0].length):-1}function ie(t,n,e){fu.lastIndex=0;var i=fu.exec(n.slice(e,e+2));return i?(t.M=+i[0],e+i[0].length):-1}function re(t,n,e){fu.lastIndex=0;var i=fu.exec(n.slice(e,e+2));return i?(t.S=+i[0],e+i[0].length):-1}function oe(t,n,e){fu.lastIndex=0;var i=fu.exec(n.slice(e,e+3));return i?(t.L=+i[0],e+i[0].length):-1}function ae(t){var n=t.getTimezoneOffset(),e=n>0?"-":"+",i=0|ds(n)/60,r=ds(n)%60;return e+Vn(i,"0",2)+Vn(r,"0",2)}function se(t,n,e){gu.lastIndex=0;var i=gu.exec(n.slice(e,e+1));return i?e+i[0].length:-1}function ue(t){for(var n=t.length,e=-1;n>++e;)t[e][0]=this(t[e][0]);return function(n){for(var e=0,i=t[e];!i[1](n);)i=t[++e];return i[0](n)}}function le(){}function he(t,n,e){var i=e.s=t+n,r=i-t,o=i-r;e.t=t-o+(n-r)}function ce(t,n){t&&vu.hasOwnProperty(t.type)&&vu[t.type](t,n)}function fe(t,n,e){var i,r=-1,o=t.length-e;for(n.lineStart();o>++r;)i=t[r],n.point(i[0],i[1],i[2]);n.lineEnd()}function ge(t,n){var e=-1,i=t.length;for(n.polygonStart();i>++e;)fe(t[e],n,1);n.polygonEnd()}function de(){function t(t,n){t*=Es,n=n*Es/2+As/4;var e=t-i,a=e>=0?1:-1,s=a*e,u=Math.cos(n),l=Math.sin(n),h=o*l,c=r*u+h*Math.cos(s),f=h*a*Math.sin(s);xu.add(Math.atan2(f,c)),i=t,r=u,o=l}var n,e,i,r,o;wu.point=function(a,s){wu.point=t,i=(n=a)*Es,r=Math.cos(s=(e=s)*Es/2+As/4),o=Math.sin(s)},wu.lineEnd=function(){t(n,e)}}function pe(t){var n=t[0],e=t[1],i=Math.cos(e);return[i*Math.cos(n),i*Math.sin(n),Math.sin(e)]}function me(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function ve(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function ye(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function xe(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function we(t){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Se(t){return[Math.atan2(t[1],t[0]),nn(t[2])]}function Me(t,n){return Ns>ds(t[0]-n[0])&&Ns>ds(t[1]-n[1])}function be(t,n){t*=Es;var e=Math.cos(n*=Es);Ce(e*Math.cos(t),e*Math.sin(t),Math.sin(n))}function Ce(t,n,e){++Su,bu+=(t-bu)/Su,Cu+=(n-Cu)/Su,Pu+=(e-Pu)/Su}function Pe(){function t(t,r){t*=Es;var o=Math.cos(r*=Es),a=o*Math.cos(t),s=o*Math.sin(t),u=Math.sin(r),l=Math.atan2(Math.sqrt((l=e*u-i*s)*l+(l=i*a-n*u)*l+(l=n*s-e*a)*l),n*a+e*s+i*u);Mu+=l,Ru+=l*(n+(n=a)),Tu+=l*(e+(e=s)),_u+=l*(i+(i=u)),Ce(n,e,i)}var n,e,i;Au.point=function(r,o){r*=Es;var a=Math.cos(o*=Es);n=a*Math.cos(r),e=a*Math.sin(r),i=Math.sin(o),Au.point=t,Ce(n,e,i)}}function Re(){Au.point=be}function Te(){function t(t,n){t*=Es;var e=Math.cos(n*=Es),a=e*Math.cos(t),s=e*Math.sin(t),u=Math.sin(n),l=r*u-o*s,h=o*a-i*u,c=i*s-r*a,f=Math.sqrt(l*l+h*h+c*c),g=i*a+r*s+o*u,d=f&&-tn(g)/f,p=Math.atan2(f,g);ku+=d*l,Nu+=d*h,Iu+=d*c,Mu+=p,Ru+=p*(i+(i=a)),Tu+=p*(r+(r=s)),_u+=p*(o+(o=u)),Ce(i,r,o)}var n,e,i,r,o;Au.point=function(a,s){n=a,e=s,Au.point=t,a*=Es;var u=Math.cos(s*=Es);i=u*Math.cos(a),r=u*Math.sin(a),o=Math.sin(s),Ce(i,r,o)},Au.lineEnd=function(){t(n,e),Au.lineEnd=Re,Au.point=be}}function _e(t,n){function e(e,i){return e=t(e,i),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,i){return e=n.invert(e,i),e&&t.invert(e[0],e[1])}),e}function ke(){return!0}function Ne(t,n,e,i,r){var o=[],a=[];if(t.forEach(function(t){if(!(0>=(n=t.length-1))){var n,e=t[0],i=t[n];if(Me(e,i)){r.lineStart();for(var s=0;n>s;++s)r.point((e=t[s])[0],e[1]);return void r.lineEnd()}var u=new Ae(e,t,null,!0),l=new Ae(e,null,u,!1);u.o=l,o.push(u),a.push(l),u=new Ae(i,t,null,!1),l=new Ae(i,null,u,!0),u.o=l,o.push(u),a.push(l)}}),a.sort(n),Ie(o),Ie(a),o.length){for(var s=0,u=e,l=a.length;l>s;++s)a[s].e=u=!u;for(var h,c,f=o[0];;){for(var g=f,d=!0;g.v;)if((g=g.n)===f)return;h=g.z,r.lineStart();do{if(g.v=g.o.v=!0,g.e){if(d)for(var s=0,l=h.length;l>s;++s)r.point((c=h[s])[0],c[1]);else i(g.x,g.n.x,1,r);g=g.n}else{if(d){h=g.p.z;for(var s=h.length-1;s>=0;--s)r.point((c=h[s])[0],c[1])}else i(g.x,g.p.x,-1,r);g=g.p}g=g.o,h=g.z,d=!d}while(!g.v);r.lineEnd()}}}function Ie(t){if(n=t.length){for(var n,e,i=0,r=t[0];n>++i;)r.n=e=t[i],e.p=r,r=e;r.n=e=t[0],e.p=r}}function Ae(t,n,e,i){this.x=t,this.z=n,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function ze(t,n,e,i){return function(r,o){function a(n,e){var i=r(n,e);t(n=i[0],e=i[1])&&o.point(n,e)}function s(t,n){var e=r(t,n);m.point(e[0],e[1])}function u(){y.point=s,m.lineStart()}function l(){y.point=a,m.lineEnd()}function h(t,n){p.push([t,n]);var e=r(t,n);w.point(e[0],e[1])}function c(){w.lineStart(),p=[]}function f(){h(p[0][0],p[0][1]),w.lineEnd();var t,n=w.clean(),e=x.buffer(),i=e.length;if(p.pop(),d.push(p),p=null,i)if(1&n){t=e[0];var r,i=t.length-1,a=-1;if(i>0){for(S||(o.polygonStart(),S=!0),o.lineStart();i>++a;)o.point((r=t[a])[0],r[1]);o.lineEnd()}}else i>1&&2&n&&e.push(e.pop().concat(e.shift())),g.push(e.filter($e))}var g,d,p,m=n(o),v=r.invert(i[0],i[1]),y={point:a,lineStart:u,lineEnd:l,polygonStart:function(){y.point=h,y.lineStart=c,y.lineEnd=f,g=[],d=[]},polygonEnd:function(){y.point=a,y.lineStart=u,y.lineEnd=l,g=es.merge(g);var t=He(v,d);g.length?(S||(o.polygonStart(),S=!0),Ne(g,Ee,t,e,o)):t&&(S||(o.polygonStart(),S=!0),o.lineStart(),e(null,null,1,o),o.lineEnd()),S&&(o.polygonEnd(),S=!1),g=d=null},sphere:function(){o.polygonStart(),o.lineStart(),e(null,null,1,o),o.lineEnd(),o.polygonEnd()}},x=De(),w=n(x),S=!1;return y}}function $e(t){return t.length>1}function De(){var t,n=[];return{lineStart:function(){n.push(t=[])},point:function(n,e){t.push([n,e])},lineEnd:S,buffer:function(){var e=n;return n=[],t=null,e},rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))}}}function Ee(t,n){return(0>(t=t.x)[0]?t[1]-Ds-Ns:Ds-t[1])-(0>(n=n.x)[0]?n[1]-Ds-Ns:Ds-n[1])}function Le(t){var n,e=0/0,i=0/0,r=0/0;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var s=o>0?As:-As,u=ds(o-e);Ns>ds(u-As)?(t.point(e,i=(i+a)/2>0?Ds:-Ds),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(o,i),n=0):r!==s&&u>=As&&(Ns>ds(e-r)&&(e-=r*Ns),Ns>ds(o-s)&&(o-=s*Ns),i=Be(e,i,o,a),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),n=0),t.point(e=o,i=a),r=s},lineEnd:function(){t.lineEnd(),e=i=0/0},clean:function(){return 2-n}}}function Be(t,n,e,i){var r,o,a=Math.sin(t-e);return ds(a)>Ns?Math.atan((Math.sin(n)*(o=Math.cos(i))*Math.sin(e)-Math.sin(i)*(r=Math.cos(n))*Math.sin(t))/(r*o*a)):(n+i)/2}function Fe(t,n,e,i){var r;if(null==t)r=e*Ds,i.point(-As,r),i.point(0,r),i.point(As,r),i.point(As,0),i.point(As,-r),i.point(0,-r),i.point(-As,-r),i.point(-As,0),i.point(-As,r);else if(ds(t[0]-n[0])>Ns){var o=t[0]<n[0]?As:-As;r=e*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(n[0],n[1])}function He(t,n){var e=t[0],i=t[1],r=[Math.sin(e),-Math.cos(e),0],o=0,a=0;xu.reset();for(var s=0,u=n.length;u>s;++s){var l=n[s],h=l.length;if(h)for(var c=l[0],f=c[0],g=c[1]/2+As/4,d=Math.sin(g),p=Math.cos(g),m=1;;){m===h&&(m=0),t=l[m];var v=t[0],y=t[1]/2+As/4,x=Math.sin(y),w=Math.cos(y),S=v-f,M=S>=0?1:-1,b=M*S,C=b>As,P=d*x;if(xu.add(Math.atan2(P*M*Math.sin(b),p*w+P*Math.cos(b))),o+=C?S+M*zs:S,C^f>=e^v>=e){var R=ve(pe(c),pe(t));we(R);var T=ve(r,R);we(T);var _=(C^S>=0?-1:1)*nn(T[2]);(i>_||i===_&&(R[0]||R[1]))&&(a+=C^S>=0?1:-1)}if(!m++)break;f=v,d=x,p=w,c=t}}return(-Ns>o||Ns>o&&0>xu)^1&a}function qe(t){function n(t,n){return Math.cos(t)*Math.cos(n)>o}function e(t){var e,o,u,l,h;return{lineStart:function(){l=u=!1,h=1},point:function(c,f){var g,d=[c,f],p=n(c,f),m=a?p?0:r(c,f):p?r(c+(0>c?As:-As),f):0;if(!e&&(l=u=p)&&t.lineStart(),p!==u&&(g=i(e,d),(Me(e,g)||Me(d,g))&&(d[0]+=Ns,d[1]+=Ns,p=n(d[0],d[1]))),p!==u)h=0,p?(t.lineStart(),g=i(d,e),t.point(g[0],g[1])):(g=i(e,d),t.point(g[0],g[1]),t.lineEnd()),e=g;else if(s&&e&&a^p){var v;m&o||!(v=i(d,e,!0))||(h=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!p||e&&Me(e,d)||t.point(d[0],d[1]),e=d,u=p,o=m},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return h|(l&&u)<<1}}}function i(t,n,e){var i=pe(t),r=pe(n),a=[1,0,0],s=ve(i,r),u=me(s,s),l=s[0],h=u-l*l;if(!h)return!e&&t;var c=o*u/h,f=-o*l/h,g=ve(a,s),d=xe(a,c),p=xe(s,f);ye(d,p);var m=g,v=me(d,m),y=me(m,m),x=v*v-y*(me(d,d)-1);if(!(0>x)){var w=Math.sqrt(x),S=xe(m,(-v-w)/y);if(ye(S,d),S=Se(S),!e)return S;var M,b=t[0],C=n[0],P=t[1],R=n[1];b>C&&(M=b,b=C,C=M);var T=C-b,_=Ns>ds(T-As),k=_||Ns>T;if(!_&&P>R&&(M=P,P=R,R=M),k?_?P+R>0^S[1]<(Ns>ds(S[0]-b)?P:R):S[1]>=P&&R>=S[1]:T>As^(S[0]>=b&&C>=S[0])){var N=xe(m,(-v+w)/y);return ye(N,d),[S,Se(N)]}}}function r(n,e){var i=a?t:As-t,r=0;return-i>n?r|=1:n>i&&(r|=2),-i>e?r|=4:e>i&&(r|=8),r}var o=Math.cos(t),a=o>0,s=ds(o)>Ns,u=di(t,6*Es);return ze(n,e,u,a?[0,-t]:[-As,t-As])}function Oe(t,n,e,i){return function(r){var o,a=r.a,s=r.b,u=a.x,l=a.y,h=s.x,c=s.y,f=0,g=1,d=h-u,p=c-l;if(o=t-u,d||!(o>0)){if(o/=d,0>d){if(f>o)return;g>o&&(g=o)}else if(d>0){if(o>g)return;o>f&&(f=o)}if(o=e-u,d||!(0>o)){if(o/=d,0>d){if(o>g)return;o>f&&(f=o)}else if(d>0){if(f>o)return;g>o&&(g=o)}if(o=n-l,p||!(o>0)){if(o/=p,0>p){if(f>o)return;g>o&&(g=o)}else if(p>0){if(o>g)return;o>f&&(f=o)}if(o=i-l,p||!(0>o)){if(o/=p,0>p){if(o>g)return;o>f&&(f=o)}else if(p>0){if(f>o)return;g>o&&(g=o)}return f>0&&(r.a={x:u+f*d,y:l+f*p}),1>g&&(r.b={x:u+g*d,y:l+g*p}),r}}}}}}function Ve(t,n,e,i){function r(i,r){return Ns>ds(i[0]-t)?r>0?0:3:Ns>ds(i[0]-e)?r>0?2:1:Ns>ds(i[1]-n)?r>0?1:0:r>0?3:2}function o(t,n){return a(t.x,n.x)}function a(t,n){var e=r(t,1),i=r(n,1);return e!==i?e-i:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(s){function u(t){for(var n=0,e=m.length,i=t[1],r=0;e>r;++r)for(var o,a=1,s=m[r],u=s.length,l=s[0];u>a;++a)o=s[a],i>=l[1]?o[1]>i&&Q(l,o,t)>0&&++n:i>=o[1]&&0>Q(l,o,t)&&--n,l=o;return 0!==n}function l(o,s,u,l){var h=0,c=0;if(null==o||(h=r(o,u))!==(c=r(s,u))||0>a(o,s)^u>0){do l.point(0===h||3===h?t:e,h>1?i:n);while((h=(h+u+4)%4)!==c)}else l.point(s[0],s[1])}function h(r,o){return r>=t&&e>=r&&o>=n&&i>=o}function c(t,n){h(t,n)&&s.point(t,n)}function f(){k.point=d,m&&m.push(v=[]),C=!0,b=!1,S=M=0/0}function g(){p&&(d(y,x),w&&b&&T.rejoin(),p.push(T.buffer())),k.point=c,b&&s.lineEnd()}function d(t,n){t=Math.max(-$u,Math.min($u,t)),n=Math.max(-$u,Math.min($u,n));var e=h(t,n);if(m&&v.push([t,n]),C)y=t,x=n,w=e,C=!1,e&&(s.lineStart(),s.point(t,n));else if(e&&b)s.point(t,n);else{var i={a:{x:S,y:M},b:{x:t,y:n}};_(i)?(b||(s.lineStart(),s.point(i.a.x,i.a.y)),s.point(i.b.x,i.b.y),e||s.lineEnd(),P=!1):e&&(s.lineStart(),s.point(t,n),P=!1)}S=t,M=n,b=e}var p,m,v,y,x,w,S,M,b,C,P,R=s,T=De(),_=Oe(t,n,e,i),k={point:c,lineStart:f,lineEnd:g,polygonStart:function(){s=T,p=[],m=[],P=!0},polygonEnd:function(){s=R,p=es.merge(p);var n=u([t,i]),e=P&&n,r=p.length;(e||r)&&(s.polygonStart(),e&&(s.lineStart(),l(null,null,1,s),s.lineEnd()),r&&Ne(p,o,n,l,s),s.polygonEnd()),p=m=v=null}};return k}}function Ue(t){var n=0,e=As/3,i=ai(t),r=i(n,e);return r.parallels=function(t){return arguments.length?i(n=t[0]*As/180,e=t[1]*As/180):[180*(n/As),180*(e/As)]},r}function We(t,n){function e(t,n){var e=Math.sqrt(o-2*r*Math.sin(n))/r;return[e*Math.sin(t*=r),a-e*Math.cos(t)]}var i=Math.sin(t),r=(i+Math.sin(n))/2,o=1+i*(2*r-i),a=Math.sqrt(o)/r;return e.invert=function(t,n){var e=a-n;return[Math.atan2(t,e)/r,nn((o-(t*t+e*e)*r*r)/(2*r))]},e}function je(){function t(t,n){Eu+=r*t-i*n,i=t,r=n}var n,e,i,r;qu.point=function(o,a){qu.point=t,n=i=o,e=r=a},qu.lineEnd=function(){t(n,e)}}function Ye(t,n){Lu>t&&(Lu=t),t>Fu&&(Fu=t),Bu>n&&(Bu=n),n>Hu&&(Hu=n)}function Xe(){function t(t,n){a.push("M",t,",",n,o)}function n(t,n){a.push("M",t,",",n),s.point=e}function e(t,n){a.push("L",t,",",n)}function i(){s.point=t}function r(){a.push("Z")}var o=Ze(4.5),a=[],s={point:t,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(t){return o=Ze(t),s},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return s}function Ze(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ke(t,n){bu+=t,Cu+=n,++Pu}function Ge(){function t(t,i){var r=t-n,o=i-e,a=Math.sqrt(r*r+o*o);Ru+=a*(n+t)/2,Tu+=a*(e+i)/2,_u+=a,Ke(n=t,e=i)}var n,e;Vu.point=function(i,r){Vu.point=t,Ke(n=i,e=r)}}function Je(){Vu.point=Ke}function Qe(){function t(t,n){var e=t-i,o=n-r,a=Math.sqrt(e*e+o*o);Ru+=a*(i+t)/2,Tu+=a*(r+n)/2,_u+=a,a=r*t-i*n,ku+=a*(i+t),Nu+=a*(r+n),Iu+=3*a,Ke(i=t,r=n)}var n,e,i,r;Vu.point=function(o,a){Vu.point=t,Ke(n=i=o,e=r=a)},Vu.lineEnd=function(){t(n,e)}}function ti(t){function n(n,e){t.moveTo(n+a,e),t.arc(n,e,a,0,zs)}function e(n,e){t.moveTo(n,e),s.point=i}function i(n,e){t.lineTo(n,e)}function r(){s.point=n}function o(){t.closePath()}var a=4.5,s={point:n,lineStart:function(){s.point=e},lineEnd:r,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=r,s.point=n},pointRadius:function(t){return a=t,s},result:S};return s}function ni(t){function n(t){return(s?i:e)(t)}function e(n){return ri(n,function(e,i){e=t(e,i),n.point(e[0],e[1])})}function i(n){function e(e,i){e=t(e,i),n.point(e[0],e[1])}function i(){x=0/0,C.point=o,n.lineStart()}function o(e,i){var o=pe([e,i]),a=t(e,i);r(x,w,y,S,M,b,x=a[0],w=a[1],y=e,S=o[0],M=o[1],b=o[2],s,n),n.point(x,w)}function a(){C.point=e,n.lineEnd()}function u(){i(),C.point=l,C.lineEnd=h}function l(t,n){o(c=t,f=n),g=x,d=w,p=S,m=M,v=b,C.point=o}function h(){r(x,w,y,S,M,b,g,d,c,p,m,v,s,n),C.lineEnd=a,a()}var c,f,g,d,p,m,v,y,x,w,S,M,b,C={point:e,lineStart:i,lineEnd:a,polygonStart:function(){n.polygonStart(),C.lineStart=u
},polygonEnd:function(){n.polygonEnd(),C.lineStart=i}};return C}function r(n,e,i,s,u,l,h,c,f,g,d,p,m,v){var y=h-n,x=c-e,w=y*y+x*x;if(w>4*o&&m--){var S=s+g,M=u+d,b=l+p,C=Math.sqrt(S*S+M*M+b*b),P=Math.asin(b/=C),R=Ns>ds(ds(b)-1)||Ns>ds(i-f)?(i+f)/2:Math.atan2(M,S),T=t(R,P),_=T[0],k=T[1],N=_-n,I=k-e,A=x*N-y*I;(A*A/w>o||ds((y*N+x*I)/w-.5)>.3||a>s*g+u*d+l*p)&&(r(n,e,i,s,u,l,_,k,R,S/=C,M/=C,b,m,v),v.point(_,k),r(_,k,R,S,M,b,h,c,f,g,d,p,m,v))}}var o=.5,a=Math.cos(30*Es),s=16;return n.precision=function(t){return arguments.length?(s=(o=t*t)>0&&16,n):Math.sqrt(o)},n}function ei(t){var n=ni(function(n,e){return t([n*Ls,e*Ls])});return function(t){return si(n(t))}}function ii(t){this.stream=t}function ri(t,n){return{point:n,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function oi(t){return ai(function(){return t})()}function ai(t){function n(t){return t=s(t[0]*Es,t[1]*Es),[t[0]*f+u,l-t[1]*f]}function e(t){return t=s.invert((t[0]-u)/f,(l-t[1])/f),t&&[t[0]*Ls,t[1]*Ls]}function i(){s=_e(a=hi(v,x,w),o);var t=o(p,m);return u=g-t[0]*f,l=d+t[1]*f,r()}function r(){return h&&(h.valid=!1,h=null),n}var o,a,s,u,l,h,c=ni(function(t,n){return t=o(t,n),[t[0]*f+u,l-t[1]*f]}),f=150,g=480,d=250,p=0,m=0,v=0,x=0,w=0,S=zu,M=y,b=null,C=null;return n.stream=function(t){return h&&(h.valid=!1),h=si(S(a,c(M(t)))),h.valid=!0,h},n.clipAngle=function(t){return arguments.length?(S=null==t?(b=t,zu):qe((b=+t)*Es),r()):b},n.clipExtent=function(t){return arguments.length?(C=t,M=t?Ve(t[0][0],t[0][1],t[1][0],t[1][1]):y,r()):C},n.scale=function(t){return arguments.length?(f=+t,i()):f},n.translate=function(t){return arguments.length?(g=+t[0],d=+t[1],i()):[g,d]},n.center=function(t){return arguments.length?(p=t[0]%360*Es,m=t[1]%360*Es,i()):[p*Ls,m*Ls]},n.rotate=function(t){return arguments.length?(v=t[0]%360*Es,x=t[1]%360*Es,w=t.length>2?t[2]%360*Es:0,i()):[v*Ls,x*Ls,w*Ls]},es.rebind(n,c,"precision"),function(){return o=t.apply(this,arguments),n.invert=o.invert&&e,i()}}function si(t){return ri(t,function(n,e){t.point(n*Es,e*Es)})}function ui(t,n){return[t,n]}function li(t,n){return[t>As?t-zs:-As>t?t+zs:t,n]}function hi(t,n,e){return t?n||e?_e(fi(t),gi(n,e)):fi(t):n||e?gi(n,e):li}function ci(t){return function(n,e){return n+=t,[n>As?n-zs:-As>n?n+zs:n,e]}}function fi(t){var n=ci(t);return n.invert=ci(-t),n}function gi(t,n){function e(t,n){var e=Math.cos(n),s=Math.cos(t)*e,u=Math.sin(t)*e,l=Math.sin(n),h=l*i+s*r;return[Math.atan2(u*o-h*a,s*i-l*r),nn(h*o+u*a)]}var i=Math.cos(t),r=Math.sin(t),o=Math.cos(n),a=Math.sin(n);return e.invert=function(t,n){var e=Math.cos(n),s=Math.cos(t)*e,u=Math.sin(t)*e,l=Math.sin(n),h=l*o-u*a;return[Math.atan2(u*o+l*a,s*i+h*r),nn(h*i-s*r)]},e}function di(t,n){var e=Math.cos(t),i=Math.sin(t);return function(r,o,a,s){var u=a*n;null!=r?(r=pi(e,r),o=pi(e,o),(a>0?o>r:r>o)&&(r+=a*zs)):(r=t+a*zs,o=t-.5*u);for(var l,h=r;a>0?h>o:o>h;h-=u)s.point((l=Se([e,-i*Math.cos(h),-i*Math.sin(h)]))[0],l[1])}}function pi(t,n){var e=pe(n);e[0]-=t,we(e);var i=tn(-e[1]);return((0>-e[2]?-i:i)+2*Math.PI-Ns)%(2*Math.PI)}function mi(t,n,e){var i=es.range(t,n-Ns,e).concat(n);return function(t){return i.map(function(n){return[t,n]})}}function vi(t,n,e){var i=es.range(t,n-Ns,e).concat(n);return function(t){return i.map(function(n){return[n,t]})}}function yi(t){return t.source}function xi(t){return t.target}function wi(t,n,e,i){var r=Math.cos(n),o=Math.sin(n),a=Math.cos(i),s=Math.sin(i),u=r*Math.cos(t),l=r*Math.sin(t),h=a*Math.cos(e),c=a*Math.sin(e),f=2*Math.asin(Math.sqrt(an(i-n)+r*a*an(e-t))),g=1/Math.sin(f),d=f?function(t){var n=Math.sin(t*=f)*g,e=Math.sin(f-t)*g,i=e*u+n*h,r=e*l+n*c,a=e*o+n*s;return[Math.atan2(r,i)*Ls,Math.atan2(a,Math.sqrt(i*i+r*r))*Ls]}:function(){return[t*Ls,n*Ls]};return d.distance=f,d}function Si(){function t(t,r){var o=Math.sin(r*=Es),a=Math.cos(r),s=ds((t*=Es)-n),u=Math.cos(s);Uu+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=i*o-e*a*u)*s),e*o+i*a*u),n=t,e=o,i=a}var n,e,i;Wu.point=function(r,o){n=r*Es,e=Math.sin(o*=Es),i=Math.cos(o),Wu.point=t},Wu.lineEnd=function(){Wu.point=Wu.lineEnd=S}}function Mi(t,n){function e(n,e){var i=Math.cos(n),r=Math.cos(e),o=t(i*r);return[o*r*Math.sin(n),o*Math.sin(e)]}return e.invert=function(t,e){var i=Math.sqrt(t*t+e*e),r=n(i),o=Math.sin(r),a=Math.cos(r);return[Math.atan2(t*o,i*a),Math.asin(i&&e*o/i)]},e}function bi(t,n){function e(t,n){a>0?-Ds+Ns>n&&(n=-Ds+Ns):n>Ds-Ns&&(n=Ds-Ns);var e=a/Math.pow(r(n),o);return[e*Math.sin(o*t),a-e*Math.cos(o*t)]}var i=Math.cos(t),r=function(t){return Math.tan(As/4+t/2)},o=t===n?Math.sin(t):Math.log(i/Math.cos(n))/Math.log(r(n)/r(t)),a=i*Math.pow(r(t),o)/o;return o?(e.invert=function(t,n){var e=a-n,i=J(o)*Math.sqrt(t*t+e*e);return[Math.atan2(t,e)/o,2*Math.atan(Math.pow(a/i,1/o))-Ds]},e):Pi}function Ci(t,n){function e(t,n){var e=o-n;return[e*Math.sin(r*t),o-e*Math.cos(r*t)]}var i=Math.cos(t),r=t===n?Math.sin(t):(i-Math.cos(n))/(n-t),o=i/r+t;return Ns>ds(r)?ui:(e.invert=function(t,n){var e=o-n;return[Math.atan2(t,e)/r,o-J(r)*Math.sqrt(t*t+e*e)]},e)}function Pi(t,n){return[t,Math.log(Math.tan(As/4+n/2))]}function Ri(t){var n,e=oi(t),i=e.scale,r=e.translate,o=e.clipExtent;return e.scale=function(){var t=i.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.translate=function(){var t=r.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.clipExtent=function(t){var a=o.apply(e,arguments);if(a===e){if(n=null==t){var s=As*i(),u=r();o([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else n&&(a=null);return a},e.clipExtent(null)}function Ti(t,n){return[Math.log(Math.tan(As/4+n/2)),-t]}function _i(t){return t[0]}function ki(t){return t[1]}function Ni(t){for(var n=t.length,e=[0,1],i=2,r=2;n>r;r++){for(;i>1&&0>=Q(t[e[i-2]],t[e[i-1]],t[r]);)--i;e[i++]=r}return e.slice(0,i)}function Ii(t,n){return t[0]-n[0]||t[1]-n[1]}function Ai(t,n,e){return(e[0]-n[0])*(t[1]-n[1])<(e[1]-n[1])*(t[0]-n[0])}function zi(t,n,e,i){var r=t[0],o=e[0],a=n[0]-r,s=i[0]-o,u=t[1],l=e[1],h=n[1]-u,c=i[1]-l,f=(s*(u-l)-c*(r-o))/(c*a-s*h);return[r+f*a,u+f*h]}function $i(t){var n=t[0],e=t[t.length-1];return!(n[0]-e[0]||n[1]-e[1])}function Di(){er(this),this.edge=this.site=this.circle=null}function Ei(t){var n=il.pop()||new Di;return n.site=t,n}function Li(t){Yi(t),tl.remove(t),il.push(t),er(t)}function Bi(t){var n=t.circle,e=n.x,i=n.cy,r={x:e,y:i},o=t.P,a=t.N,s=[t];Li(t);for(var u=o;u.circle&&Ns>ds(e-u.circle.x)&&Ns>ds(i-u.circle.cy);)o=u.P,s.unshift(u),Li(u),u=o;s.unshift(u),Yi(u);for(var l=a;l.circle&&Ns>ds(e-l.circle.x)&&Ns>ds(i-l.circle.cy);)a=l.N,s.push(l),Li(l),l=a;s.push(l),Yi(l);var h,c=s.length;for(h=1;c>h;++h)l=s[h],u=s[h-1],Qi(l.edge,u.site,l.site,r);u=s[0],l=s[c-1],l.edge=Gi(u.site,l.site,null,r),ji(u),ji(l)}function Fi(t){for(var n,e,i,r,o=t.x,a=t.y,s=tl._;s;)if(i=Hi(s,a)-o,i>Ns)s=s.L;else{if(r=o-qi(s,a),!(r>Ns)){i>-Ns?(n=s.P,e=s):r>-Ns?(n=s,e=s.N):n=e=s;break}if(!s.R){n=s;break}s=s.R}var u=Ei(t);if(tl.insert(n,u),n||e){if(n===e)return Yi(n),e=Ei(n.site),tl.insert(u,e),u.edge=e.edge=Gi(n.site,u.site),ji(n),void ji(e);if(!e)return void(u.edge=Gi(n.site,u.site));Yi(n),Yi(e);var l=n.site,h=l.x,c=l.y,f=t.x-h,g=t.y-c,d=e.site,p=d.x-h,m=d.y-c,v=2*(f*m-g*p),y=f*f+g*g,x=p*p+m*m,w={x:(m*y-g*x)/v+h,y:(f*x-p*y)/v+c};Qi(e.edge,l,d,w),u.edge=Gi(l,t,null,w),e.edge=Gi(t,d,null,w),ji(n),ji(e)}}function Hi(t,n){var e=t.site,i=e.x,r=e.y,o=r-n;if(!o)return i;var a=t.P;if(!a)return-1/0;e=a.site;var s=e.x,u=e.y,l=u-n;if(!l)return s;var h=s-i,c=1/o-1/l,f=h/l;return c?(-f+Math.sqrt(f*f-2*c*(h*h/(-2*l)-u+l/2+r-o/2)))/c+i:(i+s)/2}function qi(t,n){var e=t.N;if(e)return Hi(e,n);var i=t.site;return i.y===n?i.x:1/0}function Oi(t){this.site=t,this.edges=[]}function Vi(t){for(var n,e,i,r,o,a,s,u,l,h,c=t[0][0],f=t[1][0],g=t[0][1],d=t[1][1],p=Qu,m=p.length;m--;)if(o=p[m],o&&o.prepare())for(s=o.edges,u=s.length,a=0;u>a;)h=s[a].end(),i=h.x,r=h.y,l=s[++a%u].start(),n=l.x,e=l.y,(ds(i-n)>Ns||ds(r-e)>Ns)&&(s.splice(a,0,new tr(Ji(o.site,h,Ns>ds(i-c)&&d-r>Ns?{x:c,y:Ns>ds(n-c)?e:d}:Ns>ds(r-d)&&f-i>Ns?{x:Ns>ds(e-d)?n:f,y:d}:Ns>ds(i-f)&&r-g>Ns?{x:f,y:Ns>ds(n-f)?e:g}:Ns>ds(r-g)&&i-c>Ns?{x:Ns>ds(e-g)?n:c,y:g}:null),o.site,null)),++u)}function Ui(t,n){return n.angle-t.angle}function Wi(){er(this),this.x=this.y=this.arc=this.site=this.cy=null}function ji(t){var n=t.P,e=t.N;if(n&&e){var i=n.site,r=t.site,o=e.site;if(i!==o){var a=r.x,s=r.y,u=i.x-a,l=i.y-s,h=o.x-a,c=o.y-s,f=2*(u*c-l*h);if(!(f>=-Is)){var g=u*u+l*l,d=h*h+c*c,p=(c*g-l*d)/f,m=(u*d-h*g)/f,c=m+s,v=rl.pop()||new Wi;v.arc=t,v.site=r,v.x=p+a,v.y=c+Math.sqrt(p*p+m*m),v.cy=c,t.circle=v;for(var y=null,x=el._;x;)if(v.y<x.y||v.y===x.y&&v.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}el.insert(y,v),y||(nl=v)}}}}function Yi(t){var n=t.circle;n&&(n.P||(nl=n.N),el.remove(n),rl.push(n),er(n),t.circle=null)}function Xi(t){for(var n,e=Ju,i=Oe(t[0][0],t[0][1],t[1][0],t[1][1]),r=e.length;r--;)n=e[r],(!Zi(n,t)||!i(n)||Ns>ds(n.a.x-n.b.x)&&Ns>ds(n.a.y-n.b.y))&&(n.a=n.b=null,e.splice(r,1))}function Zi(t,n){var e=t.b;if(e)return!0;var i,r,o=t.a,a=n[0][0],s=n[1][0],u=n[0][1],l=n[1][1],h=t.l,c=t.r,f=h.x,g=h.y,d=c.x,p=c.y,m=(f+d)/2,v=(g+p)/2;if(p===g){if(a>m||m>=s)return;if(f>d){if(o){if(o.y>=l)return}else o={x:m,y:u};e={x:m,y:l}}else{if(o){if(u>o.y)return}else o={x:m,y:l};e={x:m,y:u}}}else if(i=(f-d)/(p-g),r=v-i*m,-1>i||i>1)if(f>d){if(o){if(o.y>=l)return}else o={x:(u-r)/i,y:u};e={x:(l-r)/i,y:l}}else{if(o){if(u>o.y)return}else o={x:(l-r)/i,y:l};e={x:(u-r)/i,y:u}}else if(p>g){if(o){if(o.x>=s)return}else o={x:a,y:i*a+r};e={x:s,y:i*s+r}}else{if(o){if(a>o.x)return}else o={x:s,y:i*s+r};e={x:a,y:i*a+r}}return t.a=o,t.b=e,!0}function Ki(t,n){this.l=t,this.r=n,this.a=this.b=null}function Gi(t,n,e,i){var r=new Ki(t,n);return Ju.push(r),e&&Qi(r,t,n,e),i&&Qi(r,n,t,i),Qu[t.i].edges.push(new tr(r,t,n)),Qu[n.i].edges.push(new tr(r,n,t)),r}function Ji(t,n,e){var i=new Ki(t,null);return i.a=n,i.b=e,Ju.push(i),i}function Qi(t,n,e,i){t.a||t.b?t.l===e?t.b=i:t.a=i:(t.a=i,t.l=n,t.r=e)}function tr(t,n,e){var i=t.a,r=t.b;this.edge=t,this.site=n,this.angle=e?Math.atan2(e.y-n.y,e.x-n.x):t.l===n?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function nr(){this._=null}function er(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ir(t,n){var e=n,i=n.R,r=e.U;r?r.L===e?r.L=i:r.R=i:t._=i,i.U=r,e.U=i,e.R=i.L,e.R&&(e.R.U=e),i.L=e}function rr(t,n){var e=n,i=n.L,r=e.U;r?r.L===e?r.L=i:r.R=i:t._=i,i.U=r,e.U=i,e.L=i.R,e.L&&(e.L.U=e),i.R=e}function or(t){for(;t.L;)t=t.L;return t}function ar(t,n){var e,i,r,o=t.sort(sr).pop();for(Ju=[],Qu=Array(t.length),tl=new nr,el=new nr;;)if(r=nl,o&&(!r||o.y<r.y||o.y===r.y&&o.x<r.x))(o.x!==e||o.y!==i)&&(Qu[o.i]=new Oi(o),Fi(o),e=o.x,i=o.y),o=t.pop();else{if(!r)break;Bi(r.arc)}n&&(Xi(n),Vi(n));var a={cells:Qu,edges:Ju};return tl=el=Ju=Qu=null,a}function sr(t,n){return n.y-t.y||n.x-t.x}function ur(t,n,e){return(t.x-e.x)*(n.y-t.y)-(t.x-n.x)*(e.y-t.y)}function lr(t){return t.x}function hr(t){return t.y}function cr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function fr(t,n,e,i,r,o){if(!t(n,e,i,r,o)){var a=.5*(e+r),s=.5*(i+o),u=n.nodes;u[0]&&fr(t,u[0],e,i,a,s),u[1]&&fr(t,u[1],a,i,r,s),u[2]&&fr(t,u[2],e,s,a,o),u[3]&&fr(t,u[3],a,s,r,o)}}function gr(t,n,e,i,r,o,a){var s,u=1/0;return function l(t,h,c,f,g){if(!(h>o||c>a||i>f||r>g)){if(d=t.point){var d,p=n-t.x,m=e-t.y,v=p*p+m*m;if(u>v){var y=Math.sqrt(u=v);i=n-y,r=e-y,o=n+y,a=e+y,s=d}}for(var x=t.nodes,w=.5*(h+f),S=.5*(c+g),M=n>=w,b=e>=S,C=b<<1|M,P=C+4;P>C;++C)if(t=x[3&C])switch(3&C){case 0:l(t,h,c,w,S);break;case 1:l(t,w,c,f,S);break;case 2:l(t,h,S,w,g);break;case 3:l(t,w,S,f,g)}}}(t,i,r,o,a),s}function dr(t,n){t=es.rgb(t),n=es.rgb(n);var e=t.r,i=t.g,r=t.b,o=n.r-e,a=n.g-i,s=n.b-r;return function(t){return"#"+Sn(Math.round(e+o*t))+Sn(Math.round(i+a*t))+Sn(Math.round(r+s*t))}}function pr(t,n){var e,i={},r={};for(e in t)e in n?i[e]=yr(t[e],n[e]):r[e]=t[e];for(e in n)e in t||(r[e]=n[e]);return function(t){for(e in i)r[e]=i[e](t);return r}}function mr(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function vr(t,n){var e,i,r,o=al.lastIndex=sl.lastIndex=0,a=-1,s=[],u=[];for(t+="",n+="";(e=al.exec(t))&&(i=sl.exec(n));)(r=i.index)>o&&(r=n.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(e=e[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,u.push({i:a,x:mr(e,i)})),o=sl.lastIndex;return n.length>o&&(r=n.slice(o),s[a]?s[a]+=r:s[++a]=r),2>s.length?u[0]?(n=u[0].x,function(t){return n(t)+""}):function(){return n}:(n=u.length,function(t){for(var e,i=0;n>i;++i)s[(e=u[i]).i]=e.x(t);return s.join("")})}function yr(t,n){for(var e,i=es.interpolators.length;--i>=0&&!(e=es.interpolators[i](t,n)););return e}function xr(t,n){var e,i=[],r=[],o=t.length,a=n.length,s=Math.min(t.length,n.length);for(e=0;s>e;++e)i.push(yr(t[e],n[e]));for(;o>e;++e)r[e]=t[e];for(;a>e;++e)r[e]=n[e];return function(t){for(e=0;s>e;++e)r[e]=i[e](t);return r}}function wr(t){return function(n){return 0>=n?0:n>=1?1:t(n)}}function Sr(t){return function(n){return 1-t(1-n)}}function Mr(t){return function(n){return.5*(.5>n?t(2*n):2-t(2-2*n))}}function br(t){return t*t}function Cr(t){return t*t*t}function Pr(t){if(0>=t)return 0;if(t>=1)return 1;var n=t*t,e=n*t;return 4*(.5>t?e:3*(t-n)+e-.75)}function Rr(t){return function(n){return Math.pow(n,t)}}function Tr(t){return 1-Math.cos(t*Ds)}function _r(t){return Math.pow(2,10*(t-1))}function kr(t){return 1-Math.sqrt(1-t*t)}function Nr(t,n){var e;return 2>arguments.length&&(n=.45),arguments.length?e=n/zs*Math.asin(1/t):(t=1,e=n/4),function(i){return 1+t*Math.pow(2,-10*i)*Math.sin((i-e)*zs/n)}}function Ir(t){return t||(t=1.70158),function(n){return n*n*((t+1)*n-t)}}function Ar(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function zr(t,n){t=es.hcl(t),n=es.hcl(n);var e=t.h,i=t.c,r=t.l,o=n.h-e,a=n.c-i,s=n.l-r;return isNaN(a)&&(a=0,i=isNaN(i)?n.c:i),isNaN(o)?(o=0,e=isNaN(e)?n.h:e):o>180?o-=360:-180>o&&(o+=360),function(t){return cn(e+o*t,i+a*t,r+s*t)+""}}function $r(t,n){t=es.hsl(t),n=es.hsl(n);var e=t.h,i=t.s,r=t.l,o=n.h-e,a=n.s-i,s=n.l-r;return isNaN(a)&&(a=0,i=isNaN(i)?n.s:i),isNaN(o)?(o=0,e=isNaN(e)?n.h:e):o>180?o-=360:-180>o&&(o+=360),function(t){return ln(e+o*t,i+a*t,r+s*t)+""}}function Dr(t,n){t=es.lab(t),n=es.lab(n);var e=t.l,i=t.a,r=t.b,o=n.l-e,a=n.a-i,s=n.b-r;return function(t){return gn(e+o*t,i+a*t,r+s*t)+""}}function Er(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function Lr(t){var n=[t.a,t.b],e=[t.c,t.d],i=Fr(n),r=Br(n,e),o=Fr(Hr(e,n,-r))||0;n[0]*e[1]<e[0]*n[1]&&(n[0]*=-1,n[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(n[1],n[0]):Math.atan2(-e[0],e[1]))*Ls,this.translate=[t.e,t.f],this.scale=[i,o],this.skew=o?Math.atan2(r,o)*Ls:0}function Br(t,n){return t[0]*n[0]+t[1]*n[1]}function Fr(t){var n=Math.sqrt(Br(t,t));return n&&(t[0]/=n,t[1]/=n),n}function Hr(t,n,e){return t[0]+=e*n[0],t[1]+=e*n[1],t}function qr(t,n){var e,i=[],r=[],o=es.transform(t),a=es.transform(n),s=o.translate,u=a.translate,l=o.rotate,h=a.rotate,c=o.skew,f=a.skew,g=o.scale,d=a.scale;return s[0]!=u[0]||s[1]!=u[1]?(i.push("translate(",null,",",null,")"),r.push({i:1,x:mr(s[0],u[0])},{i:3,x:mr(s[1],u[1])})):i.push(u[0]||u[1]?"translate("+u+")":""),l!=h?(l-h>180?h+=360:h-l>180&&(l+=360),r.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:mr(l,h)})):h&&i.push(i.pop()+"rotate("+h+")"),c!=f?r.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:mr(c,f)}):f&&i.push(i.pop()+"skewX("+f+")"),g[0]!=d[0]||g[1]!=d[1]?(e=i.push(i.pop()+"scale(",null,",",null,")"),r.push({i:e-4,x:mr(g[0],d[0])},{i:e-2,x:mr(g[1],d[1])})):(1!=d[0]||1!=d[1])&&i.push(i.pop()+"scale("+d+")"),e=r.length,function(t){for(var n,o=-1;e>++o;)i[(n=r[o]).i]=n.x(t);return i.join("")}}function Or(t,n){return n=(n-=t=+t)||1/n,function(e){return(e-t)/n}}function Vr(t,n){return n=(n-=t=+t)||1/n,function(e){return Math.max(0,Math.min(1,(e-t)/n))}}function Ur(t){for(var n=t.source,e=t.target,i=jr(n,e),r=[n];n!==i;)n=n.parent,r.push(n);for(var o=r.length;e!==i;)r.splice(o,0,e),e=e.parent;return r}function Wr(t){for(var n=[],e=t.parent;null!=e;)n.push(t),t=e,e=e.parent;return n.push(t),n}function jr(t,n){if(t===n)return t;for(var e=Wr(t),i=Wr(n),r=e.pop(),o=i.pop(),a=null;r===o;)a=r,r=e.pop(),o=i.pop();return a}function Yr(t){t.fixed|=2}function Xr(t){t.fixed&=-7}function Zr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Kr(t){t.fixed&=-5}function Gr(t,n,e){var i=0,r=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,s=a.length,u=-1;s>++u;)o=a[u],null!=o&&(Gr(o,n,e),t.charge+=o.charge,i+=o.charge*o.cx,r+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var l=n*e[t.point.index];t.charge+=t.pointCharge=l,i+=l*t.point.x,r+=l*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}function Jr(t,n){return es.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=ro,t}function Qr(t,n){for(var e=[t];null!=(t=e.pop());)if(n(t),(r=t.children)&&(i=r.length))for(var i,r;--i>=0;)e.push(r[i])}function to(t,n){for(var e=[t],i=[];null!=(t=e.pop());)if(i.push(t),(o=t.children)&&(r=o.length))for(var r,o,a=-1;r>++a;)e.push(o[a]);for(;null!=(t=i.pop());)n(t)}function no(t){return t.children}function eo(t){return t.value}function io(t,n){return n.value-t.value}function ro(t){return es.merge(t.map(function(t){return(t.children||[]).map(function(n){return{source:t,target:n}})}))}function oo(t){return t.x}function ao(t){return t.y}function so(t,n,e){t.y0=n,t.y=e}function uo(t){return es.range(t.length)}function lo(t){for(var n=-1,e=t[0].length,i=[];e>++n;)i[n]=0;return i}function ho(t){for(var n,e=1,i=0,r=t[0][1],o=t.length;o>e;++e)(n=t[e][1])>r&&(i=e,r=n);return i}function co(t){return t.reduce(fo,0)}function fo(t,n){return t+n[1]}function go(t,n){return po(t,Math.ceil(Math.log(n.length)/Math.LN2+1))}function po(t,n){for(var e=-1,i=+t[0],r=(t[1]-i)/n,o=[];n>=++e;)o[e]=r*e+i;return o}function mo(t){return[es.min(t),es.max(t)]}function vo(t,n){return t.value-n.value}function yo(t,n){var e=t._pack_next;t._pack_next=n,n._pack_prev=t,n._pack_next=e,e._pack_prev=n}function xo(t,n){t._pack_next=n,n._pack_prev=t}function wo(t,n){var e=n.x-t.x,i=n.y-t.y,r=t.r+n.r;return.999*r*r>e*e+i*i}function So(t){function n(t){h=Math.min(t.x-t.r,h),c=Math.max(t.x+t.r,c),f=Math.min(t.y-t.r,f),g=Math.max(t.y+t.r,g)}if((e=t.children)&&(l=e.length)){var e,i,r,o,a,s,u,l,h=1/0,c=-1/0,f=1/0,g=-1/0;if(e.forEach(Mo),i=e[0],i.x=-i.r,i.y=0,n(i),l>1&&(r=e[1],r.x=r.r,r.y=0,n(r),l>2))for(o=e[2],Po(i,r,o),n(o),yo(i,o),i._pack_prev=o,yo(o,r),r=i._pack_next,a=3;l>a;a++){Po(i,r,o=e[a]);var d=0,p=1,m=1;for(s=r._pack_next;s!==r;s=s._pack_next,p++)if(wo(s,o)){d=1;break}if(1==d)for(u=i._pack_prev;u!==s._pack_prev&&!wo(u,o);u=u._pack_prev,m++);d?(m>p||p==m&&r.r<i.r?xo(i,r=s):xo(i=u,r),a--):(yo(i,o),r=o,n(o))}var v=(h+c)/2,y=(f+g)/2,x=0;for(a=0;l>a;a++)o=e[a],o.x-=v,o.y-=y,x=Math.max(x,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=x,e.forEach(bo)}}function Mo(t){t._pack_next=t._pack_prev=t}function bo(t){delete t._pack_next,delete t._pack_prev}function Co(t,n,e,i){var r=t.children;if(t.x=n+=i*t.x,t.y=e+=i*t.y,t.r*=i,r)for(var o=-1,a=r.length;a>++o;)Co(r[o],n,e,i)}function Po(t,n,e){var i=t.r+e.r,r=n.x-t.x,o=n.y-t.y;if(i&&(r||o)){var a=n.r+e.r,s=r*r+o*o;a*=a,i*=i;var u=.5+(i-a)/(2*s),l=Math.sqrt(Math.max(0,2*a*(i+s)-(i-=s)*i-a*a))/(2*s);e.x=t.x+u*r+l*o,e.y=t.y+u*o-l*r}else e.x=t.x+i,e.y=t.y}function Ro(t,n){return t.parent==n.parent?1:2}function To(t){var n=t.children;return n.length?n[0]:t.t}function _o(t){var n,e=t.children;return(n=e.length)?e[n-1]:t.t}function ko(t,n,e){var i=e/(n.i-t.i);n.c-=i,n.s+=e,t.c+=i,n.z+=e,n.m+=e}function No(t){for(var n,e=0,i=0,r=t.children,o=r.length;--o>=0;)n=r[o],n.z+=e,n.m+=e,e+=n.s+(i+=n.c)}function Io(t,n,e){return t.a.parent===n.parent?t.a:e}function Ao(t){return 1+es.max(t,function(t){return t.y})}function zo(t){return t.reduce(function(t,n){return t+n.x},0)/t.length}function $o(t){var n=t.children;return n&&n.length?$o(n[0]):t}function Do(t){var n,e=t.children;return e&&(n=e.length)?Do(e[n-1]):t}function Eo(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Lo(t,n){var e=t.x+n[3],i=t.y+n[0],r=t.dx-n[1]-n[3],o=t.dy-n[0]-n[2];return 0>r&&(e+=r/2,r=0),0>o&&(i+=o/2,o=0),{x:e,y:i,dx:r,dy:o}}function Bo(t){var n=t[0],e=t[t.length-1];return e>n?[n,e]:[e,n]}function Fo(t){return t.rangeExtent?t.rangeExtent():Bo(t.range())}function Ho(t,n,e,i){var r=e(t[0],t[1]),o=i(n[0],n[1]);return function(t){return o(r(t))}}function qo(t,n){var e,i=0,r=t.length-1,o=t[i],a=t[r];return o>a&&(e=i,i=r,r=e,e=o,o=a,a=e),t[i]=n.floor(o),t[r]=n.ceil(a),t}function Oo(t){return t?{floor:function(n){return Math.floor(n/t)*t},ceil:function(n){return Math.ceil(n/t)*t}}:yl}function Vo(t,n,e,i){var r=[],o=[],a=0,s=Math.min(t.length,n.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());s>=++a;)r.push(e(t[a-1],t[a])),o.push(i(n[a-1],n[a]));return function(n){var e=es.bisect(t,n,1,s)-1;return o[e](r[e](n))}}function Uo(t,n,e,i){function r(){var r=Math.min(t.length,n.length)>2?Vo:Ho,u=i?Vr:Or;return a=r(t,n,u,e),s=r(n,t,u,yr),o}function o(t){return a(t)}var a,s;return o.invert=function(t){return s(t)},o.domain=function(n){return arguments.length?(t=n.map(Number),r()):t},o.range=function(t){return arguments.length?(n=t,r()):n},o.rangeRound=function(t){return o.range(t).interpolate(Er)},o.clamp=function(t){return arguments.length?(i=t,r()):i},o.interpolate=function(t){return arguments.length?(e=t,r()):e},o.ticks=function(n){return Xo(t,n)},o.tickFormat=function(n,e){return Zo(t,n,e)},o.nice=function(n){return jo(t,n),r()},o.copy=function(){return Uo(t,n,e,i)},r()}function Wo(t,n){return es.rebind(t,n,"range","rangeRound","interpolate","clamp")}function jo(t,n){return qo(t,Oo(Yo(t,n)[2]))}function Yo(t,n){null==n&&(n=10);var e=Bo(t),i=e[1]-e[0],r=Math.pow(10,Math.floor(Math.log(i/n)/Math.LN10)),o=n/i*r;return.15>=o?r*=10:.35>=o?r*=5:.75>=o&&(r*=2),e[0]=Math.ceil(e[0]/r)*r,e[1]=Math.floor(e[1]/r)*r+.5*r,e[2]=r,e}function Xo(t,n){return es.range.apply(es,Yo(t,n))}function Zo(t,n,e){var i=Yo(t,n);if(e){var r=au.exec(e);if(r.shift(),"s"===r[8]){var o=es.formatPrefix(Math.max(ds(i[0]),ds(i[1])));return r[7]||(r[7]="."+Ko(o.scale(i[2]))),r[8]="f",e=es.format(r.join("")),function(t){return e(o.scale(t))+o.symbol}}r[7]||(r[7]="."+Go(r[8],i)),e=r.join("")}else e=",."+Ko(i[2])+"f";return es.format(e)}function Ko(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Go(t,n){var e=Ko(n[2]);return t in xl?Math.abs(e-Ko(Math.max(ds(n[0]),ds(n[1]))))+ +("e"!==t):e-2*("%"===t)}function Jo(t,n,e,i){function r(t){return(e?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function o(t){return e?Math.pow(n,t):-Math.pow(n,-t)}function a(n){return t(r(n))}return a.invert=function(n){return o(t.invert(n))},a.domain=function(n){return arguments.length?(e=n[0]>=0,t.domain((i=n.map(Number)).map(r)),a):i},a.base=function(e){return arguments.length?(n=+e,t.domain(i.map(r)),a):n},a.nice=function(){var n=qo(i.map(r),e?Math:Sl);return t.domain(n),i=n.map(o),a},a.ticks=function(){var t=Bo(i),a=[],s=t[0],u=t[1],l=Math.floor(r(s)),h=Math.ceil(r(u)),c=n%1?2:n;if(isFinite(h-l)){if(e){for(;h>l;l++)for(var f=1;c>f;f++)a.push(o(l)*f);a.push(o(l))}else for(a.push(o(l));h>l++;)for(var f=c-1;f>0;f--)a.push(o(l)*f);for(l=0;s>a[l];l++);for(h=a.length;a[h-1]>u;h--);a=a.slice(l,h)}return a},a.tickFormat=function(t,n){if(!arguments.length)return wl;2>arguments.length?n=wl:"function"!=typeof n&&(n=es.format(n));var i,s=Math.max(.1,t/a.ticks().length),u=e?(i=1e-12,Math.ceil):(i=-1e-12,Math.floor);return function(t){return s>=t/o(u(r(t)+i))?n(t):""}},a.copy=function(){return Jo(t.copy(),n,e,i)},Wo(a,t)}function Qo(t,n,e){function i(n){return t(r(n))}var r=ta(n),o=ta(1/n);return i.invert=function(n){return o(t.invert(n))},i.domain=function(n){return arguments.length?(t.domain((e=n.map(Number)).map(r)),i):e},i.ticks=function(t){return Xo(e,t)},i.tickFormat=function(t,n){return Zo(e,t,n)},i.nice=function(t){return i.domain(jo(e,t))},i.exponent=function(a){return arguments.length?(r=ta(n=a),o=ta(1/n),t.domain(e.map(r)),i):n},i.copy=function(){return Qo(t.copy(),n,e)},Wo(i,t)}function ta(t){return function(n){return 0>n?-Math.pow(-n,t):Math.pow(n,t)}}function na(t,n){function e(e){return o[((r.get(e)||("range"===n.t?r.set(e,t.push(e)):0/0))-1)%o.length]}function i(n,e){return es.range(t.length).map(function(t){return n+e*t})}var r,o,a;return e.domain=function(i){if(!arguments.length)return t;t=[],r=new l;for(var o,a=-1,s=i.length;s>++a;)r.has(o=i[a])||r.set(o,t.push(o));return e[n.t].apply(e,n.a)},e.range=function(t){return arguments.length?(o=t,a=0,n={t:"range",a:arguments},e):o},e.rangePoints=function(r,s){2>arguments.length&&(s=0);var u=r[0],l=r[1],h=2>t.length?(u=(u+l)/2,0):(l-u)/(t.length-1+s);return o=i(u+h*s/2,h),a=0,n={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(r,s){2>arguments.length&&(s=0);var u=r[0],l=r[1],h=2>t.length?(u=l=Math.round((u+l)/2),0):0|(l-u)/(t.length-1+s);return o=i(u+Math.round(h*s/2+(l-u-(t.length-1+s)*h)/2),h),a=0,n={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(r,s,u){2>arguments.length&&(s=0),3>arguments.length&&(u=s);var l=r[1]<r[0],h=r[l-0],c=r[1-l],f=(c-h)/(t.length-s+2*u);return o=i(h+f*u,f),l&&o.reverse(),a=f*(1-s),n={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(r,s,u){2>arguments.length&&(s=0),3>arguments.length&&(u=s);var l=r[1]<r[0],h=r[l-0],c=r[1-l],f=Math.floor((c-h)/(t.length-s+2*u));return o=i(h+Math.round((c-h-(t.length-s)*f)/2),f),l&&o.reverse(),a=Math.round(f*(1-s)),n={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return a},e.rangeExtent=function(){return Bo(n.a[0])},e.copy=function(){return na(t,n)},e.domain(t)}function ea(t,n){function o(){var e=0,i=n.length;for(s=[];i>++e;)s[e-1]=es.quantile(t,e/i);return a}function a(t){return isNaN(t=+t)?void 0:n[es.bisect(s,t)]}var s;return a.domain=function(n){return arguments.length?(t=n.map(i).filter(r).sort(e),o()):t},a.range=function(t){return arguments.length?(n=t,o()):n},a.quantiles=function(){return s},a.invertExtent=function(e){return e=n.indexOf(e),0>e?[0/0,0/0]:[e>0?s[e-1]:t[0],s.length>e?s[e]:t[t.length-1]]},a.copy=function(){return ea(t,n)},o()}function ia(t,n,e){function i(n){return e[Math.max(0,Math.min(a,Math.floor(o*(n-t))))]}function r(){return o=e.length/(n-t),a=e.length-1,i}var o,a;return i.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],r()):[t,n]},i.range=function(t){return arguments.length?(e=t,r()):e},i.invertExtent=function(n){return n=e.indexOf(n),n=0>n?0/0:n/o+t,[n,n+1/o]},i.copy=function(){return ia(t,n,e)},r()}function ra(t,n){function e(e){return e>=e?n[es.bisect(t,e)]:void 0}return e.domain=function(n){return arguments.length?(t=n,e):t},e.range=function(t){return arguments.length?(n=t,e):n},e.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]},e.copy=function(){return ra(t,n)},e}function oa(t){function n(t){return+t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=e.map(n),n):t},n.ticks=function(n){return Xo(t,n)},n.tickFormat=function(n,e){return Zo(t,n,e)},n.copy=function(){return oa(t)},n}function aa(){return 0}function sa(t){return t.innerRadius}function ua(t){return t.outerRadius}function la(t){return t.startAngle}function ha(t){return t.endAngle}function ca(t){return t&&t.padAngle}function fa(t,n,e,i){return(t-e)*n-(n-i)*t>0?0:1}function ga(t,n,e,i,r){var o=t[0]-n[0],a=t[1]-n[1],s=(r?i:-i)/Math.sqrt(o*o+a*a),u=s*a,l=-s*o,h=t[0]+u,c=t[1]+l,f=n[0]+u,g=n[1]+l,d=(h+f)/2,p=(c+g)/2,m=f-h,v=g-c,y=m*m+v*v,x=e-i,w=h*g-f*c,S=(0>v?-1:1)*Math.sqrt(x*x*y-w*w),M=(w*v-m*S)/y,b=(-w*m-v*S)/y,C=(w*v+m*S)/y,P=(-w*m+v*S)/y,R=M-d,T=b-p,_=C-d,k=P-p;return R*R+T*T>_*_+k*k&&(M=C,b=P),[[M-u,b-l],[M*e/x,b*e/x]]}function da(t){function n(n){function a(){l.push("M",o(t(h),s))}for(var u,l=[],h=[],c=-1,f=n.length,g=Tn(e),d=Tn(i);f>++c;)r.call(this,u=n[c],c)?h.push([+g.call(this,u,c),+d.call(this,u,c)]):h.length&&(a(),h=[]);return h.length&&a(),l.length?l.join(""):null}var e=_i,i=ki,r=ke,o=pa,a=o.key,s=.7;return n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(i=t,n):i},n.defined=function(t){return arguments.length?(r=t,n):r},n.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=Tl.get(t)||pa).key,n):a},n.tension=function(t){return arguments.length?(s=t,n):s},n}function pa(t){return t.join("L")}function ma(t){return pa(t)+"Z"}function va(t){for(var n=0,e=t.length,i=t[0],r=[i[0],",",i[1]];e>++n;)r.push("H",(i[0]+(i=t[n])[0])/2,"V",i[1]);return e>1&&r.push("H",i[0]),r.join("")}function ya(t){for(var n=0,e=t.length,i=t[0],r=[i[0],",",i[1]];e>++n;)r.push("V",(i=t[n])[1],"H",i[0]);return r.join("")}function xa(t){for(var n=0,e=t.length,i=t[0],r=[i[0],",",i[1]];e>++n;)r.push("H",(i=t[n])[0],"V",i[1]);return r.join("")}function wa(t,n){return 4>t.length?pa(t):t[1]+ba(t.slice(1,-1),Ca(t,n))}function Sa(t,n){return 3>t.length?pa(t):t[0]+ba((t.push(t[0]),t),Ca([t[t.length-2]].concat(t,[t[1]]),n))}function Ma(t,n){return 3>t.length?pa(t):t[0]+ba(t,Ca(t,n))}function ba(t,n){if(1>n.length||t.length!=n.length&&t.length!=n.length+2)return pa(t);var e=t.length!=n.length,i="",r=t[0],o=t[1],a=n[0],s=a,u=1;if(e&&(i+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],r=t[1],u=2),n.length>1){s=n[1],o=t[u],u++,i+="C"+(r[0]+a[0])+","+(r[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var l=2;n.length>l;l++,u++)o=t[u],s=n[l],i+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(e){var h=t[u];i+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+h[0]+","+h[1]}return i}function Ca(t,n){for(var e,i=[],r=(1-n)/2,o=t[0],a=t[1],s=1,u=t.length;u>++s;)e=o,o=a,a=t[s],i.push([r*(a[0]-e[0]),r*(a[1]-e[1])]);return i}function Pa(t){if(3>t.length)return pa(t);var n=1,e=t.length,i=t[0],r=i[0],o=i[1],a=[r,r,r,(i=t[1])[0]],s=[o,o,o,i[1]],u=[r,",",o,"L",ka(Nl,a),",",ka(Nl,s)];for(t.push(t[e-1]);e>=++n;)i=t[n],a.shift(),a.push(i[0]),s.shift(),s.push(i[1]),Na(u,a,s);return t.pop(),u.push("L",i),u.join("")}function Ra(t){if(4>t.length)return pa(t);for(var n,e=[],i=-1,r=t.length,o=[0],a=[0];3>++i;)n=t[i],o.push(n[0]),a.push(n[1]);for(e.push(ka(Nl,o)+","+ka(Nl,a)),--i;r>++i;)n=t[i],o.shift(),o.push(n[0]),a.shift(),a.push(n[1]),Na(e,o,a);return e.join("")}function Ta(t){for(var n,e,i=-1,r=t.length,o=r+4,a=[],s=[];4>++i;)e=t[i%r],a.push(e[0]),s.push(e[1]);for(n=[ka(Nl,a),",",ka(Nl,s)],--i;o>++i;)e=t[i%r],a.shift(),a.push(e[0]),s.shift(),s.push(e[1]),Na(n,a,s);return n.join("")}function _a(t,n){var e=t.length-1;if(e)for(var i,r,o=t[0][0],a=t[0][1],s=t[e][0]-o,u=t[e][1]-a,l=-1;e>=++l;)i=t[l],r=l/e,i[0]=n*i[0]+(1-n)*(o+r*s),i[1]=n*i[1]+(1-n)*(a+r*u);return Pa(t)}function ka(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function Na(t,n,e){t.push("C",ka(_l,n),",",ka(_l,e),",",ka(kl,n),",",ka(kl,e),",",ka(Nl,n),",",ka(Nl,e))}function Ia(t,n){return(n[1]-t[1])/(n[0]-t[0])}function Aa(t){for(var n=0,e=t.length-1,i=[],r=t[0],o=t[1],a=i[0]=Ia(r,o);e>++n;)i[n]=(a+(a=Ia(r=o,o=t[n+1])))/2;return i[n]=a,i}function za(t){for(var n,e,i,r,o=[],a=Aa(t),s=-1,u=t.length-1;u>++s;)n=Ia(t[s],t[s+1]),Ns>ds(n)?a[s]=a[s+1]=0:(e=a[s]/n,i=a[s+1]/n,r=e*e+i*i,r>9&&(r=3*n/Math.sqrt(r),a[s]=r*e,a[s+1]=r*i));for(s=-1;u>=++s;)r=(t[Math.min(u,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([r||0,a[s]*r||0]);return o}function $a(t){return 3>t.length?pa(t):t[0]+ba(t,za(t))}function Da(t){for(var n,e,i,r=-1,o=t.length;o>++r;)n=t[r],e=n[0],i=n[1]-Ds,n[0]=e*Math.cos(i),n[1]=e*Math.sin(i);return t}function Ea(t){function n(n){function u(){p.push("M",s(t(v),c),h,l(t(m.reverse()),c),"Z")}for(var f,g,d,p=[],m=[],v=[],y=-1,x=n.length,w=Tn(e),S=Tn(r),M=e===i?function(){return g}:Tn(i),b=r===o?function(){return d}:Tn(o);x>++y;)a.call(this,f=n[y],y)?(m.push([g=+w.call(this,f,y),d=+S.call(this,f,y)]),v.push([+M.call(this,f,y),+b.call(this,f,y)])):m.length&&(u(),m=[],v=[]);return m.length&&u(),p.length?p.join(""):null}var e=_i,i=_i,r=0,o=ki,a=ke,s=pa,u=s.key,l=s,h="L",c=.7;return n.x=function(t){return arguments.length?(e=i=t,n):i},n.x0=function(t){return arguments.length?(e=t,n):e},n.x1=function(t){return arguments.length?(i=t,n):i
},n.y=function(t){return arguments.length?(r=o=t,n):o},n.y0=function(t){return arguments.length?(r=t,n):r},n.y1=function(t){return arguments.length?(o=t,n):o},n.defined=function(t){return arguments.length?(a=t,n):a},n.interpolate=function(t){return arguments.length?(u="function"==typeof t?s=t:(s=Tl.get(t)||pa).key,l=s.reverse||s,h=s.closed?"M":"L",n):u},n.tension=function(t){return arguments.length?(c=t,n):c},n}function La(t){return t.radius}function Ba(t){return[t.x,t.y]}function Fa(t){return function(){var n=t.apply(this,arguments),e=n[0],i=n[1]-Ds;return[e*Math.cos(i),e*Math.sin(i)]}}function Ha(){return 64}function qa(){return"circle"}function Oa(t){var n=Math.sqrt(t/As);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}function Va(t){return function(){var n,e;(n=this[t])&&(e=n[n.active])&&(--n.count?delete n[n.active]:delete this[t],n.active+=.5,e.event&&e.event.interrupt.call(this,this.__data__,e.index))}}function Ua(t,n,e){return xs(t,Ll),t.namespace=n,t.id=e,t}function Wa(t,n,e,i){var r=t.id,o=t.namespace;return V(t,"function"==typeof e?function(t,a,s){t[o][r].tween.set(n,i(e.call(t,t.__data__,a,s)))}:(e=i(e),function(t){t[o][r].tween.set(n,e)}))}function ja(t){return null==t&&(t=""),function(){this.textContent=t}}function Ya(t){return null==t?"__transition__":"__transition_"+t+"__"}function Xa(t,n,e,i,r){var o=t[e]||(t[e]={active:0,count:0}),a=o[i];if(!a){var s=r.time;a=o[i]={tween:new l,time:s,delay:r.delay,duration:r.duration,ease:r.ease,index:n},r=null,++o.count,es.timer(function(r){function u(e){if(o.active>i)return h();var r=o[o.active];r&&(--o.count,delete o[o.active],r.event&&r.event.interrupt.call(t,t.__data__,r.index)),o.active=i,a.event&&a.event.start.call(t,t.__data__,n),a.tween.forEach(function(e,i){(i=i.call(t,t.__data__,n))&&p.push(i)}),f=a.ease,c=a.duration,es.timer(function(){return d.c=l(e||1)?ke:l,1},0,s)}function l(e){if(o.active!==i)return 1;for(var r=e/c,s=f(r),u=p.length;u>0;)p[--u].call(t,s);return r>=1?(a.event&&a.event.end.call(t,t.__data__,n),h()):void 0}function h(){return--o.count?delete o[i]:delete t[e],1}var c,f,g=a.delay,d=iu,p=[];return d.t=g+s,r>=g?u(r-g):void(d.c=u)},0,s)}}function Za(t,n,e){t.attr("transform",function(t){var i=n(t);return"translate("+(isFinite(i)?i:e(t))+",0)"})}function Ka(t,n,e){t.attr("transform",function(t){var i=n(t);return"translate(0,"+(isFinite(i)?i:e(t))+")"})}function Ga(t){return t.toISOString()}function Ja(t,n,e){function i(n){return t(n)}function r(t,e){var i=t[1]-t[0],r=i/e,o=es.bisect(jl,r);return o==jl.length?[n.year,Yo(t.map(function(t){return t/31536e6}),e)[2]]:o?n[r/jl[o-1]<jl[o]/r?o-1:o]:[Zl,Yo(t,e)[2]]}return i.invert=function(n){return Qa(t.invert(n))},i.domain=function(n){return arguments.length?(t.domain(n),i):t.domain().map(Qa)},i.nice=function(t,n){function e(e){return!isNaN(e)&&!t.range(e,Qa(+e+1),n).length}var o=i.domain(),a=Bo(o),s=null==t?r(a,10):"number"==typeof t&&r(a,t);return s&&(t=s[0],n=s[1]),i.domain(qo(o,n>1?{floor:function(n){for(;e(n=t.floor(n));)n=Qa(n-1);return n},ceil:function(n){for(;e(n=t.ceil(n));)n=Qa(+n+1);return n}}:t))},i.ticks=function(t,n){var e=Bo(i.domain()),o=null==t?r(e,10):"number"==typeof t?r(e,t):!t.range&&[{range:t},n];return o&&(t=o[0],n=o[1]),t.range(e[0],Qa(+e[1]+1),1>n?1:n)},i.tickFormat=function(){return e},i.copy=function(){return Ja(t.copy(),n,e)},Wo(i,t)}function Qa(t){return new Date(t)}function ts(t){return JSON.parse(t.responseText)}function ns(t){var n=os.createRange();return n.selectNode(os.body),n.createContextualFragment(t.responseText)}var es={version:"3.5.6"},is=[].slice,rs=function(t){return is.call(t)},os=this.document;if(os)try{rs(os.documentElement.childNodes)[0].nodeType}catch(as){rs=function(t){for(var n=t.length,e=Array(n);n--;)e[n]=t[n];return e}}if(Date.now||(Date.now=function(){return+new Date}),os)try{os.createElement("DIV").style.setProperty("opacity",0,"")}catch(ss){var us=this.Element.prototype,ls=us.setAttribute,hs=us.setAttributeNS,cs=this.CSSStyleDeclaration.prototype,fs=cs.setProperty;us.setAttribute=function(t,n){ls.call(this,t,n+"")},us.setAttributeNS=function(t,n,e){hs.call(this,t,n,e+"")},cs.setProperty=function(t,n,e){fs.call(this,t,n+"",e)}}es.ascending=e,es.descending=function(t,n){return t>n?-1:n>t?1:n>=t?0:0/0},es.min=function(t,n){var e,i,r=-1,o=t.length;if(1===arguments.length){for(;o>++r;)if(null!=(i=t[r])&&i>=i){e=i;break}for(;o>++r;)null!=(i=t[r])&&e>i&&(e=i)}else{for(;o>++r;)if(null!=(i=n.call(t,t[r],r))&&i>=i){e=i;break}for(;o>++r;)null!=(i=n.call(t,t[r],r))&&e>i&&(e=i)}return e},es.max=function(t,n){var e,i,r=-1,o=t.length;if(1===arguments.length){for(;o>++r;)if(null!=(i=t[r])&&i>=i){e=i;break}for(;o>++r;)null!=(i=t[r])&&i>e&&(e=i)}else{for(;o>++r;)if(null!=(i=n.call(t,t[r],r))&&i>=i){e=i;break}for(;o>++r;)null!=(i=n.call(t,t[r],r))&&i>e&&(e=i)}return e},es.extent=function(t,n){var e,i,r,o=-1,a=t.length;if(1===arguments.length){for(;a>++o;)if(null!=(i=t[o])&&i>=i){e=r=i;break}for(;a>++o;)null!=(i=t[o])&&(e>i&&(e=i),i>r&&(r=i))}else{for(;a>++o;)if(null!=(i=n.call(t,t[o],o))&&i>=i){e=r=i;break}for(;a>++o;)null!=(i=n.call(t,t[o],o))&&(e>i&&(e=i),i>r&&(r=i))}return[e,r]},es.sum=function(t,n){var e,i=0,o=t.length,a=-1;if(1===arguments.length)for(;o>++a;)r(e=+t[a])&&(i+=e);else for(;o>++a;)r(e=+n.call(t,t[a],a))&&(i+=e);return i},es.mean=function(t,n){var e,o=0,a=t.length,s=-1,u=a;if(1===arguments.length)for(;a>++s;)r(e=i(t[s]))?o+=e:--u;else for(;a>++s;)r(e=i(n.call(t,t[s],s)))?o+=e:--u;return u?o/u:void 0},es.quantile=function(t,n){var e=(t.length-1)*n+1,i=Math.floor(e),r=+t[i-1],o=e-i;return o?r+o*(t[i]-r):r},es.median=function(t,n){var o,a=[],s=t.length,u=-1;if(1===arguments.length)for(;s>++u;)r(o=i(t[u]))&&a.push(o);else for(;s>++u;)r(o=i(n.call(t,t[u],u)))&&a.push(o);return a.length?es.quantile(a.sort(e),.5):void 0},es.variance=function(t,n){var e,o,a=t.length,s=0,u=0,l=-1,h=0;if(1===arguments.length)for(;a>++l;)r(e=i(t[l]))&&(o=e-s,s+=o/++h,u+=o*(e-s));else for(;a>++l;)r(e=i(n.call(t,t[l],l)))&&(o=e-s,s+=o/++h,u+=o*(e-s));return h>1?u/(h-1):void 0},es.deviation=function(){var t=es.variance.apply(this,arguments);return t?Math.sqrt(t):t};var gs=o(e);es.bisectLeft=gs.left,es.bisect=es.bisectRight=gs.right,es.bisector=function(t){return o(1===t.length?function(n,i){return e(t(n),i)}:t)},es.shuffle=function(t,n,e){3>(o=arguments.length)&&(e=t.length,2>o&&(n=0));for(var i,r,o=e-n;o;)r=0|Math.random()*o--,i=t[o+n],t[o+n]=t[r+n],t[r+n]=i;return t},es.permute=function(t,n){for(var e=n.length,i=Array(e);e--;)i[e]=t[n[e]];return i},es.pairs=function(t){for(var n,e=0,i=t.length-1,r=t[0],o=Array(0>i?0:i);i>e;)o[e]=[n=r,r=t[++e]];return o},es.zip=function(){if(!(i=arguments.length))return[];for(var t=-1,n=es.min(arguments,a),e=Array(n);n>++t;)for(var i,r=-1,o=e[t]=Array(i);i>++r;)o[r]=arguments[r][t];return e},es.transpose=function(t){return es.zip.apply(es,t)},es.keys=function(t){var n=[];for(var e in t)n.push(e);return n},es.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},es.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},es.merge=function(t){for(var n,e,i,r=t.length,o=-1,a=0;r>++o;)a+=t[o].length;for(e=Array(a);--r>=0;)for(i=t[r],n=i.length;--n>=0;)e[--a]=i[n];return e};var ds=Math.abs;es.range=function(t,n,e){if(3>arguments.length&&(e=1,2>arguments.length&&(n=t,t=0)),(n-t)/e===1/0)throw Error("infinite range");var i,r=[],o=s(ds(e)),a=-1;if(t*=o,n*=o,e*=o,0>e)for(;(i=t+e*++a)>n;)r.push(i/o);else for(;n>(i=t+e*++a);)r.push(i/o);return r},es.map=function(t,n){var e=new l;if(t instanceof l)t.forEach(function(t,n){e.set(t,n)});else if(Array.isArray(t)){var i,r=-1,o=t.length;if(1===arguments.length)for(;o>++r;)e.set(r,t[r]);else for(;o>++r;)e.set(n.call(t,i=t[r],r),i)}else for(var a in t)e.set(a,t[a]);return e};var ps="__proto__",ms="\0";u(l,{has:f,get:function(t){return this._[h(t)]},set:function(t,n){return this._[h(t)]=n},remove:g,keys:d,values:function(){var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:c(n),value:this._[n]});return t},size:p,empty:m,forEach:function(t){for(var n in this._)t.call(this,c(n),this._[n])}}),es.nest=function(){function t(n,a,s){if(s>=o.length)return i?i.call(r,a):e?a.sort(e):a;for(var u,h,c,f,g=-1,d=a.length,p=o[s++],m=new l;d>++g;)(f=m.get(u=p(h=a[g])))?f.push(h):m.set(u,[h]);return n?(h=n(),c=function(e,i){h.set(e,t(n,i,s))}):(h={},c=function(e,i){h[e]=t(n,i,s)}),m.forEach(c),h}function n(t,e){if(e>=o.length)return t;var i=[],r=a[e++];return t.forEach(function(t,r){i.push({key:t,values:n(r,e)})}),r?i.sort(function(t,n){return r(t.key,n.key)}):i}var e,i,r={},o=[],a=[];return r.map=function(n,e){return t(e,n,0)},r.entries=function(e){return n(t(es.map,e,0),0)},r.key=function(t){return o.push(t),r},r.sortKeys=function(t){return a[o.length-1]=t,r},r.sortValues=function(t){return e=t,r},r.rollup=function(t){return i=t,r},r},es.set=function(t){var n=new v;if(t)for(var e=0,i=t.length;i>e;++e)n.add(t[e]);return n},u(v,{has:f,add:function(t){return this._[h(t+="")]=!0,t},remove:g,values:d,size:p,empty:m,forEach:function(t){for(var n in this._)t.call(this,c(n))}}),es.behavior={},es.rebind=function(t,n){for(var e,i=1,r=arguments.length;r>++i;)t[e=arguments[i]]=x(t,n,n[e]);return t};var vs=["webkit","ms","moz","Moz","o","O"];es.dispatch=function(){for(var t=new M,n=-1,e=arguments.length;e>++n;)t[arguments[n]]=b(t);return t},M.prototype.on=function(t,n){var e=t.indexOf("."),i="";if(e>=0&&(i=t.slice(e+1),t=t.slice(0,e)),t)return 2>arguments.length?this[t].on(i):this[t].on(i,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},es.event=null,es.requote=function(t){return t.replace(ys,"\\$&")};var ys=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,xs={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]},ws=function(t,n){return n.querySelector(t)},Ss=function(t,n){return n.querySelectorAll(t)},Ms=function(t,n){var e=t.matches||t[w(t,"matchesSelector")];return(Ms=function(t,n){return e.call(t,n)})(t,n)};"function"==typeof Sizzle&&(ws=function(t,n){return Sizzle(t,n)[0]||null},Ss=Sizzle,Ms=Sizzle.matchesSelector),es.selection=function(){return es.select(os.documentElement)};var bs=es.selection.prototype=[];bs.select=function(t){var n,e,i,r,o=[];t=_(t);for(var a=-1,s=this.length;s>++a;){o.push(n=[]),n.parentNode=(i=this[a]).parentNode;for(var u=-1,l=i.length;l>++u;)(r=i[u])?(n.push(e=t.call(r,r.__data__,u,a)),e&&"__data__"in r&&(e.__data__=r.__data__)):n.push(null)}return T(o)},bs.selectAll=function(t){var n,e,i=[];t=k(t);for(var r=-1,o=this.length;o>++r;)for(var a=this[r],s=-1,u=a.length;u>++s;)(e=a[s])&&(i.push(n=rs(t.call(e,e.__data__,s,r))),n.parentNode=e);return T(i)};var Cs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};es.ns={prefix:Cs,qualify:function(t){var n=t.indexOf(":"),e=t;return n>=0&&(e=t.slice(0,n),t=t.slice(n+1)),Cs.hasOwnProperty(e)?{space:Cs[e],local:t}:t}},bs.attr=function(t,n){if(2>arguments.length){if("string"==typeof t){var e=this.node();return t=es.ns.qualify(t),t.local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)}for(n in t)this.each(N(n,t[n]));return this}return this.each(N(t,n))},bs.classed=function(t,n){if(2>arguments.length){if("string"==typeof t){var e=this.node(),i=(t=z(t)).length,r=-1;if(n=e.classList){for(;i>++r;)if(!n.contains(t[r]))return!1}else for(n=e.getAttribute("class");i>++r;)if(!A(t[r]).test(n))return!1;return!0}for(n in t)this.each($(n,t[n]));return this}return this.each($(t,n))},bs.style=function(t,e,i){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e="");for(i in t)this.each(E(i,t[i],e));return this}if(2>r){var o=this.node();return n(o).getComputedStyle(o,null).getPropertyValue(t)}i=""}return this.each(E(t,e,i))},bs.property=function(t,n){if(2>arguments.length){if("string"==typeof t)return this.node()[t];for(n in t)this.each(L(n,t[n]));return this}return this.each(L(t,n))},bs.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},bs.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},bs.append=function(t){return t=B(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},bs.insert=function(t,n){return t=B(t),n=_(n),this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})},bs.remove=function(){return this.each(F)},bs.data=function(t,n){function e(t,e){var i,r,o,a=t.length,c=e.length,f=Math.min(a,c),g=Array(c),d=Array(c),p=Array(a);if(n){var m,v=new l,y=Array(a);for(i=-1;a>++i;)v.has(m=n.call(r=t[i],r.__data__,i))?p[i]=r:v.set(m,r),y[i]=m;for(i=-1;c>++i;)(r=v.get(m=n.call(e,o=e[i],i)))?r!==!0&&(g[i]=r,r.__data__=o):d[i]=H(o),v.set(m,!0);for(i=-1;a>++i;)v.get(y[i])!==!0&&(p[i]=t[i])}else{for(i=-1;f>++i;)r=t[i],o=e[i],r?(r.__data__=o,g[i]=r):d[i]=H(o);for(;c>i;++i)d[i]=H(e[i]);for(;a>i;++i)p[i]=t[i]}d.update=g,d.parentNode=g.parentNode=p.parentNode=t.parentNode,s.push(d),u.push(g),h.push(p)}var i,r,o=-1,a=this.length;if(!arguments.length){for(t=Array(a=(i=this[0]).length);a>++o;)(r=i[o])&&(t[o]=r.__data__);return t}var s=U([]),u=T([]),h=T([]);if("function"==typeof t)for(;a>++o;)e(i=this[o],t.call(i,i.parentNode.__data__,o));else for(;a>++o;)e(i=this[o],t);return u.enter=function(){return s},u.exit=function(){return h},u},bs.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},bs.filter=function(t){var n,e,i,r=[];"function"!=typeof t&&(t=q(t));for(var o=0,a=this.length;a>o;o++){r.push(n=[]),n.parentNode=(e=this[o]).parentNode;for(var s=0,u=e.length;u>s;s++)(i=e[s])&&t.call(i,i.__data__,s,o)&&n.push(i)}return T(r)},bs.order=function(){for(var t=-1,n=this.length;n>++t;)for(var e,i=this[t],r=i.length-1,o=i[r];--r>=0;)(e=i[r])&&(o&&o!==e.nextSibling&&o.parentNode.insertBefore(e,o),o=e);return this},bs.sort=function(t){t=O.apply(this,arguments);for(var n=-1,e=this.length;e>++n;)this[n].sort(t);return this.order()},bs.each=function(t){return V(this,function(n,e,i){t.call(n,n.__data__,e,i)})},bs.call=function(t){var n=rs(arguments);return t.apply(n[0]=this,n),this},bs.empty=function(){return!this.node()},bs.node=function(){for(var t=0,n=this.length;n>t;t++)for(var e=this[t],i=0,r=e.length;r>i;i++){var o=e[i];if(o)return o}return null},bs.size=function(){var t=0;return V(this,function(){++t}),t};var Ps=[];es.selection.enter=U,es.selection.enter.prototype=Ps,Ps.append=bs.append,Ps.empty=bs.empty,Ps.node=bs.node,Ps.call=bs.call,Ps.size=bs.size,Ps.select=function(t){for(var n,e,i,r,o,a=[],s=-1,u=this.length;u>++s;){i=(r=this[s]).update,a.push(n=[]),n.parentNode=r.parentNode;for(var l=-1,h=r.length;h>++l;)(o=r[l])?(n.push(i[l]=e=t.call(r.parentNode,o.__data__,l,s)),e.__data__=o.__data__):n.push(null)}return T(a)},Ps.insert=function(t,n){return 2>arguments.length&&(n=W(this)),bs.insert.call(this,t,n)},es.select=function(n){var e;return"string"==typeof n?(e=[ws(n,os)],e.parentNode=os.documentElement):(e=[n],e.parentNode=t(n)),T([e])},es.selectAll=function(t){var n;return"string"==typeof t?(n=rs(Ss(t,os)),n.parentNode=os.documentElement):(n=t,n.parentNode=null),T([n])},bs.on=function(t,n,e){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(n=!1);for(e in t)this.each(j(e,t[e],n));return this}if(2>i)return(i=this.node()["__on"+t])&&i._;e=!1}return this.each(j(t,n,e))};var Rs=es.map({mouseenter:"mouseover",mouseleave:"mouseout"});os&&Rs.forEach(function(t){"on"+t in os&&Rs.remove(t)});var Ts,_s=0;es.mouse=function(t){return K(t,P())};var ks=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;es.touch=function(t,n,e){if(3>arguments.length&&(e=n,n=P().changedTouches),n)for(var i,r=0,o=n.length;o>r;++r)if((i=n[r]).identifier===e)return K(t,i)},es.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function e(t,n,e,o,a){return function(){function s(){var t,e,i=n(f,p);i&&(t=i[0]-x[0],e=i[1]-x[1],d|=t|e,x=i,g({type:"drag",x:i[0]+l[0],y:i[1]+l[1],dx:t,dy:e}))}function u(){n(f,p)&&(v.on(o+m,null).on(a+m,null),y(d&&es.event.target===c),g({type:"dragend"}))}var l,h=this,c=es.event.target,f=h.parentNode,g=i.of(h,arguments),d=0,p=t(),m=".drag"+(null==p?"":"-"+p),v=es.select(e(c)).on(o+m,s).on(a+m,u),y=Z(c),x=n(f,p);r?(l=r.apply(h,arguments),l=[l.x-x[0],l.y-x[1]]):l=[0,0],g({type:"dragstart"})}}var i=R(t,"drag","dragstart","dragend"),r=null,o=e(S,es.mouse,n,"mousemove","mouseup"),a=e(G,es.touch,y,"touchmove","touchend");return t.origin=function(n){return arguments.length?(r=n,t):r},es.rebind(t,i,"on")},es.touches=function(t,n){return 2>arguments.length&&(n=P().touches),n?rs(n).map(function(n){var e=K(t,n);return e.identifier=n.identifier,e}):[]};var Ns=1e-6,Is=Ns*Ns,As=Math.PI,zs=2*As,$s=zs-Ns,Ds=As/2,Es=As/180,Ls=180/As,Bs=Math.SQRT2,Fs=2,Hs=4;es.interpolateZoom=function(t,n){function e(t){var n=t*y;if(v){var e=rn(p),a=o/(Fs*f)*(e*on(Bs*n+p)-en(p));return[i+a*l,r+a*h,o*e/rn(Bs*n+p)]}return[i+t*l,r+t*h,o*Math.exp(Bs*n)]}var i=t[0],r=t[1],o=t[2],a=n[0],s=n[1],u=n[2],l=a-i,h=s-r,c=l*l+h*h,f=Math.sqrt(c),g=(u*u-o*o+Hs*c)/(2*o*Fs*f),d=(u*u-o*o-Hs*c)/(2*u*Fs*f),p=Math.log(Math.sqrt(g*g+1)-g),m=Math.log(Math.sqrt(d*d+1)-d),v=m-p,y=(v||Math.log(u/o))/Bs;return e.duration=1e3*y,e},es.behavior.zoom=function(){function t(t){t.on(I,c).on(Os+".zoom",g).on("dblclick.zoom",d).on($,f)}function e(t){return[(t[0]-P.x)/P.k,(t[1]-P.y)/P.k]}function i(t){return[t[0]*P.k+P.x,t[1]*P.k+P.y]}function r(t){P.k=Math.max(_[0],Math.min(_[1],t))}function o(t,n){n=i(n),P.x+=t[0]-n[0],P.y+=t[1]-n[1]}function a(n,e,i,a){n.__chart__={x:P.x,y:P.y,k:P.k},r(Math.pow(2,a)),o(m=e,i),n=es.select(n),k>0&&(n=n.transition().duration(k)),n.call(t.event)}function s(){S&&S.domain(w.range().map(function(t){return(t-P.x)/P.k}).map(w.invert)),b&&b.domain(M.range().map(function(t){return(t-P.y)/P.k}).map(M.invert))}function u(t){N++||t({type:"zoomstart"})}function l(t){s(),t({type:"zoom",scale:P.k,translate:[P.x,P.y]})}function h(t){--N||(t({type:"zoomend"}),m=null)}function c(){function t(){c=1,o(es.mouse(r),g),l(s)}function i(){f.on(A,null).on(z,null),d(c&&es.event.target===a),h(s)}var r=this,a=es.event.target,s=D.of(r,arguments),c=0,f=es.select(n(r)).on(A,t).on(z,i),g=e(es.mouse(r)),d=Z(r);El.call(r),u(s)}function f(){function t(){var t=es.touches(d);return g=P.k,t.forEach(function(t){t.identifier in m&&(m[t.identifier]=e(t))}),t}function n(){var n=es.event.target;es.select(n).on(w,i).on(S,s),M.push(n);for(var e=es.event.changedTouches,r=0,o=e.length;o>r;++r)m[e[r].identifier]=null;var u=t(),l=Date.now();if(1===u.length){if(500>l-x){var h=u[0];a(d,h,m[h.identifier],Math.floor(Math.log(P.k)/Math.LN2)+1),C()}x=l}else if(u.length>1){var h=u[0],c=u[1],f=h[0]-c[0],g=h[1]-c[1];v=f*f+g*g}}function i(){var t,n,e,i,a=es.touches(d);El.call(d);for(var s=0,u=a.length;u>s;++s,i=null)if(e=a[s],i=m[e.identifier]){if(n)break;t=e,n=i}if(i){var h=(h=e[0]-t[0])*h+(h=e[1]-t[1])*h,c=v&&Math.sqrt(h/v);t=[(t[0]+e[0])/2,(t[1]+e[1])/2],n=[(n[0]+i[0])/2,(n[1]+i[1])/2],r(c*g)}x=null,o(t,n),l(p)}function s(){if(es.event.touches.length){for(var n=es.event.changedTouches,e=0,i=n.length;i>e;++e)delete m[n[e].identifier];for(var r in m)return void t()}es.selectAll(M).on(y,null),b.on(I,c).on($,f),R(),h(p)}var g,d=this,p=D.of(d,arguments),m={},v=0,y=".zoom-"+es.event.changedTouches[0].identifier,w="touchmove"+y,S="touchend"+y,M=[],b=es.select(d),R=Z(d);n(),u(p),b.on(I,null).on($,n)}function g(){var t=D.of(this,arguments);y?clearTimeout(y):(El.call(this),p=e(m=v||es.mouse(this)),u(t)),y=setTimeout(function(){y=null,h(t)},50),C(),r(Math.pow(2,.002*qs())*P.k),o(m,p),l(t)}function d(){var t=es.mouse(this),n=Math.log(P.k)/Math.LN2;a(this,t,e(t),es.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var p,m,v,y,x,w,S,M,b,P={x:0,y:0,k:1},T=[960,500],_=Vs,k=250,N=0,I="mousedown.zoom",A="mousemove.zoom",z="mouseup.zoom",$="touchstart.zoom",D=R(t,"zoomstart","zoom","zoomend");return Os||(Os="onwheel"in os?(qs=function(){return-es.event.deltaY*(es.event.deltaMode?120:1)},"wheel"):"onmousewheel"in os?(qs=function(){return es.event.wheelDelta},"mousewheel"):(qs=function(){return-es.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=D.of(this,arguments),n=P;$l?es.select(this).transition().each("start.zoom",function(){P=this.__chart__||{x:0,y:0,k:1},u(t)}).tween("zoom:zoom",function(){var e=T[0],i=T[1],r=m?m[0]:e/2,o=m?m[1]:i/2,a=es.interpolateZoom([(r-P.x)/P.k,(o-P.y)/P.k,e/P.k],[(r-n.x)/n.k,(o-n.y)/n.k,e/n.k]);return function(n){var i=a(n),s=e/i[2];this.__chart__=P={x:r-i[0]*s,y:o-i[1]*s,k:s},l(t)}}).each("interrupt.zoom",function(){h(t)}).each("end.zoom",function(){h(t)}):(this.__chart__=P,u(t),l(t),h(t))})},t.translate=function(n){return arguments.length?(P={x:+n[0],y:+n[1],k:P.k},s(),t):[P.x,P.y]},t.scale=function(n){return arguments.length?(P={x:P.x,y:P.y,k:+n},s(),t):P.k},t.scaleExtent=function(n){return arguments.length?(_=null==n?Vs:[+n[0],+n[1]],t):_},t.center=function(n){return arguments.length?(v=n&&[+n[0],+n[1]],t):v},t.size=function(n){return arguments.length?(T=n&&[+n[0],+n[1]],t):T},t.duration=function(n){return arguments.length?(k=+n,t):k},t.x=function(n){return arguments.length?(S=n,w=n.copy(),P={x:0,y:0,k:1},t):S},t.y=function(n){return arguments.length?(b=n,M=n.copy(),P={x:0,y:0,k:1},t):b},es.rebind(t,D,"on")};var qs,Os,Vs=[0,1/0];es.color=sn,sn.prototype.toString=function(){return this.rgb()+""},es.hsl=un;var Us=un.prototype=new sn;Us.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new un(this.h,this.s,this.l/t)},Us.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new un(this.h,this.s,t*this.l)},Us.rgb=function(){return ln(this.h,this.s,this.l)},es.hcl=hn;var Ws=hn.prototype=new sn;Ws.brighter=function(t){return new hn(this.h,this.c,Math.min(100,this.l+js*(arguments.length?t:1)))},Ws.darker=function(t){return new hn(this.h,this.c,Math.max(0,this.l-js*(arguments.length?t:1)))},Ws.rgb=function(){return cn(this.h,this.c,this.l).rgb()},es.lab=fn;var js=18,Ys=.95047,Xs=1,Zs=1.08883,Ks=fn.prototype=new sn;Ks.brighter=function(t){return new fn(Math.min(100,this.l+js*(arguments.length?t:1)),this.a,this.b)},Ks.darker=function(t){return new fn(Math.max(0,this.l-js*(arguments.length?t:1)),this.a,this.b)},Ks.rgb=function(){return gn(this.l,this.a,this.b)},es.rgb=yn;var Gs=yn.prototype=new sn;Gs.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var n=this.r,e=this.g,i=this.b,r=30;return n||e||i?(n&&r>n&&(n=r),e&&r>e&&(e=r),i&&r>i&&(i=r),new yn(Math.min(255,n/t),Math.min(255,e/t),Math.min(255,i/t))):new yn(r,r,r)},Gs.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new yn(t*this.r,t*this.g,t*this.b)},Gs.hsl=function(){return bn(this.r,this.g,this.b)},Gs.toString=function(){return"#"+Sn(this.r)+Sn(this.g)+Sn(this.b)};var Js=es.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Js.forEach(function(t,n){Js.set(t,xn(n))}),es.functor=Tn,es.xhr=_n(y),es.dsv=function(t,n){function e(t,e,o){3>arguments.length&&(o=e,e=null);var a=kn(t,n,null==e?i:r(e),o);return a.row=function(t){return arguments.length?a.response(null==(e=t)?i:r(t)):e},a}function i(t){return e.parse(t.responseText)}function r(t){return function(n){return e.parse(n.responseText,t)}}function o(n){return n.map(a).join(t)}function a(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=RegExp('["'+t+"\n]"),u=t.charCodeAt(0);return e.parse=function(t,n){var i;return e.parseRows(t,function(t,e){if(i)return i(t,e-1);var r=Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}");i=n?function(t,e){return n(r(t),e)}:r})},e.parseRows=function(t,n){function e(){if(h>=l)return a;if(r)return r=!1,o;var n=h;if(34===t.charCodeAt(n)){for(var e=n;l>e++;)if(34===t.charCodeAt(e)){if(34!==t.charCodeAt(e+1))break;++e}h=e+2;var i=t.charCodeAt(e+1);return 13===i?(r=!0,10===t.charCodeAt(e+2)&&++h):10===i&&(r=!0),t.slice(n+1,e).replace(/""/g,'"')}for(;l>h;){var i=t.charCodeAt(h++),s=1;if(10===i)r=!0;else if(13===i)r=!0,10===t.charCodeAt(h)&&(++h,++s);else if(i!==u)continue;return t.slice(n,h-s)}return t.slice(n)}for(var i,r,o={},a={},s=[],l=t.length,h=0,c=0;(i=e())!==a;){for(var f=[];i!==o&&i!==a;)f.push(i),i=e();n&&null==(f=n(f,c++))||s.push(f)}return s},e.format=function(n){if(Array.isArray(n[0]))return e.formatRows(n);var i=new v,r=[];return n.forEach(function(t){for(var n in t)i.has(n)||r.push(i.add(n))}),[r.map(a).join(t)].concat(n.map(function(n){return r.map(function(t){return a(n[t])}).join(t)})).join("\n")},e.formatRows=function(t){return t.map(o).join("\n")},e},es.csv=es.dsv(",","text/csv"),es.tsv=es.dsv("	","text/tab-separated-values");var Qs,tu,nu,eu,iu,ru=this[w(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};es.timer=function(t,n,e){var i=arguments.length;2>i&&(n=0),3>i&&(e=Date.now());var r=e+n,o={c:t,t:r,f:!1,n:null};tu?tu.n=o:Qs=o,tu=o,nu||(eu=clearTimeout(eu),nu=1,ru(An))},es.timer.flush=function(){zn(),$n()},es.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)};var ou=["y","z","a","f","p","n","\u00b5","m","","k","M","G","T","P","E","Z","Y"].map(En);es.formatPrefix=function(t,n){var e=0;return t&&(0>t&&(t*=-1),n&&(t=es.round(t,Dn(t,n))),e=1+Math.floor(1e-12+Math.log(t)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),ou[8+e/3]};var au=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,su=es.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(t,n){return(t=es.round(t,Dn(t,n))).toFixed(Math.max(0,Math.min(20,Dn(t*(1+1e-15),n))))}}),uu=es.time={},lu=Date;Fn.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){hu.setUTCDate.apply(this._,arguments)},setDay:function(){hu.setUTCDay.apply(this._,arguments)},setFullYear:function(){hu.setUTCFullYear.apply(this._,arguments)},setHours:function(){hu.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){hu.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){hu.setUTCMinutes.apply(this._,arguments)},setMonth:function(){hu.setUTCMonth.apply(this._,arguments)},setSeconds:function(){hu.setUTCSeconds.apply(this._,arguments)},setTime:function(){hu.setTime.apply(this._,arguments)}};var hu=Date.prototype;uu.year=Hn(function(t){return t=uu.day(t),t.setMonth(0,1),t},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t){return t.getFullYear()}),uu.years=uu.year.range,uu.years.utc=uu.year.utc.range,uu.day=Hn(function(t){var n=new lu(2e3,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n},function(t,n){t.setDate(t.getDate()+n)},function(t){return t.getDate()-1}),uu.days=uu.day.range,uu.days.utc=uu.day.utc.range,uu.dayOfYear=function(t){var n=uu.year(t);return Math.floor((t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=uu[t]=Hn(function(t){return(t=uu.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,n){t.setDate(t.getDate()+7*Math.floor(n))},function(t){var e=uu.year(t).getDay();return Math.floor((uu.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});uu[t+"s"]=e.range,uu[t+"s"].utc=e.utc.range,uu[t+"OfYear"]=function(t){var e=uu.year(t).getDay();return Math.floor((uu.dayOfYear(t)+(e+n)%7)/7)}}),uu.week=uu.sunday,uu.weeks=uu.sunday.range,uu.weeks.utc=uu.sunday.utc.range,uu.weekOfYear=uu.sundayOfYear;var cu={"-":"",_:" ",0:"0"},fu=/^\s*\d+/,gu=/^%/;es.locale=function(t){return{numberFormat:Ln(t),timeFormat:On(t)}};var du=es.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});es.format=du.numberFormat,es.geo={},le.prototype={s:0,t:0,add:function(t){he(t,this.t,pu),he(pu.s,this.s,this),this.s?this.t+=pu.t:this.s=pu.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s
}};var pu=new le;es.geo.stream=function(t,n){t&&mu.hasOwnProperty(t.type)?mu[t.type](t,n):ce(t,n)};var mu={Feature:function(t,n){ce(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,i=-1,r=e.length;r>++i;)ce(e[i].geometry,n)}},vu={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;r>++i;)t=e[i],n.point(t[0],t[1],t[2])},LineString:function(t,n){fe(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;r>++i;)fe(e[i],n,0)},Polygon:function(t,n){ge(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;r>++i;)ge(e[i],n)},GeometryCollection:function(t,n){for(var e=t.geometries,i=-1,r=e.length;r>++i;)ce(e[i],n)}};es.geo.area=function(t){return yu=0,es.geo.stream(t,wu),yu};var yu,xu=new le,wu={sphere:function(){yu+=4*As},point:S,lineStart:S,lineEnd:S,polygonStart:function(){xu.reset(),wu.lineStart=de},polygonEnd:function(){var t=2*xu;yu+=0>t?4*As+t:t,wu.lineStart=wu.lineEnd=wu.point=S}};es.geo.bounds=function(){function t(t,n){x.push(w=[h=t,f=t]),c>n&&(c=n),n>g&&(g=n)}function n(n,e){var i=pe([n*Es,e*Es]);if(v){var r=ve(v,i),o=[r[1],-r[0],0],a=ve(o,r);we(a),a=Se(a);var u=n-d,l=u>0?1:-1,p=a[0]*Ls*l,m=ds(u)>180;if(m^(p>l*d&&l*n>p)){var y=a[1]*Ls;y>g&&(g=y)}else if(p=(p+360)%360-180,m^(p>l*d&&l*n>p)){var y=-a[1]*Ls;c>y&&(c=y)}else c>e&&(c=e),e>g&&(g=e);m?d>n?s(h,n)>s(h,f)&&(f=n):s(n,f)>s(h,f)&&(h=n):f>=h?(h>n&&(h=n),n>f&&(f=n)):n>d?s(h,n)>s(h,f)&&(f=n):s(n,f)>s(h,f)&&(h=n)}else t(n,e);v=i,d=n}function e(){S.point=n}function i(){w[0]=h,w[1]=f,S.point=t,v=null}function r(t,e){if(v){var i=t-d;y+=ds(i)>180?i+(i>0?360:-360):i}else p=t,m=e;wu.point(t,e),n(t,e)}function o(){wu.lineStart()}function a(){r(p,m),wu.lineEnd(),ds(y)>Ns&&(h=-(f=180)),w[0]=h,w[1]=f,v=null}function s(t,n){return 0>(n-=t)?n+360:n}function u(t,n){return t[0]-n[0]}function l(t,n){return n[0]<=n[1]?t>=n[0]&&n[1]>=t:n[0]>t||t>n[1]}var h,c,f,g,d,p,m,v,y,x,w,S={point:t,lineStart:e,lineEnd:i,polygonStart:function(){S.point=r,S.lineStart=o,S.lineEnd=a,y=0,wu.polygonStart()},polygonEnd:function(){wu.polygonEnd(),S.point=t,S.lineStart=e,S.lineEnd=i,0>xu?(h=-(f=180),c=-(g=90)):y>Ns?g=90:-Ns>y&&(c=-90),w[0]=h,w[1]=f}};return function(t){g=f=-(h=c=1/0),x=[],es.geo.stream(t,S);var n=x.length;if(n){x.sort(u);for(var e,i=1,r=x[0],o=[r];n>i;++i)e=x[i],l(e[0],r)||l(e[1],r)?(s(r[0],e[1])>s(r[0],r[1])&&(r[1]=e[1]),s(e[0],r[1])>s(r[0],r[1])&&(r[0]=e[0])):o.push(r=e);for(var a,e,d=-1/0,n=o.length-1,i=0,r=o[n];n>=i;r=e,++i)e=o[i],(a=s(r[1],e[0]))>d&&(d=a,h=e[0],f=r[1])}return x=w=null,1/0===h||1/0===c?[[0/0,0/0],[0/0,0/0]]:[[h,c],[f,g]]}}(),es.geo.centroid=function(t){Su=Mu=bu=Cu=Pu=Ru=Tu=_u=ku=Nu=Iu=0,es.geo.stream(t,Au);var n=ku,e=Nu,i=Iu,r=n*n+e*e+i*i;return Is>r&&(n=Ru,e=Tu,i=_u,Ns>Mu&&(n=bu,e=Cu,i=Pu),r=n*n+e*e+i*i,Is>r)?[0/0,0/0]:[Math.atan2(e,n)*Ls,nn(i/Math.sqrt(r))*Ls]};var Su,Mu,bu,Cu,Pu,Ru,Tu,_u,ku,Nu,Iu,Au={sphere:S,point:be,lineStart:Pe,lineEnd:Re,polygonStart:function(){Au.lineStart=Te},polygonEnd:function(){Au.lineStart=Pe}},zu=ze(ke,Le,Fe,[-As,-As/2]),$u=1e9;es.geo.clipExtent=function(){var t,n,e,i,r,o,a={stream:function(t){return r&&(r.valid=!1),r=o(t),r.valid=!0,r},extent:function(s){return arguments.length?(o=Ve(t=+s[0][0],n=+s[0][1],e=+s[1][0],i=+s[1][1]),r&&(r.valid=!1,r=null),a):[[t,n],[e,i]]}};return a.extent([[0,0],[960,500]])},(es.geo.conicEqualArea=function(){return Ue(We)}).raw=We,es.geo.albers=function(){return es.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},es.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return n=null,e(o,a),n||(i(o,a),n)||r(o,a),n}var n,e,i,r,o=es.geo.albers(),a=es.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=es.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,e){n=[t,e]}};return t.invert=function(t){var n=o.scale(),e=o.translate(),i=(t[0]-e[0])/n,r=(t[1]-e[1])/n;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?a:r>=.166&&.234>r&&i>=-.214&&-.115>i?s:o).invert(t)},t.stream=function(t){var n=o.stream(t),e=a.stream(t),i=s.stream(t);return{point:function(t,r){n.point(t,r),e.point(t,r),i.point(t,r)},sphere:function(){n.sphere(),e.sphere(),i.sphere()},lineStart:function(){n.lineStart(),e.lineStart(),i.lineStart()},lineEnd:function(){n.lineEnd(),e.lineEnd(),i.lineEnd()},polygonStart:function(){n.polygonStart(),e.polygonStart(),i.polygonStart()},polygonEnd:function(){n.polygonEnd(),e.polygonEnd(),i.polygonEnd()}}},t.precision=function(n){return arguments.length?(o.precision(n),a.precision(n),s.precision(n),t):o.precision()},t.scale=function(n){return arguments.length?(o.scale(n),a.scale(.35*n),s.scale(n),t.translate(o.translate())):o.scale()},t.translate=function(n){if(!arguments.length)return o.translate();var l=o.scale(),h=+n[0],c=+n[1];return e=o.translate(n).clipExtent([[h-.455*l,c-.238*l],[h+.455*l,c+.238*l]]).stream(u).point,i=a.translate([h-.307*l,c+.201*l]).clipExtent([[h-.425*l+Ns,c+.12*l+Ns],[h-.214*l-Ns,c+.234*l-Ns]]).stream(u).point,r=s.translate([h-.205*l,c+.212*l]).clipExtent([[h-.214*l+Ns,c+.166*l+Ns],[h-.115*l-Ns,c+.234*l-Ns]]).stream(u).point,t},t.scale(1070)};var Du,Eu,Lu,Bu,Fu,Hu,qu={point:S,lineStart:S,lineEnd:S,polygonStart:function(){Eu=0,qu.lineStart=je},polygonEnd:function(){qu.lineStart=qu.lineEnd=qu.point=S,Du+=ds(Eu/2)}},Ou={point:Ye,lineStart:S,lineEnd:S,polygonStart:S,polygonEnd:S},Vu={point:Ke,lineStart:Ge,lineEnd:Je,polygonStart:function(){Vu.lineStart=Qe},polygonEnd:function(){Vu.point=Ke,Vu.lineStart=Ge,Vu.lineEnd=Je}};es.geo.path=function(){function t(t){return t&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=r(o)),es.geo.stream(t,a)),o.result()}function n(){return a=null,t}var e,i,r,o,a,s=4.5;return t.area=function(t){return Du=0,es.geo.stream(t,r(qu)),Du},t.centroid=function(t){return bu=Cu=Pu=Ru=Tu=_u=ku=Nu=Iu=0,es.geo.stream(t,r(Vu)),Iu?[ku/Iu,Nu/Iu]:_u?[Ru/_u,Tu/_u]:Pu?[bu/Pu,Cu/Pu]:[0/0,0/0]},t.bounds=function(t){return Fu=Hu=-(Lu=Bu=1/0),es.geo.stream(t,r(Ou)),[[Lu,Bu],[Fu,Hu]]},t.projection=function(t){return arguments.length?(r=(e=t)?t.stream||ei(t):y,n()):e},t.context=function(t){return arguments.length?(o=null==(i=t)?new Xe:new ti(t),"function"!=typeof s&&o.pointRadius(s),n()):i},t.pointRadius=function(n){return arguments.length?(s="function"==typeof n?n:(o.pointRadius(+n),+n),t):s},t.projection(es.geo.albersUsa()).context(null)},es.geo.transform=function(t){return{stream:function(n){var e=new ii(n);for(var i in t)e[i]=t[i];return e}}},ii.prototype={point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},es.geo.projection=oi,es.geo.projectionMutator=ai,(es.geo.equirectangular=function(){return oi(ui)}).raw=ui.invert=ui,es.geo.rotation=function(t){function n(n){return n=t(n[0]*Es,n[1]*Es),n[0]*=Ls,n[1]*=Ls,n}return t=hi(t[0]%360*Es,t[1]*Es,t.length>2?t[2]*Es:0),n.invert=function(n){return n=t.invert(n[0]*Es,n[1]*Es),n[0]*=Ls,n[1]*=Ls,n},n},li.invert=ui,es.geo.circle=function(){function t(){var t="function"==typeof i?i.apply(this,arguments):i,n=hi(-t[0]*Es,-t[1]*Es,0).invert,r=[];return e(null,null,1,{point:function(t,e){r.push(t=n(t,e)),t[0]*=Ls,t[1]*=Ls}}),{type:"Polygon",coordinates:[r]}}var n,e,i=[0,0],r=6;return t.origin=function(n){return arguments.length?(i=n,t):i},t.angle=function(i){return arguments.length?(e=di((n=+i)*Es,r*Es),t):n},t.precision=function(i){return arguments.length?(e=di(n*Es,(r=+i)*Es),t):r},t.angle(90)},es.geo.distance=function(t,n){var e,i=(n[0]-t[0])*Es,r=t[1]*Es,o=n[1]*Es,a=Math.sin(i),s=Math.cos(i),u=Math.sin(r),l=Math.cos(r),h=Math.sin(o),c=Math.cos(o);return Math.atan2(Math.sqrt((e=c*a)*e+(e=l*h-u*c*s)*e),u*h+l*c*s)},es.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return es.range(Math.ceil(o/m)*m,r,m).map(f).concat(es.range(Math.ceil(l/v)*v,u,v).map(g)).concat(es.range(Math.ceil(i/d)*d,e,d).filter(function(t){return ds(t%m)>Ns}).map(h)).concat(es.range(Math.ceil(s/p)*p,a,p).filter(function(t){return ds(t%v)>Ns}).map(c))}var e,i,r,o,a,s,u,l,h,c,f,g,d=10,p=d,m=90,v=360,y=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[f(o).concat(g(u).slice(1),f(r).reverse().slice(1),g(l).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.majorExtent(n).minorExtent(n):t.minorExtent()},t.majorExtent=function(n){return arguments.length?(o=+n[0][0],r=+n[1][0],l=+n[0][1],u=+n[1][1],o>r&&(n=o,o=r,r=n),l>u&&(n=l,l=u,u=n),t.precision(y)):[[o,l],[r,u]]},t.minorExtent=function(n){return arguments.length?(i=+n[0][0],e=+n[1][0],s=+n[0][1],a=+n[1][1],i>e&&(n=i,i=e,e=n),s>a&&(n=s,s=a,a=n),t.precision(y)):[[i,s],[e,a]]},t.step=function(n){return arguments.length?t.majorStep(n).minorStep(n):t.minorStep()},t.majorStep=function(n){return arguments.length?(m=+n[0],v=+n[1],t):[m,v]},t.minorStep=function(n){return arguments.length?(d=+n[0],p=+n[1],t):[d,p]},t.precision=function(n){return arguments.length?(y=+n,h=mi(s,a,90),c=vi(i,e,y),f=mi(l,u,90),g=vi(o,r,y),t):y},t.majorExtent([[-180,-90+Ns],[180,90-Ns]]).minorExtent([[-180,-80-Ns],[180,80+Ns]])},es.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[n||i.apply(this,arguments),e||r.apply(this,arguments)]}}var n,e,i=yi,r=xi;return t.distance=function(){return es.geo.distance(n||i.apply(this,arguments),e||r.apply(this,arguments))},t.source=function(e){return arguments.length?(i=e,n="function"==typeof e?null:e,t):i},t.target=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.precision=function(){return arguments.length?t:0},t},es.geo.interpolate=function(t,n){return wi(t[0]*Es,t[1]*Es,n[0]*Es,n[1]*Es)},es.geo.length=function(t){return Uu=0,es.geo.stream(t,Wu),Uu};var Uu,Wu={sphere:S,point:S,lineStart:Si,lineEnd:S,polygonStart:S,polygonEnd:S},ju=Mi(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(es.geo.azimuthalEqualArea=function(){return oi(ju)}).raw=ju;var Yu=Mi(function(t){var n=Math.acos(t);return n&&n/Math.sin(n)},y);(es.geo.azimuthalEquidistant=function(){return oi(Yu)}).raw=Yu,(es.geo.conicConformal=function(){return Ue(bi)}).raw=bi,(es.geo.conicEquidistant=function(){return Ue(Ci)}).raw=Ci;var Xu=Mi(function(t){return 1/t},Math.atan);(es.geo.gnomonic=function(){return oi(Xu)}).raw=Xu,Pi.invert=function(t,n){return[t,2*Math.atan(Math.exp(n))-Ds]},(es.geo.mercator=function(){return Ri(Pi)}).raw=Pi;var Zu=Mi(function(){return 1},Math.asin);(es.geo.orthographic=function(){return oi(Zu)}).raw=Zu;var Ku=Mi(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(es.geo.stereographic=function(){return oi(Ku)}).raw=Ku,Ti.invert=function(t,n){return[-n,2*Math.atan(Math.exp(t))-Ds]},(es.geo.transverseMercator=function(){var t=Ri(Ti),n=t.center,e=t.rotate;return t.center=function(t){return t?n([-t[1],t[0]]):(t=n(),[t[1],-t[0]])},t.rotate=function(t){return t?e([t[0],t[1],t.length>2?t[2]+90:90]):(t=e(),[t[0],t[1],t[2]-90])},e([0,0,90])}).raw=Ti,es.geom={},es.geom.hull=function(t){function n(t){if(3>t.length)return[];var n,r=Tn(e),o=Tn(i),a=t.length,s=[],u=[];for(n=0;a>n;n++)s.push([+r.call(this,t[n],n),+o.call(this,t[n],n),n]);for(s.sort(Ii),n=0;a>n;n++)u.push([s[n][0],-s[n][1]]);var l=Ni(s),h=Ni(u),c=h[0]===l[0],f=h[h.length-1]===l[l.length-1],g=[];for(n=l.length-1;n>=0;--n)g.push(t[s[l[n]][2]]);for(n=+c;h.length-f>n;++n)g.push(t[s[h[n]][2]]);return g}var e=_i,i=ki;return arguments.length?n(t):(n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(i=t,n):i},n)},es.geom.polygon=function(t){return xs(t,Gu),t};var Gu=es.geom.polygon.prototype=[];Gu.area=function(){for(var t,n=-1,e=this.length,i=this[e-1],r=0;e>++n;)t=i,i=this[n],r+=t[1]*i[0]-t[0]*i[1];return.5*r},Gu.centroid=function(t){var n,e,i=-1,r=this.length,o=0,a=0,s=this[r-1];for(arguments.length||(t=-1/(6*this.area()));r>++i;)n=s,s=this[i],e=n[0]*s[1]-s[0]*n[1],o+=(n[0]+s[0])*e,a+=(n[1]+s[1])*e;return[o*t,a*t]},Gu.clip=function(t){for(var n,e,i,r,o,a,s=$i(t),u=-1,l=this.length-$i(this),h=this[l-1];l>++u;){for(n=t.slice(),t.length=0,r=this[u],o=n[(i=n.length-s)-1],e=-1;i>++e;)a=n[e],Ai(a,h,r)?(Ai(o,h,r)||t.push(zi(o,a,h,r)),t.push(a)):Ai(o,h,r)&&t.push(zi(o,a,h,r)),o=a;s&&t.push(t[0]),h=r}return t};var Ju,Qu,tl,nl,el,il=[],rl=[];Oi.prototype.prepare=function(){for(var t,n=this.edges,e=n.length;e--;)t=n[e].edge,t.b&&t.a||n.splice(e,1);return n.sort(Ui),n.length},tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nr.prototype={insert:function(t,n){var e,i,r;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=or(this._),n.P=null,n.N=t,t.P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)i=e.U,e===i.L?(r=i.R,r&&r.C?(e.C=r.C=!1,i.C=!0,t=i):(t===e.R&&(ir(this,e),t=e,e=t.U),e.C=!1,i.C=!0,rr(this,i))):(r=i.L,r&&r.C?(e.C=r.C=!1,i.C=!0,t=i):(t===e.L&&(rr(this,e),t=e,e=t.U),e.C=!1,i.C=!0,ir(this,i))),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,i,r=t.U,o=t.L,a=t.R;if(e=o?a?or(a):o:a,r?r.L===t?r.L=e:r.R=e:this._=e,o&&a?(i=e.C,e.C=t.C,e.L=o,o.U=e,e!==a?(r=e.U,e.U=t.U,t=e.R,r.L=t,e.R=a,a.U=e):(e.U=r,r=e,t=e.R)):(i=t.C,t=e),t&&(t.U=r),!i){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if(n=r.R,n.C&&(n.C=!1,r.C=!0,ir(this,r),n=r.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,rr(this,n),n=r.R),n.C=r.C,r.C=n.R.C=!1,ir(this,r),t=this._;break}}else if(n=r.L,n.C&&(n.C=!1,r.C=!0,rr(this,r),n=r.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,ir(this,n),n=r.L),n.C=r.C,r.C=n.L.C=!1,rr(this,r),t=this._;break}n.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},es.geom.voronoi=function(t){function n(t){var n=Array(t.length),i=s[0][0],r=s[0][1],o=s[1][0],a=s[1][1];return ar(e(t),s).cells.forEach(function(e,s){var u=e.edges,l=e.site,h=n[s]=u.length?u.map(function(t){var n=t.start();return[n.x,n.y]}):l.x>=i&&o>=l.x&&l.y>=r&&a>=l.y?[[i,a],[o,a],[o,r],[i,r]]:[];h.point=t[s]}),n}function e(t){return t.map(function(t,n){return{x:Math.round(o(t,n)/Ns)*Ns,y:Math.round(a(t,n)/Ns)*Ns,i:n}})}var i=_i,r=ki,o=i,a=r,s=ol;return t?n(t):(n.links=function(t){return ar(e(t)).edges.filter(function(t){return t.l&&t.r}).map(function(n){return{source:t[n.l.i],target:t[n.r.i]}})},n.triangles=function(t){var n=[];return ar(e(t)).cells.forEach(function(e,i){for(var r,o,a=e.site,s=e.edges.sort(Ui),u=-1,l=s.length,h=s[l-1].edge,c=h.l===a?h.r:h.l;l>++u;)r=h,o=c,h=s[u].edge,c=h.l===a?h.r:h.l,o.i>i&&c.i>i&&0>ur(a,o,c)&&n.push([t[i],t[o.i],t[c.i]])}),n},n.x=function(t){return arguments.length?(o=Tn(i=t),n):i},n.y=function(t){return arguments.length?(a=Tn(r=t),n):r},n.clipExtent=function(t){return arguments.length?(s=null==t?ol:t,n):s===ol?null:s},n.size=function(t){return arguments.length?n.clipExtent(t&&[[0,0],t]):s===ol?null:s&&s[1]},n)};var ol=[[-1e6,-1e6],[1e6,1e6]];es.geom.delaunay=function(t){return es.geom.voronoi().triangles(t)},es.geom.quadtree=function(t,n,e,i,r){function o(t){function o(t,n,e,i,r,o,a,s){if(!isNaN(e)&&!isNaN(i))if(t.leaf){var u=t.x,h=t.y;if(null!=u)if(.01>ds(u-e)+ds(h-i))l(t,n,e,i,r,o,a,s);else{var c=t.point;t.x=t.y=t.point=null,l(t,c,u,h,r,o,a,s),l(t,n,e,i,r,o,a,s)}else t.x=e,t.y=i,t.point=n}else l(t,n,e,i,r,o,a,s)}function l(t,n,e,i,r,a,s,u){var l=.5*(r+s),h=.5*(a+u),c=e>=l,f=i>=h,g=f<<1|c;t.leaf=!1,t=t.nodes[g]||(t.nodes[g]=cr()),c?r=l:s=l,f?a=h:u=h,o(t,n,e,i,r,a,s,u)}var h,c,f,g,d,p,m,v,y,x=Tn(s),w=Tn(u);if(null!=n)p=n,m=e,v=i,y=r;else if(v=y=-(p=m=1/0),c=[],f=[],d=t.length,a)for(g=0;d>g;++g)h=t[g],p>h.x&&(p=h.x),m>h.y&&(m=h.y),h.x>v&&(v=h.x),h.y>y&&(y=h.y),c.push(h.x),f.push(h.y);else for(g=0;d>g;++g){var S=+x(h=t[g],g),M=+w(h,g);p>S&&(p=S),m>M&&(m=M),S>v&&(v=S),M>y&&(y=M),c.push(S),f.push(M)}var b=v-p,C=y-m;b>C?y=m+b:v=p+C;var P=cr();if(P.add=function(t){o(P,t,+x(t,++g),+w(t,g),p,m,v,y)},P.visit=function(t){fr(t,P,p,m,v,y)},P.find=function(t){return gr(P,t[0],t[1],p,m,v,y)},g=-1,null==n){for(;d>++g;)o(P,t[g],c[g],f[g],p,m,v,y);--g}else t.forEach(P.add);return c=f=t=h=null,P}var a,s=_i,u=ki;return(a=arguments.length)?(s=lr,u=hr,3===a&&(r=e,i=n,e=n=0),o(t)):(o.x=function(t){return arguments.length?(s=t,o):s},o.y=function(t){return arguments.length?(u=t,o):u},o.extent=function(t){return arguments.length?(null==t?n=e=i=r=null:(n=+t[0][0],e=+t[0][1],i=+t[1][0],r=+t[1][1]),o):null==n?null:[[n,e],[i,r]]},o.size=function(t){return arguments.length?(null==t?n=e=i=r=null:(n=e=0,i=+t[0],r=+t[1]),o):null==n?null:[i-n,r-e]},o)},es.interpolateRgb=dr,es.interpolateObject=pr,es.interpolateNumber=mr,es.interpolateString=vr;var al=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sl=RegExp(al.source,"g");es.interpolate=yr,es.interpolators=[function(t,n){var e=typeof n;return("string"===e?Js.has(n.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(n)?dr:vr:n instanceof sn?dr:Array.isArray(n)?xr:"object"===e&&isNaN(n)?pr:mr)(t,n)}],es.interpolateArray=xr;var ul=function(){return y},ll=es.map({linear:ul,poly:Rr,quad:function(){return br},cubic:function(){return Cr},sin:function(){return Tr},exp:function(){return _r},circle:function(){return kr},elastic:Nr,back:Ir,bounce:function(){return Ar}}),hl=es.map({"in":y,out:Sr,"in-out":Mr,"out-in":function(t){return Mr(Sr(t))}});es.ease=function(t){var n=t.indexOf("-"),e=n>=0?t.slice(0,n):t,i=n>=0?t.slice(n+1):"in";return e=ll.get(e)||ul,i=hl.get(i)||y,wr(i(e.apply(null,is.call(arguments,1))))},es.interpolateHcl=zr,es.interpolateHsl=$r,es.interpolateLab=Dr,es.interpolateRound=Er,es.transform=function(t){var n=os.createElementNS(es.ns.prefix.svg,"g");return(es.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new Lr(e?e.matrix:cl)})(t)},Lr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var cl={a:1,b:0,c:0,d:1,e:0,f:0};es.interpolateTransform=qr,es.layout={},es.layout.bundle=function(){return function(t){for(var n=[],e=-1,i=t.length;i>++e;)n.push(Ur(t[e]));return n}},es.layout.chord=function(){function t(){var t,l,c,f,g,d={},p=[],m=es.range(o),v=[];for(e=[],i=[],t=0,f=-1;o>++f;){for(l=0,g=-1;o>++g;)l+=r[f][g];p.push(l),v.push(es.range(o)),t+=l}for(a&&m.sort(function(t,n){return a(p[t],p[n])}),s&&v.forEach(function(t,n){t.sort(function(t,e){return s(r[n][t],r[n][e])})}),t=(zs-h*o)/t,l=0,f=-1;o>++f;){for(c=l,g=-1;o>++g;){var y=m[f],x=v[y][g],w=r[y][x],S=l,M=l+=w*t;d[y+"-"+x]={index:y,subindex:x,startAngle:S,endAngle:M,value:w}}i[y]={index:y,startAngle:c,endAngle:l,value:(l-c)/t},l+=h}for(f=-1;o>++f;)for(g=f-1;o>++g;){var b=d[f+"-"+g],C=d[g+"-"+f];(b.value||C.value)&&e.push(b.value<C.value?{source:C,target:b}:{source:b,target:C})}u&&n()}function n(){e.sort(function(t,n){return u((t.source.value+t.target.value)/2,(n.source.value+n.target.value)/2)})}var e,i,r,o,a,s,u,l={},h=0;return l.matrix=function(t){return arguments.length?(o=(r=t)&&r.length,e=i=null,l):r},l.padding=function(t){return arguments.length?(h=t,e=i=null,l):h},l.sortGroups=function(t){return arguments.length?(a=t,e=i=null,l):a},l.sortSubgroups=function(t){return arguments.length?(s=t,e=null,l):s},l.sortChords=function(t){return arguments.length?(u=t,e&&n(),l):u},l.chords=function(){return e||t(),e},l.groups=function(){return i||t(),i},l},es.layout.force=function(){function t(t){return function(n,e,i,r){if(n.point!==t){var o=n.cx-t.x,a=n.cy-t.y,s=r-e,u=o*o+a*a;if(u>s*s/m){if(d>u){var l=n.charge/u;t.px-=o*l,t.py-=a*l}return!0}if(n.point&&u&&d>u){var l=n.pointCharge/u;t.px-=o*l,t.py-=a*l}}return!n.charge}}function n(t){t.px=es.event.x,t.py=es.event.y,s.resume()}var e,i,r,o,a,s={},u=es.dispatch("start","tick","end"),l=[1,1],h=.9,c=fl,f=gl,g=-30,d=dl,p=.1,m=.64,v=[],x=[];return s.tick=function(){if(.005>(i*=.99))return u.end({type:"end",alpha:i=0}),!0;var n,e,s,c,f,d,m,y,w,S=v.length,M=x.length;for(e=0;M>e;++e)s=x[e],c=s.source,f=s.target,y=f.x-c.x,w=f.y-c.y,(d=y*y+w*w)&&(d=i*o[e]*((d=Math.sqrt(d))-r[e])/d,y*=d,w*=d,f.x-=y*(m=c.weight/(f.weight+c.weight)),f.y-=w*m,c.x+=y*(m=1-m),c.y+=w*m);if((m=i*p)&&(y=l[0]/2,w=l[1]/2,e=-1,m))for(;S>++e;)s=v[e],s.x+=(y-s.x)*m,s.y+=(w-s.y)*m;if(g)for(Gr(n=es.geom.quadtree(v),i,a),e=-1;S>++e;)(s=v[e]).fixed||n.visit(t(s));for(e=-1;S>++e;)s=v[e],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*h,s.y-=(s.py-(s.py=s.y))*h);u.tick({type:"tick",alpha:i})},s.nodes=function(t){return arguments.length?(v=t,s):v},s.links=function(t){return arguments.length?(x=t,s):x},s.size=function(t){return arguments.length?(l=t,s):l},s.linkDistance=function(t){return arguments.length?(c="function"==typeof t?t:+t,s):c},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(f="function"==typeof t?t:+t,s):f},s.friction=function(t){return arguments.length?(h=+t,s):h},s.charge=function(t){return arguments.length?(g="function"==typeof t?t:+t,s):g},s.chargeDistance=function(t){return arguments.length?(d=t*t,s):Math.sqrt(d)},s.gravity=function(t){return arguments.length?(p=+t,s):p},s.theta=function(t){return arguments.length?(m=t*t,s):Math.sqrt(m)},s.alpha=function(t){return arguments.length?(t=+t,i?i=t>0?t:0:t>0&&(u.start({type:"start",alpha:i=t}),es.timer(s.tick)),s):i},s.start=function(){function t(t,i){if(!e){for(e=Array(u),s=0;u>s;++s)e[s]=[];for(s=0;h>s;++s){var r=x[s];e[r.source.index].push(r.target),e[r.target.index].push(r.source)}}for(var o,a=e[n],s=-1,l=a.length;l>++s;)if(!isNaN(o=a[s][t]))return o;return Math.random()*i}var n,e,i,u=v.length,h=x.length,d=l[0],p=l[1];for(n=0;u>n;++n)(i=v[n]).index=n,i.weight=0;for(n=0;h>n;++n)i=x[n],"number"==typeof i.source&&(i.source=v[i.source]),"number"==typeof i.target&&(i.target=v[i.target]),++i.source.weight,++i.target.weight;for(n=0;u>n;++n)i=v[n],isNaN(i.x)&&(i.x=t("x",d)),isNaN(i.y)&&(i.y=t("y",p)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(r=[],"function"==typeof c)for(n=0;h>n;++n)r[n]=+c.call(this,x[n],n);else for(n=0;h>n;++n)r[n]=c;if(o=[],"function"==typeof f)for(n=0;h>n;++n)o[n]=+f.call(this,x[n],n);else for(n=0;h>n;++n)o[n]=f;if(a=[],"function"==typeof g)for(n=0;u>n;++n)a[n]=+g.call(this,v[n],n);else for(n=0;u>n;++n)a[n]=g;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return e||(e=es.behavior.drag().origin(y).on("dragstart.force",Yr).on("drag.force",n).on("dragend.force",Xr)),arguments.length?void this.on("mouseover.force",Zr).on("mouseout.force",Kr).call(e):e},es.rebind(s,u,"on")};var fl=20,gl=1,dl=1/0;es.layout.hierarchy=function(){function t(r){var o,a=[r],s=[];for(r.depth=0;null!=(o=a.pop());)if(s.push(o),(l=e.call(t,o,o.depth))&&(u=l.length)){for(var u,l,h;--u>=0;)a.push(h=l[u]),h.parent=o,h.depth=o.depth+1;i&&(o.value=0),o.children=l}else i&&(o.value=+i.call(t,o,o.depth)||0),delete o.children;return to(r,function(t){var e,r;n&&(e=t.children)&&e.sort(n),i&&(r=t.parent)&&(r.value+=t.value)}),s}var n=io,e=no,i=eo;return t.sort=function(e){return arguments.length?(n=e,t):n},t.children=function(n){return arguments.length?(e=n,t):e},t.value=function(n){return arguments.length?(i=n,t):i},t.revalue=function(n){return i&&(Qr(n,function(t){t.children&&(t.value=0)}),to(n,function(n){var e;n.children||(n.value=+i.call(t,n,n.depth)||0),(e=n.parent)&&(e.value+=n.value)})),n},t},es.layout.partition=function(){function t(n,e,i,r){var o=n.children;if(n.x=e,n.y=n.depth*r,n.dx=i,n.dy=r,o&&(a=o.length)){var a,s,u,l=-1;for(i=n.value?i/n.value:0;a>++l;)t(s=o[l],e,u=s.value*i,r),e+=u}}function n(t){var e=t.children,i=0;if(e&&(r=e.length))for(var r,o=-1;r>++o;)i=Math.max(i,n(e[o]));return 1+i}function e(e,o){var a=i.call(this,e,o);return t(a[0],0,r[0],r[1]/n(a[0])),a}var i=es.layout.hierarchy(),r=[1,1];return e.size=function(t){return arguments.length?(r=t,e):r},Jr(e,i)},es.layout.pie=function(){function t(a){var s,u=a.length,l=a.map(function(e,i){return+n.call(t,e,i)}),h=+("function"==typeof i?i.apply(this,arguments):i),c=("function"==typeof r?r.apply(this,arguments):r)-h,f=Math.min(Math.abs(c)/u,+("function"==typeof o?o.apply(this,arguments):o)),g=f*(0>c?-1:1),d=(c-u*g)/es.sum(l),p=es.range(u),m=[];return null!=e&&p.sort(e===pl?function(t,n){return l[n]-l[t]}:function(t,n){return e(a[t],a[n])}),p.forEach(function(t){m[t]={data:a[t],value:s=l[t],startAngle:h,endAngle:h+=s*d+g,padAngle:f}}),m}var n=Number,e=pl,i=0,r=zs,o=0;return t.value=function(e){return arguments.length?(n=e,t):n},t.sort=function(n){return arguments.length?(e=n,t):e},t.startAngle=function(n){return arguments.length?(i=n,t):i},t.endAngle=function(n){return arguments.length?(r=n,t):r},t.padAngle=function(n){return arguments.length?(o=n,t):o},t};var pl={};es.layout.stack=function(){function t(s,u){if(!(f=s.length))return s;var l=s.map(function(e,i){return n.call(t,e,i)}),h=l.map(function(n){return n.map(function(n,e){return[o.call(t,n,e),a.call(t,n,e)]})}),c=e.call(t,h,u);l=es.permute(l,c),h=es.permute(h,c);var f,g,d,p,m=i.call(t,h,u),v=l[0].length;for(d=0;v>d;++d)for(r.call(t,l[0][d],p=m[d],h[0][d][1]),g=1;f>g;++g)r.call(t,l[g][d],p+=h[g-1][d][1],h[g][d][1]);return s}var n=y,e=uo,i=lo,r=so,o=oo,a=ao;return t.values=function(e){return arguments.length?(n=e,t):n},t.order=function(n){return arguments.length?(e="function"==typeof n?n:ml.get(n)||uo,t):e},t.offset=function(n){return arguments.length?(i="function"==typeof n?n:vl.get(n)||lo,t):i},t.x=function(n){return arguments.length?(o=n,t):o},t.y=function(n){return arguments.length?(a=n,t):a},t.out=function(n){return arguments.length?(r=n,t):r},t};var ml=es.map({"inside-out":function(t){var n,e,i=t.length,r=t.map(ho),o=t.map(co),a=es.range(i).sort(function(t,n){return r[t]-r[n]}),s=0,u=0,l=[],h=[];for(n=0;i>n;++n)e=a[n],u>s?(s+=o[e],l.push(e)):(u+=o[e],h.push(e));return h.reverse().concat(l)},reverse:function(t){return es.range(t.length).reverse()},"default":uo}),vl=es.map({silhouette:function(t){var n,e,i,r=t.length,o=t[0].length,a=[],s=0,u=[];for(e=0;o>e;++e){for(n=0,i=0;r>n;n++)i+=t[n][e][1];i>s&&(s=i),a.push(i)}for(e=0;o>e;++e)u[e]=(s-a[e])/2;return u},wiggle:function(t){var n,e,i,r,o,a,s,u,l,h=t.length,c=t[0],f=c.length,g=[];for(g[0]=u=l=0,e=1;f>e;++e){for(n=0,r=0;h>n;++n)r+=t[n][e][1];for(n=0,o=0,s=c[e][0]-c[e-1][0];h>n;++n){for(i=0,a=(t[n][e][1]-t[n][e-1][1])/(2*s);n>i;++i)a+=(t[i][e][1]-t[i][e-1][1])/s;o+=a*t[n][e][1]}g[e]=u-=r?o/r*s:0,l>u&&(l=u)}for(e=0;f>e;++e)g[e]-=l;return g},expand:function(t){var n,e,i,r=t.length,o=t[0].length,a=1/r,s=[];for(e=0;o>e;++e){for(n=0,i=0;r>n;n++)i+=t[n][e][1];if(i)for(n=0;r>n;n++)t[n][e][1]/=i;else for(n=0;r>n;n++)t[n][e][1]=a}for(e=0;o>e;++e)s[e]=0;return s},zero:lo});es.layout.histogram=function(){function t(t,o){for(var a,s,u=[],l=t.map(e,this),h=i.call(this,l,o),c=r.call(this,h,l,o),o=-1,f=l.length,g=c.length-1,d=n?1:1/f;g>++o;)a=u[o]=[],a.dx=c[o+1]-(a.x=c[o]),a.y=0;if(g>0)for(o=-1;f>++o;)s=l[o],s>=h[0]&&h[1]>=s&&(a=u[es.bisect(c,s,1,g)-1],a.y+=d,a.push(t[o]));return u}var n=!0,e=Number,i=mo,r=go;return t.value=function(n){return arguments.length?(e=n,t):e},t.range=function(n){return arguments.length?(i=Tn(n),t):i},t.bins=function(n){return arguments.length?(r="number"==typeof n?function(t){return po(t,n)}:Tn(n),t):r},t.frequency=function(e){return arguments.length?(n=!!e,t):n},t},es.layout.pack=function(){function t(t,o){var a=e.call(this,t,o),s=a[0],u=r[0],l=r[1],h=null==n?Math.sqrt:"function"==typeof n?n:function(){return n};if(s.x=s.y=0,to(s,function(t){t.r=+h(t.value)}),to(s,So),i){var c=i*(n?1:Math.max(2*s.r/u,2*s.r/l))/2;to(s,function(t){t.r+=c}),to(s,So),to(s,function(t){t.r-=c})}return Co(s,u/2,l/2,n?1:1/Math.max(2*s.r/u,2*s.r/l)),a}var n,e=es.layout.hierarchy().sort(vo),i=0,r=[1,1];return t.size=function(n){return arguments.length?(r=n,t):r},t.radius=function(e){return arguments.length?(n=null==e||"function"==typeof e?e:+e,t):n},t.padding=function(n){return arguments.length?(i=+n,t):i},Jr(t,e)},es.layout.tree=function(){function t(t,r){var h=a.call(this,t,r),c=h[0],f=n(c);if(to(f,e),f.parent.m=-f.z,Qr(f,i),l)Qr(c,o);else{var g=c,d=c,p=c;Qr(c,function(t){t.x<g.x&&(g=t),t.x>d.x&&(d=t),t.depth>p.depth&&(p=t)});var m=s(g,d)/2-g.x,v=u[0]/(d.x+s(d,g)/2+m),y=u[1]/(p.depth||1);Qr(c,function(t){t.x=(t.x+m)*v,t.y=t.depth*y})}return h}function n(t){for(var n,e={A:null,children:[t]},i=[e];null!=(n=i.pop());)for(var r,o=n.children,a=0,s=o.length;s>a;++a)i.push((o[a]=r={_:o[a],parent:n,children:(r=o[a].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=r);return e.children[0]}function e(t){var n=t.children,e=t.parent.children,i=t.i?e[t.i-1]:null;if(n.length){No(t);var o=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+s(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+s(t._,i._));t.parent.A=r(t,i,t.parent.A||e[0])}function i(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,n,e){if(n){for(var i,r=t,o=t,a=n,u=r.parent.children[0],l=r.m,h=o.m,c=a.m,f=u.m;a=_o(a),r=To(r),a&&r;)u=To(u),o=_o(o),o.a=t,i=a.z+c-r.z-l+s(a._,r._),i>0&&(ko(Io(a,t,e),t,i),l+=i,h+=i),c+=a.m,l+=r.m,f+=u.m,h+=o.m;a&&!_o(o)&&(o.t=a,o.m+=c-h),r&&!To(u)&&(u.t=r,u.m+=l-f,e=t)}return e}function o(t){t.x*=u[0],t.y=t.depth*u[1]}var a=es.layout.hierarchy().sort(null).value(null),s=Ro,u=[1,1],l=null;return t.separation=function(n){return arguments.length?(s=n,t):s},t.size=function(n){return arguments.length?(l=null==(u=n)?o:null,t):l?null:u},t.nodeSize=function(n){return arguments.length?(l=null==(u=n)?null:o,t):l?u:null},Jr(t,a)},es.layout.cluster=function(){function t(t,o){var a,s=n.call(this,t,o),u=s[0],l=0;to(u,function(t){var n=t.children;n&&n.length?(t.x=zo(n),t.y=Ao(n)):(t.x=a?l+=e(t,a):0,t.y=0,a=t)});var h=$o(u),c=Do(u),f=h.x-e(h,c)/2,g=c.x+e(c,h)/2;return to(u,r?function(t){t.x=(t.x-u.x)*i[0],t.y=(u.y-t.y)*i[1]}:function(t){t.x=(t.x-f)/(g-f)*i[0],t.y=(1-(u.y?t.y/u.y:1))*i[1]}),s}var n=es.layout.hierarchy().sort(null).value(null),e=Ro,i=[1,1],r=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(n){return arguments.length?(r=null==(i=n),t):r?null:i},t.nodeSize=function(n){return arguments.length?(r=null!=(i=n),t):r?i:null},Jr(t,n)},es.layout.treemap=function(){function t(t,n){for(var e,i,r=-1,o=t.length;o>++r;)i=(e=t[r]).value*(0>n?0:n),e.area=isNaN(i)||0>=i?0:i}function n(e){var o=e.children;if(o&&o.length){var a,s,u,l=c(e),h=[],f=o.slice(),d=1/0,p="slice"===g?l.dx:"dice"===g?l.dy:"slice-dice"===g?1&e.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(t(f,l.dx*l.dy/e.value),h.area=0;(u=f.length)>0;)h.push(a=f[u-1]),h.area+=a.area,"squarify"!==g||d>=(s=i(h,p))?(f.pop(),d=s):(h.area-=h.pop().area,r(h,p,l,!1),p=Math.min(l.dx,l.dy),h.length=h.area=0,d=1/0);h.length&&(r(h,p,l,!0),h.length=h.area=0),o.forEach(n)}}function e(n){var i=n.children;if(i&&i.length){var o,a=c(n),s=i.slice(),u=[];for(t(s,a.dx*a.dy/n.value),u.area=0;o=s.pop();)u.push(o),u.area+=o.area,null!=o.z&&(r(u,o.z?a.dx:a.dy,a,!s.length),u.length=u.area=0);i.forEach(e)}}function i(t,n){for(var e,i=t.area,r=0,o=1/0,a=-1,s=t.length;s>++a;)(e=t[a].area)&&(o>e&&(o=e),e>r&&(r=e));return i*=i,n*=n,i?Math.max(n*r*d/i,i/(n*o*d)):1/0}function r(t,n,e,i){var r,o=-1,a=t.length,s=e.x,l=e.y,h=n?u(t.area/n):0;if(n==e.dx){for((i||h>e.dy)&&(h=e.dy);a>++o;)r=t[o],r.x=s,r.y=l,r.dy=h,s+=r.dx=Math.min(e.x+e.dx-s,h?u(r.area/h):0);r.z=!0,r.dx+=e.x+e.dx-s,e.y+=h,e.dy-=h}else{for((i||h>e.dx)&&(h=e.dx);a>++o;)r=t[o],r.x=s,r.y=l,r.dx=h,l+=r.dy=Math.min(e.y+e.dy-l,h?u(r.area/h):0);r.z=!1,r.dy+=e.y+e.dy-l,e.x+=h,e.dx-=h}}function o(i){var r=a||s(i),o=r[0];return o.x=0,o.y=0,o.dx=l[0],o.dy=l[1],a&&s.revalue(o),t([o],o.dx*o.dy/o.value),(a?e:n)(o),f&&(a=r),r}var a,s=es.layout.hierarchy(),u=Math.round,l=[1,1],h=null,c=Eo,f=!1,g="squarify",d=.5*(1+Math.sqrt(5));
return o.size=function(t){return arguments.length?(l=t,o):l},o.padding=function(t){function n(n){var e=t.call(o,n,n.depth);return null==e?Eo(n):Lo(n,"number"==typeof e?[e,e,e,e]:e)}function e(n){return Lo(n,t)}if(!arguments.length)return h;var i;return c=null==(h=t)?Eo:"function"==(i=typeof t)?n:"number"===i?(t=[t,t,t,t],e):e,o},o.round=function(t){return arguments.length?(u=t?Math.round:Number,o):u!=Number},o.sticky=function(t){return arguments.length?(f=t,a=null,o):f},o.ratio=function(t){return arguments.length?(d=t,o):d},o.mode=function(t){return arguments.length?(g=t+"",o):g},Jr(o,s)},es.random={normal:function(t,n){var e=arguments.length;return 2>e&&(n=1),1>e&&(t=0),function(){var e,i,r;do e=2*Math.random()-1,i=2*Math.random()-1,r=e*e+i*i;while(!r||r>1);return t+n*e*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=es.random.normal.apply(es,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=es.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(t){return function(){for(var n=0,e=0;t>e;e++)n+=Math.random();return n}}},es.scale={};var yl={floor:y,ceil:y};es.scale.linear=function(){return Uo([0,1],[0,1],yr,!1)};var xl={s:1,g:1,p:1,r:1,e:1};es.scale.log=function(){return Jo(es.scale.linear().domain([0,1]),10,!0,[1,10])};var wl=es.format(".0e"),Sl={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};es.scale.pow=function(){return Qo(es.scale.linear(),1,[0,1])},es.scale.sqrt=function(){return es.scale.pow().exponent(.5)},es.scale.ordinal=function(){return na([],{t:"range",a:[[]]})},es.scale.category10=function(){return es.scale.ordinal().range(Ml)},es.scale.category20=function(){return es.scale.ordinal().range(bl)},es.scale.category20b=function(){return es.scale.ordinal().range(Cl)},es.scale.category20c=function(){return es.scale.ordinal().range(Pl)};var Ml=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(wn),bl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(wn),Cl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(wn),Pl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(wn);es.scale.quantile=function(){return ea([],[])},es.scale.quantize=function(){return ia(0,1,[0,1])},es.scale.threshold=function(){return ra([.5],[0,1])},es.scale.identity=function(){return oa([0,1])},es.svg={},es.svg.arc=function(){function t(){var t=Math.max(0,+e.apply(this,arguments)),l=Math.max(0,+i.apply(this,arguments)),h=a.apply(this,arguments)-Ds,c=s.apply(this,arguments)-Ds,f=Math.abs(c-h),g=h>c?0:1;if(t>l&&(d=l,l=t,t=d),f>=$s)return n(l,g)+(t?n(t,1-g):"")+"Z";var d,p,m,v,y,x,w,S,M,b,C,P,R=0,T=0,_=[];if((v=(+u.apply(this,arguments)||0)/2)&&(m=o===Rl?Math.sqrt(t*t+l*l):+o.apply(this,arguments),g||(T*=-1),l&&(T=nn(m/l*Math.sin(v))),t&&(R=nn(m/t*Math.sin(v)))),l){y=l*Math.cos(h+T),x=l*Math.sin(h+T),w=l*Math.cos(c-T),S=l*Math.sin(c-T);var k=As>=Math.abs(c-h-2*T)?0:1;if(T&&fa(y,x,w,S)===g^k){var N=(h+c)/2;y=l*Math.cos(N),x=l*Math.sin(N),w=S=null}}else y=x=0;if(t){M=t*Math.cos(c-R),b=t*Math.sin(c-R),C=t*Math.cos(h+R),P=t*Math.sin(h+R);var I=As>=Math.abs(h-c+2*R)?0:1;if(R&&fa(M,b,C,P)===1-g^I){var A=(h+c)/2;M=t*Math.cos(A),b=t*Math.sin(A),C=P=null}}else M=b=0;if((d=Math.min(Math.abs(l-t)/2,+r.apply(this,arguments)))>.001){p=l>t^g?0:1;var z=null==C?[M,b]:null==w?[y,x]:zi([y,x],[C,P],[w,S],[M,b]),$=y-z[0],D=x-z[1],E=w-z[0],L=S-z[1],B=1/Math.sin(Math.acos(($*E+D*L)/(Math.sqrt($*$+D*D)*Math.sqrt(E*E+L*L)))/2),F=Math.sqrt(z[0]*z[0]+z[1]*z[1]);if(null!=w){var H=Math.min(d,(l-F)/(B+1)),q=ga(null==C?[M,b]:[C,P],[y,x],l,H,g),O=ga([w,S],[M,b],l,H,g);d===H?_.push("M",q[0],"A",H,",",H," 0 0,",p," ",q[1],"A",l,",",l," 0 ",1-g^fa(q[1][0],q[1][1],O[1][0],O[1][1]),",",g," ",O[1],"A",H,",",H," 0 0,",p," ",O[0]):_.push("M",q[0],"A",H,",",H," 0 1,",p," ",O[0])}else _.push("M",y,",",x);if(null!=C){var V=Math.min(d,(t-F)/(B-1)),U=ga([y,x],[C,P],t,-V,g),W=ga([M,b],null==w?[y,x]:[w,S],t,-V,g);d===V?_.push("L",W[0],"A",V,",",V," 0 0,",p," ",W[1],"A",t,",",t," 0 ",g^fa(W[1][0],W[1][1],U[1][0],U[1][1]),",",1-g," ",U[1],"A",V,",",V," 0 0,",p," ",U[0]):_.push("L",W[0],"A",V,",",V," 0 0,",p," ",U[0])}else _.push("L",M,",",b)}else _.push("M",y,",",x),null!=w&&_.push("A",l,",",l," 0 ",k,",",g," ",w,",",S),_.push("L",M,",",b),null!=C&&_.push("A",t,",",t," 0 ",I,",",1-g," ",C,",",P);return _.push("Z"),_.join("")}function n(t,n){return"M0,"+t+"A"+t+","+t+" 0 1,"+n+" 0,"+-t+"A"+t+","+t+" 0 1,"+n+" 0,"+t}var e=sa,i=ua,r=aa,o=Rl,a=la,s=ha,u=ca;return t.innerRadius=function(n){return arguments.length?(e=Tn(n),t):e},t.outerRadius=function(n){return arguments.length?(i=Tn(n),t):i},t.cornerRadius=function(n){return arguments.length?(r=Tn(n),t):r},t.padRadius=function(n){return arguments.length?(o=n==Rl?Rl:Tn(n),t):o},t.startAngle=function(n){return arguments.length?(a=Tn(n),t):a},t.endAngle=function(n){return arguments.length?(s=Tn(n),t):s},t.padAngle=function(n){return arguments.length?(u=Tn(n),t):u},t.centroid=function(){var t=(+e.apply(this,arguments)+ +i.apply(this,arguments))/2,n=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-Ds;return[Math.cos(n)*t,Math.sin(n)*t]},t};var Rl="auto";es.svg.line=function(){return da(y)};var Tl=es.map({linear:pa,"linear-closed":ma,step:va,"step-before":ya,"step-after":xa,basis:Pa,"basis-open":Ra,"basis-closed":Ta,bundle:_a,cardinal:Ma,"cardinal-open":wa,"cardinal-closed":Sa,monotone:$a});Tl.forEach(function(t,n){n.key=t,n.closed=/-closed$/.test(t)});var _l=[0,2/3,1/3,0],kl=[0,1/3,2/3,0],Nl=[0,1/6,2/3,1/6];es.svg.line.radial=function(){var t=da(Da);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},ya.reverse=xa,xa.reverse=ya,es.svg.area=function(){return Ea(y)},es.svg.area.radial=function(){var t=Ea(Da);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},es.svg.chord=function(){function t(t,s){var u=n(this,o,t,s),l=n(this,a,t,s);return"M"+u.p0+i(u.r,u.p1,u.a1-u.a0)+(e(u,l)?r(u.r,u.p1,u.r,u.p0):r(u.r,u.p1,l.r,l.p0)+i(l.r,l.p1,l.a1-l.a0)+r(l.r,l.p1,u.r,u.p0))+"Z"}function n(t,n,e,i){var r=n.call(t,e,i),o=s.call(t,r,i),a=u.call(t,r,i)-Ds,h=l.call(t,r,i)-Ds;return{r:o,a0:a,a1:h,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(h),o*Math.sin(h)]}}function e(t,n){return t.a0==n.a0&&t.a1==n.a1}function i(t,n,e){return"A"+t+","+t+" 0 "+ +(e>As)+",1 "+n}function r(t,n,e,i){return"Q 0,0 "+i}var o=yi,a=xi,s=La,u=la,l=ha;return t.radius=function(n){return arguments.length?(s=Tn(n),t):s},t.source=function(n){return arguments.length?(o=Tn(n),t):o},t.target=function(n){return arguments.length?(a=Tn(n),t):a},t.startAngle=function(n){return arguments.length?(u=Tn(n),t):u},t.endAngle=function(n){return arguments.length?(l=Tn(n),t):l},t},es.svg.diagonal=function(){function t(t,r){var o=n.call(this,t,r),a=e.call(this,t,r),s=(o.y+a.y)/2,u=[o,{x:o.x,y:s},{x:a.x,y:s},a];return u=u.map(i),"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}var n=yi,e=xi,i=Ba;return t.source=function(e){return arguments.length?(n=Tn(e),t):n},t.target=function(n){return arguments.length?(e=Tn(n),t):e},t.projection=function(n){return arguments.length?(i=n,t):i},t},es.svg.diagonal.radial=function(){var t=es.svg.diagonal(),n=Ba,e=t.projection;return t.projection=function(t){return arguments.length?e(Fa(n=t)):n},t},es.svg.symbol=function(){function t(t,i){return(Il.get(n.call(this,t,i))||Oa)(e.call(this,t,i))}var n=qa,e=Ha;return t.type=function(e){return arguments.length?(n=Tn(e),t):n},t.size=function(n){return arguments.length?(e=Tn(n),t):e},t};var Il=es.map({circle:Oa,cross:function(t){var n=Math.sqrt(t/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(t){var n=Math.sqrt(t/(2*zl)),e=n*zl;return"M0,"+-n+"L"+e+",0 0,"+n+" "+-e+",0Z"},square:function(t){var n=Math.sqrt(t)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(t){var n=Math.sqrt(t/Al),e=n*Al/2;return"M0,"+e+"L"+n+","+-e+" "+-n+","+-e+"Z"},"triangle-up":function(t){var n=Math.sqrt(t/Al),e=n*Al/2;return"M0,"+-e+"L"+n+","+e+" "+-n+","+e+"Z"}});es.svg.symbolTypes=Il.keys();var Al=Math.sqrt(3),zl=Math.tan(30*Es);bs.transition=function(t){for(var n,e,i=$l||++Bl,r=Ya(t),o=[],a=Dl||{time:Date.now(),ease:Pr,delay:0,duration:250},s=-1,u=this.length;u>++s;){o.push(n=[]);for(var l=this[s],h=-1,c=l.length;c>++h;)(e=l[h])&&Xa(e,h,r,i,a),n.push(e)}return Ua(o,r,i)},bs.interrupt=function(t){return this.each(null==t?El:Va(Ya(t)))};var $l,Dl,El=Va(Ya()),Ll=[],Bl=0;Ll.call=bs.call,Ll.empty=bs.empty,Ll.node=bs.node,Ll.size=bs.size,es.transition=function(t,n){return t&&t.transition?$l?t.transition(n):t:es.selection().transition(t)},es.transition.prototype=Ll,Ll.select=function(t){var n,e,i,r=this.id,o=this.namespace,a=[];t=_(t);for(var s=-1,u=this.length;u>++s;){a.push(n=[]);for(var l=this[s],h=-1,c=l.length;c>++h;)(i=l[h])&&(e=t.call(i,i.__data__,h,s))?("__data__"in i&&(e.__data__=i.__data__),Xa(e,h,o,r,i[o][r]),n.push(e)):n.push(null)}return Ua(a,o,r)},Ll.selectAll=function(t){var n,e,i,r,o,a=this.id,s=this.namespace,u=[];t=k(t);for(var l=-1,h=this.length;h>++l;)for(var c=this[l],f=-1,g=c.length;g>++f;)if(i=c[f]){o=i[s][a],e=t.call(i,i.__data__,f,l),u.push(n=[]);for(var d=-1,p=e.length;p>++d;)(r=e[d])&&Xa(r,d,s,a,o),n.push(r)}return Ua(u,s,a)},Ll.filter=function(t){var n,e,i,r=[];"function"!=typeof t&&(t=q(t));for(var o=0,a=this.length;a>o;o++){r.push(n=[]);for(var e=this[o],s=0,u=e.length;u>s;s++)(i=e[s])&&t.call(i,i.__data__,s,o)&&n.push(i)}return Ua(r,this.namespace,this.id)},Ll.tween=function(t,n){var e=this.id,i=this.namespace;return 2>arguments.length?this.node()[i][e].tween.get(t):V(this,null==n?function(n){n[i][e].tween.remove(t)}:function(r){r[i][e].tween.set(t,n)})},Ll.attr=function(t,n){function e(){this.removeAttribute(s)}function i(){this.removeAttributeNS(s.space,s.local)}function r(t){return null==t?e:(t+="",function(){var n,e=this.getAttribute(s);return e!==t&&(n=a(e,t),function(t){this.setAttribute(s,n(t))})})}function o(t){return null==t?i:(t+="",function(){var n,e=this.getAttributeNS(s.space,s.local);return e!==t&&(n=a(e,t),function(t){this.setAttributeNS(s.space,s.local,n(t))})})}if(2>arguments.length){for(n in t)this.attr(n,t[n]);return this}var a="transform"==t?qr:yr,s=es.ns.qualify(t);return Wa(this,"attr."+t,n,s.local?o:r)},Ll.attrTween=function(t,n){function e(t,e){var i=n.call(this,t,e,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}}function i(t,e){var i=n.call(this,t,e,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}var r=es.ns.qualify(t);return this.tween("attr."+t,r.local?i:e)},Ll.style=function(t,e,i){function r(){this.style.removeProperty(t)}function o(e){return null==e?r:(e+="",function(){var r,o=n(this).getComputedStyle(this,null).getPropertyValue(t);return o!==e&&(r=yr(o,e),function(n){this.style.setProperty(t,r(n),i)})})}var a=arguments.length;if(3>a){if("string"!=typeof t){2>a&&(e="");for(i in t)this.style(i,t[i],e);return this}i=""}return Wa(this,"style."+t,e,o)},Ll.styleTween=function(t,e,i){function r(r,o){var a=e.call(this,r,o,n(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(n){this.style.setProperty(t,a(n),i)}}return 3>arguments.length&&(i=""),this.tween("style."+t,r)},Ll.text=function(t){return Wa(this,"text",t,ja)},Ll.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var n;2>this[t].count&&(n=this.parentNode)&&n.removeChild(this)})},Ll.ease=function(t){var n=this.id,e=this.namespace;return 1>arguments.length?this.node()[e][n].ease:("function"!=typeof t&&(t=es.ease.apply(es,arguments)),V(this,function(i){i[e][n].ease=t}))},Ll.delay=function(t){var n=this.id,e=this.namespace;return 1>arguments.length?this.node()[e][n].delay:V(this,"function"==typeof t?function(i,r,o){i[e][n].delay=+t.call(i,i.__data__,r,o)}:(t=+t,function(i){i[e][n].delay=t}))},Ll.duration=function(t){var n=this.id,e=this.namespace;return 1>arguments.length?this.node()[e][n].duration:V(this,"function"==typeof t?function(i,r,o){i[e][n].duration=Math.max(1,t.call(i,i.__data__,r,o))}:(t=Math.max(1,t),function(i){i[e][n].duration=t}))},Ll.each=function(t,n){var e=this.id,i=this.namespace;if(2>arguments.length){var r=Dl,o=$l;try{$l=e,V(this,function(n,r,o){Dl=n[i][e],t.call(n,n.__data__,r,o)})}finally{Dl=r,$l=o}}else V(this,function(r){var o=r[i][e];(o.event||(o.event=es.dispatch("start","end","interrupt"))).on(t,n)});return this},Ll.transition=function(){for(var t,n,e,i,r=this.id,o=++Bl,a=this.namespace,s=[],u=0,l=this.length;l>u;u++){s.push(t=[]);for(var n=this[u],h=0,c=n.length;c>h;h++)(e=n[h])&&(i=e[a][r],Xa(e,h,a,o,{time:i.time,ease:i.ease,delay:i.delay+i.duration,duration:i.duration})),t.push(e)}return Ua(s,a,o)},es.svg.axis=function(){function t(t){t.each(function(){var t,l=es.select(this),h=this.__chart__||e,c=this.__chart__=e.copy(),f=null==u?c.ticks?c.ticks.apply(c,s):c.domain():u,g=null==n?c.tickFormat?c.tickFormat.apply(c,s):y:n,d=l.selectAll(".tick").data(f,c),p=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Ns),m=es.transition(d.exit()).style("opacity",Ns).remove(),v=es.transition(d.order()).style("opacity",1),x=Math.max(r,0)+a,w=Fo(c),S=l.selectAll(".domain").data([0]),M=(S.enter().append("path").attr("class","domain"),es.transition(S));p.append("line"),p.append("text");var b,C,P,R,T=p.select("line"),_=v.select("line"),k=d.select("text").text(g),N=p.select("text"),I=v.select("text"),A="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(t=Za,b="x",P="y",C="x2",R="y2",k.attr("dy",0>A?"0em":".71em").style("text-anchor","middle"),M.attr("d","M"+w[0]+","+A*o+"V0H"+w[1]+"V"+A*o)):(t=Ka,b="y",P="x",C="y2",R="x2",k.attr("dy",".32em").style("text-anchor",0>A?"end":"start"),M.attr("d","M"+A*o+","+w[0]+"H0V"+w[1]+"H"+A*o)),T.attr(R,A*r),N.attr(P,A*x),_.attr(C,0).attr(R,A*r),I.attr(b,0).attr(P,A*x),c.rangeBand){var z=c,$=z.rangeBand()/2;h=c=function(t){return z(t)+$}}else h.rangeBand?h=c:m.call(t,c,h);p.call(t,h,c),v.call(t,c,c)})}var n,e=es.scale.linear(),i=Fl,r=6,o=6,a=3,s=[10],u=null;return t.scale=function(n){return arguments.length?(e=n,t):e},t.orient=function(n){return arguments.length?(i=n in Hl?n+"":Fl,t):i},t.ticks=function(){return arguments.length?(s=arguments,t):s},t.tickValues=function(n){return arguments.length?(u=n,t):u},t.tickFormat=function(e){return arguments.length?(n=e,t):n},t.tickSize=function(n){var e=arguments.length;return e?(r=+n,o=+arguments[e-1],t):r},t.innerTickSize=function(n){return arguments.length?(r=+n,t):r},t.outerTickSize=function(n){return arguments.length?(o=+n,t):o},t.tickPadding=function(n){return arguments.length?(a=+n,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Fl="bottom",Hl={top:1,right:1,bottom:1,left:1};es.svg.brush=function(){function t(n){n.each(function(){var n=es.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=n.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),n.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=n.selectAll(".resize").data(p,y);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return ql[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var u,c=es.transition(n),f=es.transition(a);l&&(u=Fo(l),f.attr("x",u[0]).attr("width",u[1]-u[0]),i(c)),h&&(u=Fo(h),f.attr("y",u[0]).attr("height",u[1]-u[0]),r(c)),e(c)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+c[+/e$/.test(t)]+","+f[+/^s/.test(t)]+")"})}function i(t){t.select(".extent").attr("x",c[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1]-c[0])}function r(t){t.select(".extent").attr("y",f[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function o(){function o(){32==es.event.keyCode&&(k||(x=null,I[0]-=c[1],I[1]-=f[1],k=2),C())}function p(){32==es.event.keyCode&&2==k&&(I[0]+=c[1],I[1]+=f[1],k=0,C())}function m(){var t=es.mouse(S),n=!1;w&&(t[0]+=w[0],t[1]+=w[1]),k||(es.event.altKey?(x||(x=[(c[0]+c[1])/2,(f[0]+f[1])/2]),I[0]=c[+(t[0]<x[0])],I[1]=f[+(t[1]<x[1])]):x=null),T&&v(t,l,0)&&(i(P),n=!0),_&&v(t,h,1)&&(r(P),n=!0),n&&(e(P),b({type:"brush",mode:k?"move":"resize"}))}function v(t,n,e){var i,r,o=Fo(n),u=o[0],l=o[1],h=I[e],p=e?f:c,m=p[1]-p[0];return k&&(u-=h,l-=m+h),i=(e?d:g)?Math.max(u,Math.min(l,t[e])):t[e],k?r=(i+=h)+m:(x&&(h=Math.max(u,Math.min(l,2*x[e]-i))),i>h?(r=i,i=h):r=h),p[0]!=i||p[1]!=r?(e?s=null:a=null,p[0]=i,p[1]=r,!0):void 0}function y(){m(),P.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),es.select("body").style("cursor",null),A.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),N(),b({type:"brushend"})}var x,w,S=this,M=es.select(es.event.target),b=u.of(S,arguments),P=es.select(S),R=M.datum(),T=!/^(n|s)$/.test(R)&&l,_=!/^(e|w)$/.test(R)&&h,k=M.classed("extent"),N=Z(S),I=es.mouse(S),A=es.select(n(S)).on("keydown.brush",o).on("keyup.brush",p);if(es.event.changedTouches?A.on("touchmove.brush",m).on("touchend.brush",y):A.on("mousemove.brush",m).on("mouseup.brush",y),P.interrupt().selectAll("*").interrupt(),k)I[0]=c[0]-I[0],I[1]=f[0]-I[1];else if(R){var z=+/w$/.test(R),$=+/^n/.test(R);w=[c[1-z]-I[0],f[1-$]-I[1]],I[0]=c[z],I[1]=f[$]}else es.event.altKey&&(x=I.slice());P.style("pointer-events","none").selectAll(".resize").style("display",null),es.select("body").style("cursor",M.style("cursor")),b({type:"brushstart"}),m()}var a,s,u=R(t,"brushstart","brush","brushend"),l=null,h=null,c=[0,0],f=[0,0],g=!0,d=!0,p=Ol[0];return t.event=function(t){t.each(function(){var t=u.of(this,arguments),n={x:c,y:f,i:a,j:s},e=this.__chart__||n;this.__chart__=n,$l?es.select(this).transition().each("start.brush",function(){a=e.i,s=e.j,c=e.x,f=e.y,t({type:"brushstart"})}).tween("brush:brush",function(){var e=xr(c,n.x),i=xr(f,n.y);return a=s=null,function(r){c=n.x=e(r),f=n.y=i(r),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=n.i,s=n.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(n){return arguments.length?(l=n,p=Ol[!l<<1|!h],t):l},t.y=function(n){return arguments.length?(h=n,p=Ol[!l<<1|!h],t):h},t.clamp=function(n){return arguments.length?(l&&h?(g=!!n[0],d=!!n[1]):l?g=!!n:h&&(d=!!n),t):l&&h?[g,d]:l?g:h?d:null},t.extent=function(n){var e,i,r,o,u;return arguments.length?(l&&(e=n[0],i=n[1],h&&(e=e[0],i=i[0]),a=[e,i],l.invert&&(e=l(e),i=l(i)),e>i&&(u=e,e=i,i=u),(e!=c[0]||i!=c[1])&&(c=[e,i])),h&&(r=n[0],o=n[1],l&&(r=r[1],o=o[1]),s=[r,o],h.invert&&(r=h(r),o=h(o)),r>o&&(u=r,r=o,o=u),(r!=f[0]||o!=f[1])&&(f=[r,o])),t):(l&&(a?(e=a[0],i=a[1]):(e=c[0],i=c[1],l.invert&&(e=l.invert(e),i=l.invert(i)),e>i&&(u=e,e=i,i=u))),h&&(s?(r=s[0],o=s[1]):(r=f[0],o=f[1],h.invert&&(r=h.invert(r),o=h.invert(o)),r>o&&(u=r,r=o,o=u))),l&&h?[[e,r],[i,o]]:l?[e,i]:h&&[r,o])},t.clear=function(){return t.empty()||(c=[0,0],f=[0,0],a=s=null),t},t.empty=function(){return!!l&&c[0]==c[1]||!!h&&f[0]==f[1]},es.rebind(t,u,"on")};var ql={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ol=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Vl=uu.format=du.timeFormat,Ul=Vl.utc,Wl=Ul("%Y-%m-%dT%H:%M:%S.%LZ");Vl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ga:Wl,Ga.parse=function(t){var n=new Date(t);return isNaN(n)?null:n},Ga.toString=Wl.toString,uu.second=Hn(function(t){return new lu(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(t.getTime()+1e3*Math.floor(n))},function(t){return t.getSeconds()}),uu.seconds=uu.second.range,uu.seconds.utc=uu.second.utc.range,uu.minute=Hn(function(t){return new lu(6e4*Math.floor(t/6e4))},function(t,n){t.setTime(t.getTime()+6e4*Math.floor(n))},function(t){return t.getMinutes()}),uu.minutes=uu.minute.range,uu.minutes.utc=uu.minute.utc.range,uu.hour=Hn(function(t){var n=t.getTimezoneOffset()/60;return new lu(36e5*(Math.floor(t/36e5-n)+n))},function(t,n){t.setTime(t.getTime()+36e5*Math.floor(n))},function(t){return t.getHours()}),uu.hours=uu.hour.range,uu.hours.utc=uu.hour.utc.range,uu.month=Hn(function(t){return t=uu.day(t),t.setDate(1),t},function(t,n){t.setMonth(t.getMonth()+n)},function(t){return t.getMonth()}),uu.months=uu.month.range,uu.months.utc=uu.month.utc.range;var jl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Yl=[[uu.second,1],[uu.second,5],[uu.second,15],[uu.second,30],[uu.minute,1],[uu.minute,5],[uu.minute,15],[uu.minute,30],[uu.hour,1],[uu.hour,3],[uu.hour,6],[uu.hour,12],[uu.day,1],[uu.day,2],[uu.week,1],[uu.month,1],[uu.month,3],[uu.year,1]],Xl=Vl.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",ke]]),Zl={range:function(t,n,e){return es.range(Math.ceil(t/e)*e,+n,e).map(Qa)},floor:y,ceil:y};Yl.year=uu.year,uu.scale=function(){return Ja(es.scale.linear(),Yl,Xl)};var Kl=Yl.map(function(t){return[t[0].utc,t[1]]}),Gl=Ul.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",ke]]);Kl.year=uu.year.utc,uu.scale.utc=function(){return Ja(es.scale.linear(),Kl,Gl)},es.text=_n(function(t){return t.responseText}),es.json=function(t,n){return kn(t,"application/json",ts,n)},es.html=function(t,n){return kn(t,"text/html",ns,n)},es.xml=_n(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(es):"object"==typeof module&&module.exports&&(module.exports=es),this.d3=es}();

// lib/d3-tip.js
(function(t,n){"function"==typeof define&&define.amd?define(["d3"],n):"object"==typeof module&&module.exports?module.exports=function(t){return t.tip=n(t),t.tip}:t.d3.tip=n(t.d3)})(this,function(t){return function(){function n(t){M=d(t),b=M.createSVGPoint(),document.body.appendChild(S)}function e(){return"n"}function i(){return[0,0]}function r(){return" "}function o(){var t=m();return{top:t.n.y-S.offsetHeight,left:t.n.x-S.offsetWidth/2}}function a(){var t=m();return{top:t.s.y,left:t.s.x-S.offsetWidth/2}}function s(){var t=m();return{top:t.e.y-S.offsetHeight/2,left:t.e.x}}function u(){var t=m();return{top:t.w.y-S.offsetHeight/2,left:t.w.x-S.offsetWidth}}function l(){var t=m();return{top:t.nw.y-S.offsetHeight,left:t.nw.x-S.offsetWidth}}function h(){var t=m();return{top:t.ne.y-S.offsetHeight,left:t.ne.x}}function c(){var t=m();return{top:t.sw.y,left:t.sw.x-S.offsetWidth}}function f(){var t=m();return{top:t.se.y,left:t.e.x}}function g(){var n=t.select(document.createElement("div"));return n.style({position:"absolute",top:0,opacity:0,"pointer-events":"none","box-sizing":"border-box"}),n.node()}function d(t){return t=t.node(),"svg"===t.tagName.toLowerCase()?t:t.ownerSVGElement}function p(){return null===S&&(S=g(),document.body.appendChild(S)),t.select(S)}function m(){for(var n=C||t.event.target;n.getScreenCTM===void 0&&"undefined"===n.parentNode;)n=n.parentNode;var e={},i=n.getScreenCTM(),r=n.getBBox(),o=r.width,a=r.height,s=r.x,u=r.y;return b.x=s,b.y=u,e.nw=b.matrixTransform(i),b.x+=o,e.ne=b.matrixTransform(i),b.y+=a,e.se=b.matrixTransform(i),b.x-=o,e.sw=b.matrixTransform(i),b.y-=a/2,e.w=b.matrixTransform(i),b.x+=o,e.e=b.matrixTransform(i),b.x-=o/2,b.y-=a/2,e.n=b.matrixTransform(i),b.y+=a,e.s=b.matrixTransform(i),e}var v=e,y=i,x=r,w=null,S=g(),M=null,b=null,C=null;n.show=function(){var t=Array.prototype.slice.call(arguments);t[t.length-1]instanceof SVGElement&&(C=t.pop());var e,i=x.apply(this,t),r=y.apply(this,t),o=v.apply(this,t),a=p(),s=R.length,u=document.documentElement.scrollTop||document.body.scrollTop,l=document.documentElement.scrollLeft||document.body.scrollLeft;for(null!=w?(t.unshift(a[0][0]),w.apply(this,t),a.style({opacity:1,"pointer-events":"all"})):a.html(i).style({opacity:1,"pointer-events":"all"});s--;)a.classed(R[s],!1);return e=P.get(o).apply(this),a.classed(o,!0).style({top:e.top+r[0]+u+"px",left:e.left+r[1]+l+"px"}),n},n.hide=function(){var t=p();return t.style({opacity:0,"pointer-events":"none"}),n},n.attr=function(e){if(2>arguments.length&&"string"==typeof e)return p().attr(e);var i=Array.prototype.slice.call(arguments);return t.selection.prototype.attr.apply(p(),i),n},n.style=function(e){if(2>arguments.length&&"string"==typeof e)return p().style(e);var i=Array.prototype.slice.call(arguments);return t.selection.prototype.style.apply(p(),i),n},n.direction=function(e){return arguments.length?(v=null==e?e:t.functor(e),n):v},n.offset=function(e){return arguments.length?(y=null==e?e:t.functor(e),n):y},n.html=function(e){return arguments.length?(x=null==e?e:t.functor(e),n):x},n.render=function(e){return arguments.length?(w=null==e?e:t.functor(e),n):w},n.destroy=function(){return S&&(p().remove(),S=null),n};var P=t.map({n:o,s:a,e:s,w:u,nw:l,ne:h,sw:c,se:f}),R=P.keys();return n}});

// lib/onyx/version.js
(function(t){t&&t.version&&(t.version.onyx="2.6.0-pre.4")})(enyo,this);

// lib/onyx/source/Icon.js
(function(t){t.kind({name:"onyx.Icon",classes:"onyx-icon",published:{src:"",disabled:!1},create:function(){this.inherited(arguments),this.src&&this.srcChanged(),this.disabledChanged()},disabledChanged:function(){this.addRemoveClass("disabled",this.disabled)},srcChanged:function(){this.applyStyle("background-image","url("+t.path.rewrite(this.src)+")")}})})(enyo,this);

// lib/onyx/source/Button.js
(function(t){t.kind({name:"onyx.Button",kind:"enyo.Button",classes:"onyx-button enyo-unselectable",handlers:{ondown:"down",onenter:"enter",ondragfinish:"dragfinish",onleave:"leave",onup:"up"},down:function(){return this.disabled?!0:(this.addClass("pressed"),this._isPressed=!0,void 0)},enter:function(){return this.disabled?!0:(this._isPressed&&this.addClass("pressed"),void 0)},dragfinish:function(){return this.disabled?!0:(this.removeClass("pressed"),this._isPressed=!1,void 0)},leave:function(){return this.disabled?!0:(this.removeClass("pressed"),void 0)},up:function(){return this.disabled?!0:(this.removeClass("pressed"),this._isPressed=!1,void 0)}})})(enyo,this);

// lib/onyx/source/IconButton.js
(function(t){t.kind({name:"onyx.IconButton",kind:"onyx.Icon",published:{active:!1},classes:"onyx-icon-button",handlers:{ondown:"down",onenter:"enter",ondragfinish:"dragfinish",onleave:"leave",onup:"up"},rendered:function(){this.inherited(arguments),this.activeChanged()},tap:function(){return this.disabled?!0:(this.setActive(!0),void 0)},down:function(){return this.disabled?!0:(this.addClass("pressed"),this._isPressed=!0,void 0)},enter:function(){return this.disabled?!0:(this._isPressed&&this.addClass("pressed"),void 0)},dragfinish:function(){return this.disabled?!0:(this.removeClass("pressed"),this._isPressed=!1,void 0)},leave:function(){return this.disabled?!0:(this.removeClass("pressed"),void 0)},up:function(){return this.disabled?!0:(this.removeClass("pressed"),this._isPressed=!1,void 0)},activeChanged:function(){this.bubble("onActivate")}})})(enyo,this);

// lib/onyx/source/Checkbox.js
(function(t){t.kind({name:"onyx.Checkbox",classes:"onyx-checkbox",kind:"enyo.Checkbox",tag:"div",handlers:{onclick:""},tap:function(){return this.disabled||(this.setChecked(!this.getChecked()),this.bubble("onchange")),!this.disabled},dragstart:t.nop})})(enyo,this);

// lib/onyx/source/Drawer.js
(function(t){t.kind({name:"onyx.Drawer",kind:"enyo.Drawer"})})(enyo,this);

// lib/onyx/source/Grabber.js
(function(t){t.kind({name:"onyx.Grabber",classes:"onyx-grabber"})})(enyo,this);

// lib/onyx/source/Groupbox.js
(function(t){t.kind({name:"onyx.Groupbox",classes:"onyx-groupbox"}),t.kind({name:"onyx.GroupboxHeader",classes:"onyx-groupbox-header"})})(enyo,this);

// lib/onyx/source/Input.js
(function(t){t.kind({name:"onyx.Input",kind:"enyo.Input",classes:"onyx-input"})})(enyo,this);

// lib/onyx/source/Popup.js
(function(t){t.kind({name:"onyx.Popup",kind:"enyo.Popup",classes:"onyx-popup"})})(enyo,this);

// lib/onyx/source/TextArea.js
(function(t){t.kind({name:"onyx.TextArea",kind:"enyo.TextArea",classes:"onyx-textarea"})})(enyo,this);

// lib/onyx/source/RichText.js
(function(t){t.kind({name:"onyx.RichText",kind:"enyo.RichText",classes:"onyx-richtext"})})(enyo,this);

// lib/onyx/source/InputDecorator.js
(function(t){t.kind({name:"onyx.InputDecorator",kind:"enyo.ToolDecorator",tag:"label",classes:"onyx-input-decorator",published:{alwaysLooksFocused:!1},handlers:{onDisabledChange:"disabledChange",onfocus:"receiveFocus",onblur:"receiveBlur"},create:function(){this.inherited(arguments),this.updateFocus(!1)},alwaysLooksFocusedChanged:function(){this.updateFocus(this.focus)},updateFocus:function(t){this.focused=t,this.addRemoveClass("onyx-focused",this.alwaysLooksFocused||this.focused)},receiveFocus:function(){this.updateFocus(!0)},receiveBlur:function(){this.updateFocus(!1)},disabledChange:function(t,n){this.addRemoveClass("onyx-disabled",n.originator.disabled)}})})(enyo,this);

// lib/onyx/source/Tooltip.js
(function(t){t.kind({name:"onyx.Tooltip",kind:"onyx.Popup",classes:"onyx-tooltip below left-arrow",autoDismiss:!1,showDelay:500,defaultLeft:-6,handlers:{onRequestShowTooltip:"requestShow",onRequestHideTooltip:"requestHide"},requestShow:function(){return this.showJob=setTimeout(this.bindSafely("show"),this.showDelay),!0},cancelShow:function(){clearTimeout(this.showJob)},requestHide:function(){return this.cancelShow(),this.inherited(arguments)},showingChanged:function(){this.cancelShow(),this.adjustPosition(!0),this.inherited(arguments)},applyPosition:function(t){var n="";for(var e in t)n+=e+":"+t[e]+(isNaN(t[e])?"; ":"px; ");this.addStyles(n)},adjustPosition:function(){if(this.showing&&this.hasNode()){var t=this.node.getBoundingClientRect();t.top+t.height>window.innerHeight?(this.addRemoveClass("below",!1),this.addRemoveClass("above",!0)):(this.addRemoveClass("above",!1),this.addRemoveClass("below",!0)),t.left+t.width>window.innerWidth&&(this.applyPosition({"margin-left":-t.width,bottom:"auto"}),this.addRemoveClass("left-arrow",!1),this.addRemoveClass("right-arrow",!0))}},handleResize:function(){this.applyPosition({"margin-left":this.defaultLeft,bottom:"auto"}),this.addRemoveClass("left-arrow",!0),this.addRemoveClass("right-arrow",!1),this.adjustPosition(!0),this.inherited(arguments)}})})(enyo,this);

// lib/onyx/source/TooltipDecorator.js
(function(t){t.kind({name:"onyx.TooltipDecorator",kind:"enyo.Control",defaultKind:"onyx.Button",classes:"onyx-popup-decorator",handlers:{onenter:"enter",onleave:"leave"},enter:function(){this.requestShowTooltip()},leave:function(){this.requestHideTooltip()},tap:function(){this.requestHideTooltip()},requestShowTooltip:function(){this.waterfallDown("onRequestShowTooltip")},requestHideTooltip:function(){this.waterfallDown("onRequestHideTooltip")}})})(enyo,this);

// lib/onyx/source/MenuDecorator.js
(function(t){t.kind({name:"onyx.MenuDecorator",kind:"onyx.TooltipDecorator",defaultKind:"onyx.Button",classes:"onyx-popup-decorator enyo-unselectable",handlers:{onActivate:"activated",onHide:"menuHidden"},activated:function(t,n){this.requestHideTooltip(),n.originator.active&&(this.menuActive=!0,this.activator=n.originator,this.activator.addClass("active"),this.requestShowMenu())},requestShowMenu:function(){this.waterfallDown("onRequestShowMenu",{activator:this.activator})},requestHideMenu:function(){this.waterfallDown("onRequestHideMenu")},menuHidden:function(){this.menuActive=!1,this.activator&&(this.activator.setActive(!1),this.activator.removeClass("active"))},enter:function(){this.menuActive||this.inherited(arguments)},leave:function(){this.menuActive||this.inherited(arguments)}})})(enyo,this);

// lib/onyx/source/Menu.js
(function(t){t.kind({name:"onyx.Menu",kind:"onyx.Popup",modal:!0,defaultKind:"onyx.MenuItem",classes:"onyx-menu",published:{maxHeight:200,scrolling:!0,scrollStrategyKind:"TouchScrollStrategy"},handlers:{onActivate:"itemActivated",onRequestShowMenu:"requestMenuShow",onRequestHideMenu:"requestHide"},childComponents:[{name:"client",kind:"enyo.Scroller"}],showOnTop:!1,scrollerName:"client",create:function(){this.inherited(arguments),this.maxHeightChanged()},initComponents:function(){this.scrolling&&this.createComponents(this.childComponents,{isChrome:!0,strategyKind:this.scrollStrategyKind}),this.inherited(arguments)},getScroller:function(){return this.$[this.scrollerName]},maxHeightChanged:function(){this.scrolling&&this.getScroller().setMaxHeight(this.maxHeight+"px")},itemActivated:function(t,n){return n.originator.setActive(!1),!0},showingChanged:function(){this.inherited(arguments),this.scrolling&&this.getScroller().setShowing(this.showing),this.adjustPosition(!0)},requestMenuShow:function(t,n){if(this.floating){var e=n.activator.hasNode();if(e){var i=this.activatorOffset=this.getPageOffset(e);this.applyPosition({top:i.top+(this.showOnTop?0:i.height),left:i.left,width:i.width})}}return this.show(),!0},applyPosition:function(t){var n="";for(var e in t)n+=e+":"+t[e]+(isNaN(t[e])?"; ":"px; ");this.addStyles(n)},getPageOffset:function(t){var n=t.getBoundingClientRect(),e=void 0===window.pageYOffset?document.documentElement.scrollTop:window.pageYOffset,i=void 0===window.pageXOffset?document.documentElement.scrollLeft:window.pageXOffset,r=void 0===n.height?n.bottom-n.top:n.height,o=void 0===n.width?n.right-n.left:n.width;return{top:n.top+e,left:n.left+i,height:r,width:o}},adjustPosition:function(){if(this.showing&&this.hasNode()){this.scrolling&&!this.showOnTop&&this.getScroller().setMaxHeight(this.maxHeight+"px"),this.removeClass("onyx-menu-up"),this.floating||this.applyPosition({left:"auto"});var t=this.node.getBoundingClientRect(),n=void 0===t.height?t.bottom-t.top:t.height,e=void 0===window.innerHeight?document.documentElement.clientHeight:window.innerHeight,i=void 0===window.innerWidth?document.documentElement.clientWidth:window.innerWidth;if(this.menuUp=t.top+n>e&&e-t.bottom<t.top-n,this.addRemoveClass("onyx-menu-up",this.menuUp),this.floating){var r=this.activatorOffset;this.menuUp?this.applyPosition({top:r.top-n+(this.showOnTop?r.height:0),bottom:"auto"}):t.top<r.top&&e>r.top+(this.showOnTop?0:r.height)+n&&this.applyPosition({top:r.top+(this.showOnTop?0:r.height),bottom:"auto"})}if(t.right>i&&(this.floating?this.applyPosition({left:i-t.width}):this.applyPosition({left:-(t.right-i)})),0>t.left&&(this.floating?this.applyPosition({left:0,right:"auto"}):"auto"==this.getComputedStyleValue("right")?this.applyPosition({left:-t.left}):this.applyPosition({right:t.left})),this.scrolling&&!this.showOnTop){t=this.node.getBoundingClientRect();var o;o=this.menuUp?this.maxHeight<t.bottom?this.maxHeight:t.bottom:e>t.top+this.maxHeight?this.maxHeight:e-t.top,this.getScroller().setMaxHeight(o+"px")}}},handleResize:function(){this.inherited(arguments),this.adjustPosition()},requestHide:function(){this.setShowing(!1)}})})(enyo,this);

// lib/onyx/source/MenuItem.js
(function(t){t.kind({name:"onyx.MenuItem",kind:"enyo.Button",events:{onSelect:"",onItemContentChange:""},classes:"onyx-menu-item",tag:"div",create:function(){this.silence(),this.inherited(arguments),this.unsilence(),this.active&&this.bubble("onActivate")},tap:function(){this.inherited(arguments),this.bubble("onRequestHideMenu"),this.doSelect({selected:this,content:this.content})},contentChanged:function(){this.inherited(arguments),this.doItemContentChange({content:this.content})}})})(enyo,this);

// lib/onyx/source/Submenu.js
(function(t){t.kind({name:"onyx.Submenu",defaultKind:"onyx.MenuItem",initComponents:function(){this.createChrome([{name:"label",kind:"enyo.Control",classes:"onyx-menu-item",content:this.content||this.name,isChrome:!0,ontap:"toggleOpen"},{kind:"onyx.Drawer",name:"client",classes:"client onyx-submenu",isChrome:!0,open:!1}]),this.inherited(arguments)},toggleOpen:function(){this.setOpen(!this.getOpen())},setOpen:function(t){this.$.client.setOpen(t)},getOpen:function(){return this.$.client.getOpen()}})})(enyo,this);

// lib/onyx/source/PickerDecorator.js
(function(t){t.kind({name:"onyx.PickerDecorator",kind:"onyx.MenuDecorator",classes:"onyx-picker-decorator",defaultKind:"onyx.PickerButton",handlers:{onChange:"change"},change:function(t,n){this.waterfallDown("onChange",n)}})})(enyo,this);

// lib/onyx/source/PickerButton.js
(function(t){t.kind({name:"onyx.PickerButton",kind:"onyx.Button",handlers:{onChange:"change"},change:function(t,n){void 0!==n.content&&this.setContent(n.content)}})})(enyo,this);

// lib/onyx/source/Picker.js
(function(t){t.kind({name:"onyx.Picker",kind:"onyx.Menu",classes:"onyx-picker enyo-unselectable",published:{selected:null},events:{onChange:""},handlers:{onItemContentChange:"itemContentChange"},floating:!0,showOnTop:!0,initComponents:function(){this.setScrolling(!0),this.inherited(arguments)},showingChanged:function(){this.getScroller().setShowing(this.showing),this.inherited(arguments),this.showing&&this.selected&&this.scrollToSelected()},scrollToSelected:function(){this.getScroller().scrollToControl(this.selected,!this.menuUp)},itemActivated:function(t,n){return this.processActivatedItem(n.originator),this.inherited(arguments)},processActivatedItem:function(t){t.active&&this.setSelected(t)},selectedChanged:function(t){t&&t.removeClass("selected"),this.selected&&(this.selected.addClass("selected"),this.doChange({selected:this.selected,content:this.selected.content}))},itemContentChange:function(t,n){n.originator==this.selected&&this.doChange({selected:this.selected,content:this.selected.content})},handleResize:function(){this.inherited(arguments),this.adjustPosition()}})})(enyo,this);

// lib/onyx/source/FlyweightPicker.js
(function(t){t.kind({name:"onyx.FlyweightPicker",kind:"onyx.Picker",classes:"onyx-flyweight-picker",published:{count:0},events:{onSetupItem:"",onSelect:""},handlers:{onSelect:"itemSelect"},components:[{name:"scroller",kind:"enyo.Scroller",strategyKind:"TouchScrollStrategy",components:[{name:"flyweight",kind:"FlyweightRepeater",noSelect:!0,ontap:"itemTap"}]}],scrollerName:"scroller",initComponents:function(){this.controlParentName="flyweight",this.inherited(arguments),this.$.flyweight.$.client.children[0].setActive(!0)},create:function(){this.inherited(arguments),this.countChanged()},rendered:function(){this.inherited(arguments),this.selectedChanged()},scrollToSelected:function(){var t=this.$.flyweight.fetchRowNode(this.selected);this.getScroller().scrollToNode(t,!this.menuUp)},countChanged:function(){this.$.flyweight.count=this.count},processActivatedItem:function(t){this.item=t},selectedChanged:function(t){if(this.item){null!=t&&(this.item.removeClass("selected"),this.$.flyweight.renderRow(t));var n;null!=this.selected&&(this.item.addClass("selected"),this.$.flyweight.renderRow(this.selected),this.item.removeClass("selected"),n=this.$.flyweight.fetchRowNode(this.selected)),this.doChange({selected:this.selected,content:n&&n.textContent||this.item.content})}},itemTap:function(t,n){this.setSelected(n.rowIndex),this.doSelect({selected:this.item,content:this.item.content})},itemSelect:function(t,n){return n.originator!=this?!0:void 0}})})(enyo,this);

// lib/onyx/source/DatePicker.js
(function(t,n){t.kind({name:"onyx.DatePicker",classes:"onyx-toolbar-inline",published:{disabled:!1,locale:"en-US",dayHidden:!1,monthHidden:!1,yearHidden:!1,minYear:1900,maxYear:2099,value:null},events:{onSelect:""},create:function(){this.inherited(arguments),n.ilib&&(this.locale=n.ilib.getLocale()),this.initDefaults()},initDefaults:function(){var t;n.ilib?(t=[],this._tf=new n.ilib.DateFmt({locale:this.locale,timezone:"local"}),t=this._tf.getMonthsOfYear({length:"long"})):t=[void 0,"JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],this.setupPickers(this._tf?this._tf.getTemplate():"mdy"),this.dayHiddenChanged(),this.monthHiddenChanged(),this.yearHiddenChanged();for(var e,i=this.value=this.value||new Date,r=0;e=t[r+1];r++)this.$.monthPicker.createComponent({content:e,value:r,active:r==i.getMonth()});var o=i.getFullYear();for(this.$.yearPicker.setSelected(o-this.minYear),r=1;this.monthLength(i.getYear(),i.getMonth())>=r;r++)this.$.dayPicker.createComponent({content:r,value:r,active:r==i.getDate()})},monthLength:function(t,n){return 32-new Date(t,n,32).getDate()},setupYear:function(t,n){return this.$.year.setContent(this.minYear+n.index),!0},setupPickers:function(t){var n,e,i,r=t.split(""),o=!1,a=!1,s=!1;for(e=0,i=r.length;i>e;e++)switch(n=r[e],n.toLowerCase()){case"d":s||(this.createDay(),s=!0);break;case"m":a||(this.createMonth(),a=!0);break;case"y":o||(this.createYear(),o=!0);break;default:}},createYear:function(){var t=this.maxYear-this.minYear;this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateYear",components:[{classes:"onyx-datepicker-year",name:"yearPickerButton",disabled:this.disabled},{name:"yearPicker",kind:"onyx.FlyweightPicker",count:++t,onSetupItem:"setupYear",components:[{name:"year"}]}]})},createMonth:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateMonth",components:[{classes:"onyx-datepicker-month",name:"monthPickerButton",disabled:this.disabled},{name:"monthPicker",kind:"onyx.Picker"}]})},createDay:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateDay",components:[{classes:"onyx-datepicker-day",name:"dayPickerButton",disabled:this.disabled},{name:"dayPicker",kind:"onyx.Picker"}]})},localeChanged:function(){this.refresh()},dayHiddenChanged:function(){this.$.dayPicker.getParent().setShowing(this.dayHidden?!1:!0)},monthHiddenChanged:function(){this.$.monthPicker.getParent().setShowing(this.monthHidden?!1:!0)},yearHiddenChanged:function(){this.$.yearPicker.getParent().setShowing(this.yearHidden?!1:!0)},minYearChanged:function(){this.refresh()},maxYearChanged:function(){this.refresh()},valueChanged:function(){this.refresh()},disabledChanged:function(){this.$.yearPickerButton.setDisabled(this.disabled),this.$.monthPickerButton.setDisabled(this.disabled),this.$.dayPickerButton.setDisabled(this.disabled)},updateDay:function(t,n){var e=this.calcDate(this.value.getFullYear(),this.value.getMonth(),n.selected.value);return this.doSelect({name:this.name,value:e}),this.setValue(e),!0},updateMonth:function(t,n){var e=this.calcDate(this.value.getFullYear(),n.selected.value,this.value.getDate());return this.doSelect({name:this.name,value:e}),this.setValue(e),!0},updateYear:function(t,n){if(-1!=n.originator.selected){var e=this.calcDate(this.minYear+n.originator.selected,this.value.getMonth(),this.value.getDate());this.doSelect({name:this.name,value:e}),this.setValue(e)}return!0},calcDate:function(t,n,e){return new Date(t,n,e,this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds())},refresh:function(){this.destroyClientControls(),this.initDefaults(),this.render()}})})(enyo,this);

// lib/onyx/source/TimePicker.js
(function(t,n){t.kind({name:"onyx.TimePicker",classes:"onyx-toolbar-inline",published:{disabled:!1,locale:"en-US",is24HrMode:null,value:null},events:{onSelect:""},create:function(){this.inherited(arguments),n.ilib&&(this.locale=n.ilib.getLocale()),this.initDefaults()},initDefaults:function(){if(this._strAm="AM",this._strPm="PM",n.ilib){this._tf=new n.ilib.DateFmt({locale:this.locale});var t=new n.ilib.DateFmt({locale:this.locale,type:"time",template:"a"}),e=n.ilib.Date.newInstance({locale:this.locale,hour:1});this._strAm=t.format(e),e.hour=13,this._strPm=t.format(e),null==this.is24HrMode&&(this.is24HrMode="24"==this._tf.getClock())}else null==this.is24HrMode&&(this.is24HrMode=!1);this.setupPickers(this._tf?this._tf.getTimeComponents():"hma");var i,r=this.value=this.value||new Date;if(this.is24HrMode)for(i=0;24>i;i++)this.$.hourPicker.createComponent({content:i,value:i,active:i==r.getHours()});else{var o=r.getHours();for(o=0===o?12:o,i=1;12>=i;i++)this.$.hourPicker.createComponent({content:i,value:i,active:i==(o>12?o%12:o)})}for(i=0;59>=i;i++)this.$.minutePicker.createComponent({content:10>i?"0"+i:i,value:i,active:i==r.getMinutes()});r.getHours()>=12?this.$.ampmPicker.createComponents([{content:this._strAm},{content:this._strPm,active:!0}]):this.$.ampmPicker.createComponents([{content:this._strAm,active:!0},{content:this._strPm}]),this.$.ampmPicker.getParent().setShowing(!this.is24HrMode)},setupPickers:function(t){-1!==t.indexOf("h")&&this.createHour(),-1!==t.indexOf("m")&&this.createMinute(),-1!==t.indexOf("a")&&this.createAmPm()},createHour:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateHour",components:[{classes:"onyx-timepicker-hour",name:"hourPickerButton",disabled:this.disabled},{name:"hourPicker",kind:"onyx.Picker"}]})},createMinute:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateMinute",components:[{classes:"onyx-timepicker-minute",name:"minutePickerButton",disabled:this.disabled},{name:"minutePicker",kind:"onyx.Picker"}]})},createAmPm:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateAmPm",components:[{classes:"onyx-timepicker-ampm",name:"ampmPickerButton",disabled:this.disabled},{name:"ampmPicker",kind:"onyx.Picker"}]})},disabledChanged:function(){this.$.hourPickerButton.setDisabled(this.disabled),this.$.minutePickerButton.setDisabled(this.disabled),this.$.ampmPickerButton.setDisabled(this.disabled)},localeChanged:function(){this.is24HrMode=null,this.refresh()},is24HrModeChanged:function(){this.refresh()},valueChanged:function(){this.refresh()},updateHour:function(t,n){var e=n.selected.value;if(!this.is24HrMode){var i=this.$.ampmPicker.getParent().controlAtIndex(0).content;e=e+(12==e?-12:0)+(this.isAm(i)?0:12)}return this.setValue(this.calcTime(e,this.value.getMinutes())),this.doSelect({name:this.name,value:this.value}),!0},updateMinute:function(t,n){return this.setValue(this.calcTime(this.value.getHours(),n.selected.value)),this.doSelect({name:this.name,value:this.value}),!0},updateAmPm:function(t,n){var e=this.value.getHours();return this.is24HrMode||(e+=e>11?this.isAm(n.content)?-12:0:this.isAm(n.content)?0:12),this.setValue(this.calcTime(e,this.value.getMinutes())),this.doSelect({name:this.name,value:this.value}),!0},calcTime:function(t,n){return new Date(this.value.getFullYear(),this.value.getMonth(),this.value.getDate(),t,n,this.value.getSeconds(),this.value.getMilliseconds())},isAm:function(t){return t==this._strAm?!0:!1},refresh:function(){this.destroyClientControls(),this.initDefaults(),this.render()}})})(enyo,this);

// lib/onyx/source/RadioButton.js
(function(t){t.kind({name:"onyx.RadioButton",kind:"enyo.Button",classes:"onyx-radiobutton"})})(enyo,this);

// lib/onyx/source/RadioGroup.js
(function(t){t.kind({name:"onyx.RadioGroup",kind:"enyo.Group",defaultKind:"onyx.RadioButton",highlander:!0})})(enyo,this);

// lib/onyx/source/ToggleButton.js
(function(t){t.kind({name:"onyx.ToggleButton",classes:"onyx-toggle-button",published:{active:!1,value:!1,onContent:"On",offContent:"Off",disabled:!1},events:{onChange:""},handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish"},components:[{name:"contentOn",classes:"onyx-toggle-content on"},{name:"contentOff",classes:"onyx-toggle-content off"},{classes:"onyx-toggle-button-knob"}],create:function(){this.inherited(arguments),this.value=Boolean(this.value||this.active),this.onContentChanged(),this.offContentChanged(),this.disabledChanged()},rendered:function(){this.inherited(arguments),this.updateVisualState()},updateVisualState:function(){this.addRemoveClass("off",!this.value),this.$.contentOn.setShowing(this.value),this.$.contentOff.setShowing(!this.value),this.setActive(this.value)},valueChanged:function(){this.updateVisualState(),this.doChange({value:this.value})},activeChanged:function(){this.setValue(this.active),this.bubble("onActivate")},onContentChanged:function(){this.$.contentOn.setContent(this.onContent||""),this.$.contentOn.addRemoveClass("empty",!this.onContent)},offContentChanged:function(){this.$.contentOff.setContent(this.offContent||""),this.$.contentOff.addRemoveClass("empty",!this.onContent)},disabledChanged:function(){this.addRemoveClass("disabled",this.disabled)},updateValue:function(t){this.disabled||this.setValue(t)},tap:function(){this.updateValue(!this.value)},dragstart:function(t,n){return n.horizontal?(n.preventDefault(),this.dragging=!0,this.dragged=!1,!0):void 0},drag:function(t,n){if(this.dragging){var e=n.dx;return Math.abs(e)>10&&(this.updateValue(e>0),this.dragged=!0),!0}},dragfinish:function(t,n){this.dragging=!1,this.dragged&&n.preventTap()}})})(enyo,this);

// lib/onyx/source/ToggleIconButton.js
(function(t){t.kind({name:"onyx.ToggleIconButton",kind:"onyx.Icon",published:{active:!1,value:!1},events:{onChange:""},classes:"onyx-icon-button onyx-icon-toggle",activeChanged:function(){this.addRemoveClass("active",this.value),this.bubble("onActivate")},updateValue:function(t){this.disabled||(this.setValue(t),this.doChange({value:this.value}))},tap:function(){this.updateValue(!this.value)},valueChanged:function(){this.setActive(this.value)},create:function(){this.inherited(arguments),this.value=Boolean(this.value||this.active)},rendered:function(){this.inherited(arguments),this.valueChanged(),this.removeClass("onyx-icon")}})})(enyo,this);

// lib/onyx/source/Toolbar.js
(function(t){t.kind({name:"onyx.Toolbar",classes:"onyx onyx-toolbar onyx-toolbar-inline",create:function(){this.inherited(arguments),this.hasClass("onyx-menu-toolbar")&&t.platform.android>=4&&this.applyStyle("position","static")}})})(enyo,this);

// lib/onyx/source/ProgressBar.js
(function(t){t.kind({name:"onyx.ProgressBar",classes:"onyx-progress-bar",published:{progress:0,min:0,max:100,barClasses:"",showStripes:!0,animateStripes:!0,increment:0},events:{onAnimateProgressFinish:""},components:[{name:"progressAnimator",kind:"enyo.Animator",onStep:"progressAnimatorStep",onEnd:"progressAnimatorComplete"},{name:"bar",classes:"onyx-progress-bar-bar"}],create:function(){this.inherited(arguments),this.progressChanged(),this.barClassesChanged(),this.showStripesChanged(),this.animateStripesChanged()},barClassesChanged:function(t){this.$.bar.removeClass(t),this.$.bar.addClass(this.barClasses)},showStripesChanged:function(){this.$.bar.addRemoveClass("striped",this.showStripes)},animateStripesChanged:function(){this.$.bar.addRemoveClass("animated",this.animateStripes)},progressChanged:function(){this.progress=this.clampValue(this.min,this.max,this.progress);var t=this.calcPercent(this.progress);this.updateBarPosition(t)},calcIncrement:function(t){return Math.round(t/this.increment)*this.increment},clampValue:function(t,n,e){return Math.max(t,Math.min(e,n))},calcRatio:function(t){return(t-this.min)/(this.max-this.min)},calcPercent:function(t){return 100*this.calcRatio(t)},updateBarPosition:function(t){this.$.bar.applyStyle("width",t+"%")},animateProgressTo:function(t){this.$.progressAnimator.play({startValue:this.progress,endValue:t,node:this.hasNode()})},progressAnimatorStep:function(t){return this.setProgress(t.value),!0},progressAnimatorComplete:function(t){return this.doAnimateProgressFinish(t),!0}})})(enyo,this);

// lib/onyx/source/ProgressButton.js
(function(t){t.kind({name:"onyx.ProgressButton",kind:"onyx.ProgressBar",classes:"onyx-progress-button",events:{onCancel:""},components:[{name:"progressAnimator",kind:"enyo.Animator",onStep:"progressAnimatorStep",onEnd:"progressAnimatorComplete"},{name:"bar",classes:"onyx-progress-bar-bar onyx-progress-button-bar"},{name:"client",classes:"onyx-progress-button-client"},{kind:"onyx.Icon",src:"$lib/onyx/images/progress-button-cancel.png",classes:"onyx-progress-button-icon",ontap:"cancelTap"}],cancelTap:function(){this.doCancel()}})})(enyo,this);

// lib/onyx/source/Slider.js
(function(t){t.kind({name:"onyx.Slider",kind:"onyx.ProgressBar",classes:"onyx-slider",published:{value:0,lockBar:!0,tappable:!0},events:{onChange:"",onChanging:"",onAnimateFinish:""},showStripes:!1,handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish"},moreComponents:[{kind:"Animator",onStep:"animatorStep",onEnd:"animatorComplete"},{classes:"onyx-slider-taparea"},{name:"knob",classes:"onyx-slider-knob"}],create:function(){this.inherited(arguments),this.moreComponents[2].ondown="knobDown",this.moreComponents[2].onup="knobUp",this.createComponents(this.moreComponents),this.valueChanged()},valueChanged:function(){this.value=this.clampValue(this.min,this.max,this.value),this.$.animator.isAnimating()||this.updateBar(this.value)},updateBar:function(t){var n=this.calcPercent(t);this.updateKnobPosition(n),this.lockBar&&this.setProgress(t)},updateKnobPosition:function(t){this.$.knob.applyStyle("left",t+"%")},calcKnobPosition:function(t){var n=t.clientX-this.hasNode().getBoundingClientRect().left;return n/this.getBounds().width*(this.max-this.min)+this.min},dragstart:function(t,n){return n.horizontal?(n.preventDefault(),this.dragging=!0,t.addClass("pressed"),!0):void 0},drag:function(t,n){if(this.dragging){var e=this.calcKnobPosition(n);return e=this.increment?this.calcIncrement(e):e,this.setValue(this.clampValue(this.min,this.max,e)),this.doChanging({value:this.value}),!0}},dragfinish:function(t,n){return this.dragging=!1,n.preventTap(),this.doChange({value:this.value}),t.removeClass("pressed"),!0},tap:function(t,n){if(this.tappable){var e=this.calcKnobPosition(n);return e=this.increment?this.calcIncrement(e):e,this.tapped=!0,this.animateTo(e),!0}},knobDown:function(){this.$.knob.addClass("pressed")},knobUp:function(){this.$.knob.removeClass("pressed")},animateTo:function(t){this.$.animator.play({startValue:this.value,endValue:t,node:this.hasNode()}),this.setValue(t)},animatorStep:function(t){return this.updateBar(t.value),!0},animatorComplete:function(t){return this.tapped&&(this.tapped=!1,this.doChange({value:this.value})),this.doAnimateFinish(t),!0}})})(enyo,this);

// lib/onyx/source/RangeSlider.js
(function(t){t.kind({name:"onyx.RangeSlider",kind:"onyx.ProgressBar",classes:"onyx-slider",published:{rangeMin:0,rangeMax:100,rangeStart:0,rangeEnd:100,beginValue:0,endValue:0},events:{onChange:"",onChanging:""},showStripes:!1,showLabels:!1,handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish",ondown:"down"},moreComponents:[{name:"startKnob",classes:"onyx-slider-knob"},{name:"endKnob",classes:"onyx-slider-knob onyx-range-slider-knob"}],create:function(){this.inherited(arguments),this.createComponents(this.moreComponents),this.initControls()},rendered:function(){this.inherited(arguments);var t=this.calcPercent(this.beginValue);this.updateBarPosition(t)},initControls:function(){this.$.bar.applyStyle("position","relative"),this.refreshRangeSlider(),this.showLabels&&(this.$.startKnob.createComponent({name:"startLabel",kind:"onyx.RangeSliderKnobLabel"}),this.$.endKnob.createComponent({name:"endLabel",kind:"onyx.RangeSliderKnobLabel"})),this.$.startKnob.ondown="knobDown",this.$.startKnob.onup="knobUp",this.$.endKnob.ondown="knobDown",this.$.endKnob.onup="knobUp"},refreshRangeSlider:function(){this.beginValue=this.calcKnobPercent(this.rangeStart),this.endValue=this.calcKnobPercent(this.rangeEnd),this.beginValueChanged(),this.endValueChanged()},calcKnobRatio:function(t){return(t-this.rangeMin)/(this.rangeMax-this.rangeMin)},calcKnobPercent:function(t){return 100*this.calcKnobRatio(t)},beginValueChanged:function(t){if(void 0===t){var n=this.calcPercent(this.beginValue);this.updateKnobPosition(n,this.$.startKnob)}},endValueChanged:function(t){if(void 0===t){var n=this.calcPercent(this.endValue);this.updateKnobPosition(n,this.$.endKnob)}},calcKnobPosition:function(t){var n=t.clientX-this.hasNode().getBoundingClientRect().left;return n/this.getBounds().width*(this.max-this.min)+this.min},updateKnobPosition:function(t,n){n.applyStyle("left",t+"%"),this.updateBarPosition()},updateBarPosition:function(){if(void 0!==this.$.startKnob&&void 0!==this.$.endKnob){var t=this.calcKnobPercent(this.rangeStart),n=this.calcKnobPercent(this.rangeEnd)-t;this.$.bar.applyStyle("left",t+"%"),this.$.bar.applyStyle("width",n+"%")}},calcRangeRatio:function(t){return t/100*(this.rangeMax-this.rangeMin)+this.rangeMin-this.increment/2},swapZIndex:function(t){"startKnob"===t?(this.$.startKnob.applyStyle("z-index",1),this.$.endKnob.applyStyle("z-index",0)):"endKnob"===t&&(this.$.startKnob.applyStyle("z-index",0),this.$.endKnob.applyStyle("z-index",1))},down:function(t){this.swapZIndex(t.name)},dragstart:function(t,n){return n.horizontal?(n.preventDefault(),this.dragging=!0,t.addClass("pressed"),!0):void 0},drag:function(t,n){if(this.dragging){var e,i,r,o=this.calcKnobPosition(n);if("startKnob"===t.name&&o>=0){if(!(this.endValue>=o&&-1===n.xDirection||this.endValue>=o))return this.drag(this.$.endKnob,n);this.setBeginValue(o),e=this.calcRangeRatio(this.beginValue),i=this.increment?this.calcIncrement(e+.5*this.increment):e,r=this.calcKnobPercent(i),this.updateKnobPosition(r,this.$.startKnob),this.setRangeStart(i),this.doChanging({value:i})}else if("endKnob"===t.name&&100>=o){if(!(o>=this.beginValue&&1===n.xDirection||o>=this.beginValue))return this.drag(this.$.startKnob,n);this.setEndValue(o),e=this.calcRangeRatio(this.endValue),i=this.increment?this.calcIncrement(e+.5*this.increment):e,r=this.calcKnobPercent(i),this.updateKnobPosition(r,this.$.endKnob),this.setRangeEnd(i),this.doChanging({value:i})}return!0}},dragfinish:function(t,n){this.dragging=!1,n.preventTap();var e;return"startKnob"===t.name?(e=this.calcRangeRatio(this.beginValue),this.doChange({value:e,startChanged:!0})):"endKnob"===t.name&&(e=this.calcRangeRatio(this.endValue),this.doChange({value:e,startChanged:!1})),t.removeClass("pressed"),!0},knobDown:function(t){t.addClass("pressed")},knobUp:function(t){t.removeClass("pressed")},rangeMinChanged:function(){this.refreshRangeSlider()},rangeMaxChanged:function(){this.refreshRangeSlider()},rangeStartChanged:function(){this.refreshRangeSlider()},rangeEndChanged:function(){this.refreshRangeSlider()},setStartLabel:function(t){this.$.startKnob.waterfallDown("onSetLabel",t)},setEndLabel:function(t){this.$.endKnob.waterfallDown("onSetLabel",t)}}),t.kind({name:"onyx.RangeSliderKnobLabel",classes:"onyx-range-slider-label",handlers:{onSetLabel:"setLabel"},setLabel:function(t,n){this.setContent(n)}})})(enyo,this);

// lib/onyx/source/Item.js
(function(t){t.kind({name:"onyx.Item",classes:"onyx-item",published:{tapHighlight:!0},handlers:{onhold:"hold",onrelease:"release"},hold:function(t,n){this.tapHighlight&&onyx.Item.addRemoveFlyweightClass(this.controlParent||this,"onyx-highlight",!0,n)},release:function(t,n){this.tapHighlight&&onyx.Item.addRemoveFlyweightClass(this.controlParent||this,"onyx-highlight",!1,n)},statics:{addRemoveFlyweightClass:function(t,n,e,i,r){var o=i.flyweight;o&&(r=void 0!==r?r:i.index,o.performOnRow(r,function(){t.addRemoveClass(n,e)}))}}})})(enyo,this);

// lib/onyx/source/Spinner.js
(function(t){t.kind({name:"onyx.Spinner",classes:"onyx-spinner",stop:function(){this.setShowing(!1)},start:function(){this.setShowing(!0)},toggle:function(){this.setShowing(!this.getShowing())}})})(enyo,this);

// lib/onyx/source/MoreToolbar.js
(function(t){t.kind({name:"onyx.MoreToolbar",classes:"onyx-toolbar onyx-more-toolbar",menuClass:"",movedClass:"",layoutKind:"FittableColumnsLayout",noStretch:!0,handlers:{onHide:"reflow"},published:{clientLayoutKind:"FittableColumnsLayout"},tools:[{name:"client",noStretch:!0,fit:!0,classes:"onyx-toolbar-inline"},{name:"nard",kind:"onyx.MenuDecorator",showing:!1,onActivate:"activated",components:[{kind:"onyx.IconButton",classes:"onyx-more-button"},{name:"menu",kind:"onyx.Menu",scrolling:!1,classes:"onyx-more-menu"}]}],initComponents:function(){this.menuClass&&this.menuClass.length>0&&!this.$.menu.hasClass(this.menuClass)&&this.$.menu.addClass(this.menuClass),this.createChrome(this.tools),this.inherited(arguments),this.$.client.setLayoutKind(this.clientLayoutKind)},clientLayoutKindChanged:function(){this.$.client.setLayoutKind(this.clientLayoutKind)},reflow:function(){this.inherited(arguments),this.isContentOverflowing()?(this.$.nard.show(),this.popItem()&&this.reflow()):this.tryPushItem()?this.reflow():this.$.menu.children.length||(this.$.nard.hide(),this.$.menu.hide())},activated:function(t,n){this.addRemoveClass("active",n.originator.active)},popItem:function(){var t=this.findCollapsibleItem();if(t){this.movedClass&&this.movedClass.length>0&&!t.hasClass(this.movedClass)&&t.addClass(this.movedClass),this.$.menu.addChild(t,null);var n=this.$.menu.hasNode();return n&&t.hasNode()&&t.insertNodeInParent(n),!0}},pushItem:function(){var t=this.$.menu.children,n=t[0];if(n){this.movedClass&&this.movedClass.length>0&&n.hasClass(this.movedClass)&&n.removeClass(this.movedClass),this.$.client.addChild(n);var e=this.$.client.hasNode();if(e&&n.hasNode()){for(var i,r,o=0;this.$.client.children.length>o;o++){var a=this.$.client.children[o];if(void 0!==a.toolbarIndex&&a.toolbarIndex!=o){i=a,r=o;break}}if(i&&i.hasNode()){n.insertNodeInParent(e,i.node);var s=this.$.client.children.pop();this.$.client.children.splice(r,0,s)}else n.appendNodeToParent(e)}return!0}},tryPushItem:function(){if(this.pushItem()){if(!this.isContentOverflowing())return!0;this.popItem()}},isContentOverflowing:function(){if(this.$.client.hasNode()){var t=this.$.client.children,n=t.length&&t[t.length-1].hasNode();if(n)return this.$.client.reflow(),n.offsetLeft+n.offsetWidth>this.$.client.node.clientWidth}},findCollapsibleItem:function(){for(var t,n=this.$.client.children,e=n.length-1;t=n[e];e--){if(!t.unmoveable)return t;void 0===t.toolbarIndex&&(t.toolbarIndex=e)}}})})(enyo,this);

// lib/onyx/source/IntegerPicker.js
(function(t){t.kind({name:"onyx.IntegerPicker",kind:"onyx.Picker",published:{value:0,min:0,max:9},create:function(){this.inherited(arguments),this.rangeChanged()},minChanged:function(){this.destroyClientControls(),this.rangeChanged(),this.render()},maxChanged:function(){this.destroyClientControls(),this.rangeChanged(),this.render()},rangeChanged:function(){for(var t=this.min;this.max>=t;t++)this.createComponent({content:t,active:t===this.value?!0:!1})},valueChanged:function(){var t=this.getClientControls(),n=t.length;this.value=Math.min(this.max,Math.max(this.value,this.min));for(var e=0;n>e;e++)if(this.value===parseInt(t[e].content,10)){this.setSelected(t[e]);break}},selectedChanged:function(t){t&&t.removeClass("selected"),this.selected&&(this.selected.addClass("selected"),this.doChange({selected:this.selected,content:this.selected.content})),this.setValue(parseInt(this.selected.content,10))}})})(enyo,this);

// lib/onyx/source/ContextualPopup.js
(function(t){t.kind({name:"onyx.ContextualPopup",kind:"enyo.Popup",modal:!0,autoDismiss:!0,floating:!1,classes:"onyx-contextual-popup enyo-unselectable",published:{maxHeight:100,scrolling:!0,title:void 0,actionButtons:[]},statics:{subclass:function(t,n){var e=t.prototype;n.actionButtons&&(e.kindActionButtons=n.actionButtons,delete e.actionButtons)}},vertFlushMargin:60,horizFlushMargin:50,widePopup:200,longPopup:200,horizBuffer:16,events:{onTap:""},handlers:{onActivate:"childControlActivated",onRequestShowMenu:"requestShow",onRequestHideMenu:"requestHide"},components:[{name:"title",classes:"onyx-contextual-popup-title"},{classes:"onyx-contextual-popup-scroller",components:[{name:"client",kind:"enyo.Scroller",vertical:"auto",classes:"enyo-unselectable",thumb:!1,strategyKind:"TouchScrollStrategy"}]},{name:"actionButtons",classes:"onyx-contextual-popup-action-buttons"}],scrollerName:"client",create:function(){this.inherited(arguments),this.maxHeightChanged(),this.titleChanged(),this.actionButtonsChanged()},getScroller:function(){return this.$[this.scrollerName]},titleChanged:function(){this.$.title.setContent(this.title)},actionButtonsChanged:function(){this.actionButtons?t.forEach(this.actionButtons,function(t){t.kind="onyx.Button",t.classes=t.classes+" onyx-contextual-popup-action-button",t.popup=this,t.actionButton=!0,this.$.actionButtons.createComponent(t,{owner:this.getInstanceOwner()})},this):this.kindActionButtons&&t.forEach(this.kindActionButtons,function(t){t.kind="onyx.Button",t.classes=t.classes+" onyx-contextual-popup-action-button",t.popup=this,t.actionButton=!0,this.$.actionButtons.createComponent(t,{owner:this})},this),this.hasNode()&&this.$.actionButtons.render()},maxHeightChanged:function(){this.scrolling&&this.getScroller().setMaxHeight(this.maxHeight+"px")},showingChanged:t.inherit(function(t){return function(){t.apply(this,arguments),this.scrolling&&this.getScroller().setShowing(this.showing),this.showing||(this.activator=this.activatorOffset=null),this.adjustPosition()}}),childControlActivated:function(){return!0},requestShow:function(t,n){return this.activator=n.activator.hasNode(),this.show(),!0},requestHide:function(){this.setShowing(!1)},applyPosition:function(t){var n="";for(var e in t)n+=e+":"+t[e]+(isNaN(t[e])?"; ":"px; ");this.addStyles(n)},getPageOffset:function(t){var n=this.getBoundingRect(t),e=void 0===window.pageYOffset?document.documentElement.scrollTop:window.pageYOffset,i=void 0===window.pageXOffset?document.documentElement.scrollLeft:window.pageXOffset,r=void 0===n.height?n.bottom-n.top:n.height,o=void 0===n.width?n.right-n.left:n.width;return{top:n.top+e,left:n.left+i,height:r,width:o}},adjustPosition:function(){if(this.showing&&this.hasNode()&&this.activator){this.resetPositioning(),this.activatorOffset=this.getPageOffset(this.activator);var t=this.getViewWidth(),n=this.getViewHeight(),e=this.vertFlushMargin,i=n-this.vertFlushMargin,r=this.horizFlushMargin,o=t-this.horizFlushMargin;if(e>this.activatorOffset.top+this.activatorOffset.height||this.activatorOffset.top>i){if(this.applyVerticalFlushPositioning(r,o))return;if(this.applyHorizontalFlushPositioning(r,o))return;if(this.applyVerticalPositioning())return}else if((r>this.activatorOffset.left+this.activatorOffset.width||this.activatorOffset.left>o)&&this.applyHorizontalPositioning())return;var s=this.getBoundingRect(this.node);if(s.width>this.widePopup){if(this.applyVerticalPositioning())return}else if(s.height>this.longPopup&&this.applyHorizontalPositioning())return;if(this.applyVerticalPositioning())return;if(this.applyHorizontalPositioning())return}},initVerticalPositioning:function(){this.resetPositioning(),this.addClass("vertical");var t=this.getBoundingRect(this.node),n=this.getViewHeight();return this.floating?n/2>this.activatorOffset.top?(this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height,bottom:"auto"}),this.addClass("below")):(this.applyPosition({top:this.activatorOffset.top-t.height,bottom:"auto"}),this.addClass("above")):t.top+t.height>n&&n-t.bottom<t.top-t.height?this.addClass("above"):this.addClass("below"),t=this.getBoundingRect(this.node),t.top+t.height>n||0>t.top?!1:!0},applyVerticalPositioning:function(){if(!this.initVerticalPositioning())return!1;var t=this.getBoundingRect(this.node),n=this.getViewWidth();if(this.floating){var e=this.activatorOffset.left+this.activatorOffset.width/2-t.width/2;e+t.width>n?(this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width-t.width}),this.addClass("left")):0>e?(this.applyPosition({left:this.activatorOffset.left}),this.addClass("right")):this.applyPosition({left:e})}else{var i=this.activatorOffset.left+this.activatorOffset.width/2-t.left-t.width/2;t.right+i>n?(this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width-t.right}),this.addRemoveClass("left",!0)):0>t.left+i?this.addRemoveClass("right",!0):this.applyPosition({left:i})}return!0},applyVerticalFlushPositioning:function(t,n){if(!this.initVerticalPositioning())return!1;var e=this.getBoundingRect(this.node),i=this.getViewWidth();return t>this.activatorOffset.left+this.activatorOffset.width/2?(this.activatorOffset.left+this.activatorOffset.width/2<this.horizBuffer?this.applyPosition({left:this.horizBuffer+(this.floating?0:-e.left)}):this.applyPosition({left:this.activatorOffset.width/2+(this.floating?this.activatorOffset.left:0)}),this.addClass("right"),this.addClass("corner"),!0):this.activatorOffset.left+this.activatorOffset.width/2>n?(this.activatorOffset.left+this.activatorOffset.width/2>i-this.horizBuffer?this.applyPosition({left:i-this.horizBuffer-e.right}):this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width/2-e.right}),this.addClass("left"),this.addClass("corner"),!0):!1},initHorizontalPositioning:function(){this.resetPositioning();var t=this.getBoundingRect(this.node),n=this.getViewWidth();return this.floating?n/2>this.activatorOffset.left+this.activatorOffset.width?(this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width}),this.addRemoveClass("left",!0)):(this.applyPosition({left:this.activatorOffset.left-t.width}),this.addRemoveClass("right",!0)):this.activatorOffset.left-t.width>0?(this.applyPosition({left:this.activatorOffset.left-t.left-t.width}),this.addRemoveClass("right",!0)):(this.applyPosition({left:this.activatorOffset.width}),this.addRemoveClass("left",!0)),this.addRemoveClass("horizontal",!0),t=this.getBoundingRect(this.node),0>t.left||t.left+t.width>n?!1:!0},applyHorizontalPositioning:function(){if(!this.initHorizontalPositioning())return!1;var t=this.getBoundingRect(this.node),n=this.getViewHeight(),e=this.activatorOffset.top+this.activatorOffset.height/2;return this.floating?e>=n/2-.05*n&&n/2+.05*n>=e?this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height/2-t.height/2,bottom:"auto"}):n/2>this.activatorOffset.top+this.activatorOffset.height?(this.applyPosition({top:this.activatorOffset.top-this.activatorOffset.height,bottom:"auto"}),this.addRemoveClass("high",!0)):(this.applyPosition({top:this.activatorOffset.top-t.height+2*this.activatorOffset.height,bottom:"auto"}),this.addRemoveClass("low",!0)):e>=n/2-.05*n&&n/2+.05*n>=e?this.applyPosition({top:(this.activatorOffset.height-t.height)/2}):n/2>this.activatorOffset.top+this.activatorOffset.height?(this.applyPosition({top:-this.activatorOffset.height}),this.addRemoveClass("high",!0)):(this.applyPosition({top:t.top-t.height-this.activatorOffset.top+this.activatorOffset.height}),this.addRemoveClass("low",!0)),!0},applyHorizontalFlushPositioning:function(t,n){if(!this.initHorizontalPositioning())return!1;var e=this.getBoundingRect(this.node),i=this.getViewHeight();return this.floating?i/2>this.activatorOffset.top?(this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height/2}),this.addRemoveClass("high",!0)):(this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height/2-e.height}),this.addRemoveClass("low",!0)):e.top+e.height>i&&i-e.bottom<e.top-e.height?(this.applyPosition({top:e.top-e.height-this.activatorOffset.top-this.activatorOffset.height/2}),this.addRemoveClass("low",!0)):(this.applyPosition({top:this.activatorOffset.height/2}),this.addRemoveClass("high",!0)),t>this.activatorOffset.left+this.activatorOffset.width?(this.addClass("left"),this.addClass("corner"),!0):this.activatorOffset.left>n?(this.addClass("right"),this.addClass("corner"),!0):!1},getBoundingRect:function(t){var n=t.getBoundingClientRect();return n.width&&n.height?n:{left:n.left,right:n.right,top:n.top,bottom:n.bottom,width:n.right-n.left,height:n.bottom-n.top}},getViewHeight:function(){return void 0===window.innerHeight?document.documentElement.clientHeight:window.innerHeight},getViewWidth:function(){return void 0===window.innerWidth?document.documentElement.clientWidth:window.innerWidth},resetPositioning:function(){this.removeClass("right"),this.removeClass("left"),this.removeClass("high"),this.removeClass("low"),this.removeClass("corner"),this.removeClass("below"),this.removeClass("above"),this.removeClass("vertical"),this.removeClass("horizontal"),this.applyPosition({left:"auto"}),this.applyPosition({top:"auto"})},handleResize:function(){this.inherited(arguments),this.adjustPosition()}})})(enyo,this);

// source/data/data.js


// source/views/views.js
enyo.kind({name:"myapp.MainView",kind:"FittableRows",fit:!0,components:[{kind:"onyx.Toolbar",components:[{name:"errorPopup",kind:"onyx.Popup",centered:!0,floating:!0,classes:"onyx-sample-popup",style:"padding: 10px;"},{kind:"enyo.FileInputDecorator",onSelect:"customSelected",components:[{kind:"onyx.IconButton",src:"assets/open.png"}]},{kind:"onyx.Button",content:"Clear Filter",ontap:"clearFilterTapped"}]},{kind:"FittableColumns",fit:!0,components:[{kind:"enyo.Scroller",fit:!0,components:[{kind:"edvent.EventPlot",name:"plot"}]}]}],create:function(){this.inherited(arguments)},loadUrl:function(t){console.log(loadUrl),d3.json(t,enyo.bind(this,function(t,n){return t?this.dataError(t):(this.dataLoaded(n),void 0)}))},customSelected:function(t,n){var e=n.files[0],i=new FileReader;i.onload=enyo.bind(this,"fileLoaded"),i.readAsText(e)},fileLoaded:function(t){var n;try{n=JSON.parse(t.target.result)}catch(t){return this.dataError(t),void 0}this.dataLoaded(n)},dataError:function(t){this.$.errorPopup.setContent(t),this.$.errorPopup.show()},dataLoaded:function(t){this.$.plot.setData(t),this.$.plot.plot()},clearFilterTapped:function(){this.$.plot.clearFilter()}});

// source/views/InfoView.js
enyo.kind({name:"edvent.InfoView",classes:"onyx edvent-infoview",published:{entry:void 0},components:[{kind:"onyx.Groupbox",components:[{name:"method",kind:"onyx.GroupboxHeader",content:""},{name:"cls",content:"",style:"padding: 3px;"},{name:"object",content:"",style:"padding: 3px;"},{name:"type",content:"",style:"padding: 3px;"}]},{kind:"onyx.Groupbox",components:[{kind:"onyx.GroupboxHeader",content:"Input"},{name:"inputKeys",components:[]}]},{kind:"onyx.Groupbox",components:[{kind:"onyx.GroupboxHeader",content:"Output"},{name:"outputKeys",components:[]}]}],entryChanged:function(){this.setTo(this.entry)},setTo:function(t){this.$.cls.setContent(t.class),this.$.method.setContent(t.method),this.$.object.setContent(t.obj),this.$.type.setContent(t.type),this.$.inputKeys.destroyComponents(),this.$.outputKeys.destroyComponents();for(key in t.data_in)this.$.inputKeys.createComponent({content:""+key+": "+t.data_in[key],style:"padding: 3px;"});for(key in t.data_out)this.$.outputKeys.createComponent({content:""+key+": "+t.data_out[key],style:"padding: 3px;"})}});

// source/fileinputdecorator/FileInputDecorator.js
enyo.kind({name:"enyo.FileInputDecorator",published:{type:"file",mime:void 0,capture:!1,multiple:!1,inputName:void 0,disabled:!1},events:{onSelect:""},tag:"span",handlers:{ontap:"browse"},components:[{style:"width: 0px; height: 0px; overflow: hidden;",components:[{name:"fileInput",kind:"enyo.Input",type:"file",onchange:"filesSelected"}]},{name:"client",tag:"span"}],defaultClient:[{kind:window.onyx?"onyx.Button":"enyo.Button",content:"Browse..."}],create:function(){this.inherited(arguments),this.$.client.children&&0!=this.$.client.children.length||this.$.client.createComponents(this.defaultClient),this.updateFileInputAttr(),this.disabledChanged()},updateFileInputAttr:function(){this.mime?(this.$.fileInput.setAttribute("accept",this.mime),this.$.fileInput.setAttribute("capture","filesystem")):"audio"==this.type?(this.$.fileInput.setAttribute("accept","audio/*"),this.capture?this.$.fileInput.setAttribute("capture","microphone"):this.$.fileInput.setAttribute("capture","filesystem")):"image"==this.type?(this.$.fileInput.setAttribute("accept","image/*"),this.capture?this.$.fileInput.setAttribute("capture","camera"):this.$.fileInput.setAttribute("capture","filesystem")):"video"==this.type?(this.$.fileInput.setAttribute("accept","video/*"),this.capture?this.$.fileInput.setAttribute("capture","camcorder"):this.$.fileInput.setAttribute("capture","filesystem")):(this.$.fileInput.setAttribute("accept","*/*"),this.$.fileInput.setAttribute("capture","filesystem")),this.multiple?this.$.fileInput.setAttribute("multiple","multiple"):this.$.fileInput.setAttribute("multiple",null),this.inputName?this.$.fileInput.setAttribute("name",this.inputName):this.$.fileInput.setAttribute("name",null)},typeChanged:function(){this.updateFileInputAttr()},captureChanged:function(){this.updateFileInputAttr()},multipleChanged:function(){this.updateFileInputAttr()},inputNameChanged:function(){this.updateFileInputAttr()},disabledChanged:function(){this.$.fileInput.setDisabled(this.disabled)},browse:function(){var t=this.$.fileInput.hasNode();t&&t.click&&t.click()},filesSelected:function(t,n){this.doSelect({value:this.$.fileInput.getValue(),files:n.target.files})}});

// source/EventPlot/EventPlot.js
enyo.kind({name:"edvent.EventPlot",kind:enyo.Control,published:{data:void 0},components:[{tag:"div",name:"context"},{tag:"div",name:"focus"}],tooltipView:void 0,create:function(){this.inherited(arguments),this.tooltipView=new edvent.InfoView},objectList:[],childList:[],eventList:[],classData:[],svgNodes:void 0,lineGroupNodes:void 0,scatterGroupNodes:void 0,x:void 0,x2:void 0,yList:[],colorList:[],xAxis:void 0,brush:void 0,generateLine:void 0,dataChanged:function(){var t=this.data;objectList=[],t.forEach(function(t){var n={"class":t.class,obj:t.obj},e=objectList.filter(function(t){return t.class===n.class&&t.obj===n.obj})[0];void 0==e&&objectList.push(n)}),childList=[],t.forEach(function(t){if("link"==t.type){var n=this.objectList.filter(function(n){return n.class===t.class&&n.obj===t.obj})[0],e=this.objectList.filter(function(n){return n.obj===t.data_in.child})[0];void 0!=e&&childList.push({parent:n,child:e})}}),this.objectList=objectList,this.childList=childList},plot:function(){this.container.node.offsetTop,this.container.node.offsetLeft;var t={top:20,right:20,bottom:30,left:20},n={top:10,right:20,bottom:10,left:20},e=this.container.node.offsetWidth-t.left-t.right,i=this.container.node.offsetHeight-t.top-t.bottom,r=20,o=d3.scale.linear().range([0,e]),s=d3.scale.linear().range([0,e]),a=[],h=[],u=[];this.x=o,this.x2=s,this.xAxis=d3.svg.axis().scale(this.x).ticks(0).orient("bottom"),tip=d3.tip().attr("class","d3-tip").render(enyo.bind(this,function(t,n){this.tooltipView.setTo(n),this.tooltipView.renderInto(t)})),tip.offset(function(t){return function(){return this.getBoundingClientRect().left>t/2?[0,-10]:[0,10]}}(e)).direction(function(t){return function(){return this.getBoundingClientRect().left>t/2?"w":"e"}}(e)),data=this.data;var l=0;data.forEach(function(t){t.index=l++}),this.classData=d3.nest().key(function(t){return t.class}).entries(data),this.classData.forEach(function(t,n){t.class_index=n,t.values.forEach(function(t){t.class_index=n}),h[n]=d3.scale.category10(),h[n].domain(t.values.filter(function(n,e){return t.values.indexOf(n)==e}).map(function(t){return t.obj}));var e=d3.nest().key(function(t){return t.method}).entries(t.values);u[n]=20*e.length,a[n]=d3.scale.ordinal(),a[n].domain(t.values.map(function(t){return t.method})).rangePoints([u[n],0])}),this.brush=d3.svg.brush().x(s).on("brush",enyo.bind(this,"onBrushed"));var c=d3.select("#"+this.$.context.id).append("svg").attr("width",e+n.left+n.right).attr("height",r+n.top+n.bottom).append("g").attr("class","context").attr("transform","translate("+n.left+","+n.top+")");c.append("rect").attr("class","graph-context").attr("width",e).attr("height",r);var f=c.append("g").attr("class","brush").call(this.brush);f.selectAll("rect").attr("height",r);var d=d3.select("#"+this.$.focus.id).selectAll("svg").data(this.classData,function(t){return t.class_index}).enter().append("svg").attr("width",e+t.left+t.right).attr("height",function(n,e){return u[e]+t.top+t.bottom}).append("g").attr("transform","translate("+t.left+","+t.top+")");d.call(tip),d.append("defs").append("clipPath").attr("transform","translate(0,-7)").attr("id","clip").append("rect").attr("width",e+7).attr("height",i),o.domain(d3.extent(data,function(t){return t.index})).nice(),s.domain(o.domain()),d.append("g").attr("clip-path","url(#clip)").attr("class","x axis").attr("transform",function(t,n){return"translate(0,"+u[n]+")"}).call(this.xAxis),d.append("text").attr("class","label").attr("transform",function(t,n){return"translate(5,"+u[n]+")"}).attr("y",6).attr("dy",".71em").text(enyo.bind(this,function(t,n){return this.classData[n].key})),this.generateLine=d3.svg.line().interpolate("step-after").x(function(t){return o(t.index)}).y(function(t){return a[t.class_index](t.method)}),this.lineGroupNodes=d.append("g").attr("class","object").attr("clip-path","url(#clip)"),this.scatterGroupNodes=d.append("g").attr("class","scatter").attr("clip-path","url(#clip)"),this.svgNodes=d,this.yList=a,this.colorList=h,this.addNewEntries()},clearFilter:function(){this.addNewEntries(this.data)},clearDelEntries:function(t){d3.selectAll(".dot").data(t,function(t){return t.index}).exit().transition().style("opacity",0).remove(),d3.selectAll(".line").data(t,function(t){return t.obj+t.class_index}).exit().transition().style("opacity",0).remove()},addNewEntries:function(){this.svgNodes;var t=this.x,n=this.yList,e=this.colorList,i=function(t,n){return e[n].domain().map(function(e){return{obj:e,class_index:n,values:t.values.filter(function(t){return t.obj==e})}})};this.lineGroupNodes.data(this.classData,function(t){return t.class_index});var r=this.lineGroupNodes.selectAll(".object .line").data(i,function(t){return t.obj}).enter();r.append("path").attr("class","line").attr("d",enyo.bind(this,function(t){return this.generateLine(t.values)})).style("stroke",function(t){return e[t.class_index](t.obj)}).style("opacity",0).transition().style("opacity",1),this.scatterGroupNodes.data(this.classData,function(t){return t.class_index});var o=this.scatterGroupNodes.selectAll(".scatter .dot").data(function(t){return t.values},function(t){return t.index}).enter();o.append("circle").filter(function(t){return"event"==t.type}).attr("class","dot").attr("r",5).attr("cx",function(n){return t(n.index)}).attr("cy",function(t){return n[t.class_index](t.method)}).style("fill",function(t){return e[t.class_index](t.obj)}).on("mouseover",tip.show).on("mouseout",tip.hide).on("click",enyo.bind(this,"onLinkFilter")).style("opacity",0).transition().style("opacity",1),o.append("rect").filter(function(t){return"entry"==t.type}).attr("class","dot").attr("x",function(n){return t(n.index)-5}).attr("y",function(t){return n[t.class_index](t.method)-5}).attr("width",10).attr("height",10).style("fill",function(t){return e[t.class_index](t.obj)}).on("mouseover",tip.show).on("mouseout",tip.hide).on("click",enyo.bind(this,"onLinkFilter")).style("opacity",0).transition().style("opacity",1),o.append("rect").filter(function(t){return"exit"==t.type}).attr("class","dot").attr("transform",function(e){return"rotate(45 "+Math.round(t(e.index)-5)+" "+Math.round(n[e.class_index](e.method)-5)+")"}).attr("x",function(n){return t(n.index)-5}).attr("y",function(t){return n[t.class_index](t.method)-5}).attr("width",10).attr("height",10).style("fill",function(t){return e[t.class_index](t.obj)}).on("mouseover",tip.show).on("mouseout",tip.hide).on("click",enyo.bind(this,"onLinkFilter")).style("opacity",0).transition().style("opacity",1)},updateEntries:function(){var t=this.colorList,n=this.x,e=this.yList,i=this.svgNodes,r=function(n,e){return t[e].domain().map(function(t){return{obj:t,class_index:e,values:n.values.filter(function(n){return n.obj==t})}})};i.selectAll(".line").data(r,function(t){return t.obj}).attr("d",enyo.bind(this,function(t){return this.generateLine(t.values)}));var o=i.selectAll(".dot").data(function(t){return t.values},function(t){return t.index});o.filter(function(t){return"event"==t.type}).attr("cx",function(t){return n(t.index)}).attr("cy",function(t){return e[t.class_index](t.method)}),o.filter(function(t){return"entry"==t.type}).attr("x",function(t){return n(t.index)-5}).attr("y",function(t){return e[t.class_index](t.method)-5}),o.filter(function(t){return"exit"==t.type}).attr("transform",function(t){return"rotate(45 "+Math.round(n(t.index)-5)+" "+Math.round(e[t.class_index](t.method)-5)+")"}).attr("x",function(t){return n(t.index)-5}).attr("y",function(t){return e[t.class_index](t.method)-5})},onBrushed:function(){this.colorList;var t=this.x;this.x2,this.yList;var n=this.svgNodes;t.domain(this.brush.empty()?this.x2.domain():this.brush.extent()),n.select(".x.axis").call(this.xAxis),this.updateEntries()},onLinkFilter:function(t){var n=[],e=this;this.data.forEach(function(i){"link"!=i.type&&(e.eventIsChildOf(i,t)?n.push(i):e.eventIsParentOf(i,t)&&n.push(i))}),this.clearDelEntries(n)},eventIsChildOf:function(t,n){if(t.obj==n.obj)return!0;for(index in this.childList)if(this.childList[index].parent.obj==t.obj){if(this.childList[index].child.obj==n.obj)return!0;if(1==this.eventIsChildOf(this.childList[index].child,n))return!0}return!1},eventIsParentOf:function(t,n){if(t.obj==n.obj)return!0;for(index in this.childList)if(this.childList[index].child.obj==t.obj){if(this.childList[index].parent.obj==n.obj)return!0;if(1==this.eventIsParentOf(this.childList[index].parent,n))return!0}return!1}});

// source/app.js
function parse_args(t){var n=null,e=[];return location.search.substr(1).split("&").forEach(function(i){e=i.split("="),e[0]===t&&(n=decodeURIComponent(e[1]))}),n}enyo.kind({name:"myapp.Application",kind:"enyo.Application",view:"myapp.MainView",loadUrl:function(t){this.view.loadUrl(t)}}),enyo.ready(function(){var t=new myapp.Application({name:"app"});loadUrl=parse_args("load"),null!=loadUrl&&t.loadUrl(loadUrl)});
